var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{r as s,a,g as r,R as i,u as n,b as l,L as c,N as o,c as d,d as m,e as x,f as u,B as h}from"./vendor-dc77fa10.js";import{U as p,L as g,X as f,M as b,a as y,b as v,Q as j,A as N,C as w,c as k,d as S,e as C,f as E,S as _,g as A,h as P,i as D,E as T,T as R,j as F,k as I,P as L,l as z,m as $,n as O,o as M,p as U,q,r as B,B as G,s as V,t as Y,F as Q,u as W,v as H,w as X,x as J,y as Z,z as K,D as ee,G as te,H as se,I as ae,J as re,K as ie,N as ne,O as le,R as ce,V as oe,W as de,Y as me,Z as xe,_ as ue,$ as he,a0 as pe,a1 as ge,a2 as fe}from"./ui-90606e9d.js";import{o as be,r as ye,a as ve,b as je,s as Ne,u as we,n as ke,l as Se,e as Ce,c as Ee}from"./forms-7333cb69.js";import{_ as _e,k as Ae}from"./qr-dcea3a6e.js";import{l as Pe,E as De,u as Te,a as Re,C as Fe}from"./stripe-a5dc6117.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ie={exports:{}},Le={},ze=s,$e=Symbol.for("react.element"),Oe=Symbol.for("react.fragment"),Me=Object.prototype.hasOwnProperty,Ue=ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qe={key:!0,ref:!0,__self:!0,__source:!0};function Be(e,t,s){var a,r={},i=null,n=null;for(a in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(n=t.ref),t)Me.call(t,a)&&!qe.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:$e,type:e,key:i,ref:n,props:r,_owner:Ue.current}}Le.Fragment=Oe,Le.jsx=Be,Le.jsxs=Be,Ie.exports=Le;var Ge,Ve=Ie.exports,Ye=a;Ge=Ye.createRoot,Ye.hydrateRoot;let Qe,We,He,Xe={data:""},Je=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ze=/\/\*[^]*?\*\/|  +/g,Ke=/\n+/g,et=(e,t)=>{let s="",a="",r="";for(let i in e){let n=e[i];"@"==i[0]?"i"==i[1]?s=i+" "+n+";":a+="f"==i[1]?et(n,i):i+"{"+et(n,"k"==i[1]?"":t)+"}":"object"==typeof n?a+=et(n,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=n&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=et.p?et.p(i,n):i+":"+n+";")}return s+(t&&r?t+"{"+r+"}":r)+a},tt={},st=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+st(e[s]);return t}return e};function at(e){let t=this||{},s=e.call?e(t.p):e;return((e,t,s,a,r)=>{let i=st(e),n=tt[i]||(tt[i]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(i));if(!tt[n]){let t=i!==e?e:(e=>{let t,s,a=[{}];for(;t=Je.exec(e.replace(Ze,""));)t[4]?a.shift():t[3]?(s=t[3].replace(Ke," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(Ke," ").trim();return a[0]})(e);tt[n]=et(r?{["@keyframes "+n]:t}:t,s?"":"."+n)}let l=s&&tt.g?tt.g:null;return s&&(tt.g=tt[n]),c=tt[n],o=t,d=a,(m=l)?o.data=o.data.replace(m,c):-1===o.data.indexOf(c)&&(o.data=d?c+o.data:o.data+c),n;var c,o,d,m})(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let i=t[r];if(i&&i.call){let e=i(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":et(e,""):!1===e?"":e}return e+a+(null==i?"":i)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,(a=t.target,"object"==typeof window?((a?a.querySelector("#_goober"):window._goober)||Object.assign((a||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:a||Xe),t.g,t.o,t.k);var a}at.bind({g:1});let rt=at.bind({k:1});function it(e,t){let s=this||{};return function(){let a=arguments;function r(i,n){let l=Object.assign({},i),c=l.className||r.className;s.p=Object.assign({theme:We&&We()},l),s.o=/ *go\d+/.test(c),l.className=at.apply(s,a)+(c?" "+c:""),t&&(l.ref=n);let o=e;return e[0]&&(o=l.as||e,delete l.as),He&&o[0]&&He(l),Qe(o,l)}return t?t(r):r}}var nt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,lt=(()=>{let e=0;return()=>(++e).toString()})(),ct=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ot="default",dt=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:a}=t;return dt(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},mt=[],xt={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},ut={},ht=(e,t=ot)=>{ut[t]=dt(ut[t]||xt,e),mt.forEach(([e,s])=>{e===t&&s(ut[t])})},pt=e=>Object.keys(ut).forEach(t=>ht(e,t)),gt=(e=ot)=>t=>{ht(t,e)},ft={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bt=e=>(t,s)=>{let a=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||lt()}))(t,e,s);return gt(a.toasterId||(e=>Object.keys(ut).find(t=>ut[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},yt=(e,t)=>bt("blank")(e,t);yt.error=bt("error"),yt.success=bt("success"),yt.loading=bt("loading"),yt.custom=bt("custom"),yt.dismiss=(e,t)=>{let s={type:3,toastId:e};t?gt(t)(s):pt(s)},yt.dismissAll=e=>yt.dismiss(void 0,e),yt.remove=(e,t)=>{let s={type:4,toastId:e};t?gt(t)(s):pt(s)},yt.removeAll=e=>yt.remove(void 0,e),yt.promise=(e,t,s)=>{let a=yt.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?nt(t.success,e):void 0;return r?yt.success(r,{id:a,...s,...null==s?void 0:s.success}):yt.dismiss(a),e}).catch(e=>{let r=t.error?nt(t.error,e):void 0;r?yt.error(r,{id:a,...s,...null==s?void 0:s.error}):yt.dismiss(a)}),e};var vt,jt,Nt,wt,kt=(e,t="default")=>{let{toasts:a,pausedAt:r}=((e={},t=ot)=>{let[a,r]=s.useState(ut[t]||xt),i=s.useRef(ut[t]);s.useEffect(()=>(i.current!==ut[t]&&r(ut[t]),mt.push([t,r]),()=>{let e=mt.findIndex(([e])=>e===t);e>-1&&mt.splice(e,1)}),[t]);let n=a.toasts.map(t=>{var s,a,r;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||ft[t.type],style:{...e.style,...null==(r=e[t.type])?void 0:r.style,...t.style}}});return{...a,toasts:n}})(e,t),i=s.useRef(new Map).current,n=s.useCallback((e,t=1e3)=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),l({type:4,toastId:e})},t);i.set(e,s)},[]);s.useEffect(()=>{if(r)return;let e=Date.now(),s=a.map(s=>{if(s.duration===1/0)return;let a=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(a<0))return setTimeout(()=>yt.dismiss(s.id,t),a);s.visible&&yt.dismiss(s.id)});return()=>{s.forEach(e=>e&&clearTimeout(e))}},[a,r,t]);let l=s.useCallback(gt(t),[t]),c=s.useCallback(()=>{l({type:5,time:Date.now()})},[l]),o=s.useCallback((e,t)=>{l({type:1,toast:{id:e,height:t}})},[l]),d=s.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),m=s.useCallback((e,t)=>{let{reverseOrder:s=!1,gutter:r=8,defaultPosition:i}=t||{},n=a.filter(t=>(t.position||i)===(e.position||i)&&t.height),l=n.findIndex(t=>t.id===e.id),c=n.filter((e,t)=>t<l&&e.visible).length;return n.filter(e=>e.visible).slice(...s?[c+1]:[0,c]).reduce((e,t)=>e+(t.height||0)+r,0)},[a]);return s.useEffect(()=>{a.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[a,n]),{toasts:a,handlers:{updateHeight:o,startPause:c,endPause:d,calculateOffset:m}}},St=rt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ct=rt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Et=rt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_t=it("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${St} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ct} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Et} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,At=rt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Pt=it("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${At} 1s linear infinite;
`,Dt=rt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Tt=rt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Rt=it("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Dt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Tt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ft=it("div")`
  position: absolute;
`,It=it("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Lt=rt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zt=it("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Lt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$t=({toast:e})=>{let{icon:t,type:a,iconTheme:r}=e;return void 0!==t?"string"==typeof t?s.createElement(zt,null,t):t:"blank"===a?null:s.createElement(It,null,s.createElement(Pt,{...r}),"loading"!==a&&s.createElement(Ft,null,"error"===a?s.createElement(_t,{...r}):s.createElement(Rt,{...r})))},Ot=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Mt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Ut=it("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qt=it("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Bt=s.memo(({toast:e,position:t,style:a,children:r})=>{let i=e.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=ct()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Ot(s),Mt(s)];return{animation:t?`${rt(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rt(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},n=s.createElement($t,{toast:e}),l=s.createElement(qt,{...e.ariaProps},nt(e.message,e));return s.createElement(Ut,{className:e.className,style:{...i,...a,...e.style}},"function"==typeof r?r({icon:n,message:l}):s.createElement(s.Fragment,null,n,l))});vt=s.createElement,et.p=jt,Qe=vt,We=Nt,He=wt;var Gt=({id:e,className:t,style:a,onHeightUpdate:r,children:i})=>{let n=s.useCallback(t=>{if(t){let s=()=>{let s=t.getBoundingClientRect().height;r(e,s)};s(),new MutationObserver(s).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return s.createElement("div",{ref:n,className:t,style:a},i)},Vt=at`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Yt=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:r,children:i,toasterId:n,containerStyle:l,containerClassName:c})=>{let{toasts:o,handlers:d}=kt(a,n);return s.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...l},className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},o.map(a=>{let n=a.position||t,l=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ct()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...a,...r}})(n,d.calculateOffset(a,{reverseOrder:e,gutter:r,defaultPosition:t}));return s.createElement(Gt,{id:a.id,key:a.id,onHeightUpdate:d.updateHeight,className:a.visible?Vt:"",style:l},"custom"===a.type?nt(a.message,a):i?i(a):s.createElement(Bt,{toast:a,position:n}))}))},Qt=yt;const Wt=e=>{let t;const s=new Set,a=(e,a)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,i={setState:a,getState:r,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{s.clear()}},n=t=e(a,r,i);return i};var Ht={exports:{}},Xt={},Jt={exports:{}},Zt={},Kt=s;var es="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ts=Kt.useState,ss=Kt.useEffect,as=Kt.useLayoutEffect,rs=Kt.useDebugValue;function is(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!es(e,s)}catch(a){return!0}}var ns="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=ts({inst:{value:s,getSnapshot:t}}),r=a[0].inst,i=a[1];return as(function(){r.value=s,r.getSnapshot=t,is(r)&&i({inst:r})},[e,s,t]),ss(function(){return is(r)&&i({inst:r}),e(function(){is(r)&&i({inst:r})})},[e]),rs(s),s};Zt.useSyncExternalStore=void 0!==Kt.useSyncExternalStore?Kt.useSyncExternalStore:ns,Jt.exports=Zt;var ls=Jt.exports,cs=s,os=ls;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ms=os.useSyncExternalStore,xs=cs.useRef,us=cs.useEffect,hs=cs.useMemo,ps=cs.useDebugValue;Xt.useSyncExternalStoreWithSelector=function(e,t,s,a,r){var i=xs(null);if(null===i.current){var n={hasValue:!1,value:null};i.current=n}else n=i.current;i=hs(function(){function e(e){if(!c){if(c=!0,i=e,e=a(e),void 0!==r&&n.hasValue){var t=n.value;if(r(t,e))return l=t}return l=e}if(t=l,ds(i,e))return t;var s=a(e);return void 0!==r&&r(t,s)?(i=e,t):(i=e,l=s)}var i,l,c=!1,o=void 0===s?null:s;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,s,a,r]);var l=ms(e,i[0],i[1]);return us(function(){n.hasValue=!0,n.value=l},[l]),ps(l),l},Ht.exports=Xt;const gs=r(Ht.exports),{useDebugValue:fs}=i,{useSyncExternalStoreWithSelector:bs}=gs;const ys=e=>e;const vs=e=>{const t="function"==typeof e?(e=>e?Wt(e):Wt)(e):e,s=(e,s)=>function(e,t=ys,s){const a=bs(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return fs(a),a}(t,e,s);return Object.assign(s,t),s},js=e=>e?vs(e):vs;function Ns(e,t){let s;try{s=e()}catch(a){return}return{getItem:e=>{var a;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(a=s.getItem(e))?a:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,a)=>s.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>s.removeItem(e)}}const ws=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then:e=>ws(e)(s),catch(e){return this}}}catch(vt){return{then(e){return this},catch:t=>ws(t)(vt)}}},ks=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(s,a,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1;const l=new Set,c=new Set;let o;try{o=i.getStorage()}catch(g){}if(!o)return e((...e)=>{s(...e)},a,r);const d=ws(i.serialize),m=()=>{const e=i.partialize({...a()});let t;const s=d({state:e,version:i.version}).then(e=>o.setItem(i.name,e)).catch(e=>{t=e});if(t)throw t;return s},x=r.setState;r.setState=(e,t)=>{x(e,t),m()};const u=e((...e)=>{s(...e),m()},a,r);let h;const p=()=>{var e;if(!o)return;n=!1,l.forEach(e=>e(a()));const t=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,a()))||void 0;return ws(o.getItem.bind(o))(i.name).then(e=>{if(e)return i.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version)}}).then(e=>{var t;return h=i.merge(e,null!=(t=a())?t:u),s(h,!0),m()}).then(()=>{null==t||t(h,void 0),n=!0,c.forEach(e=>e(h))}).catch(e=>{null==t||t(void 0,e)})};return r.persist={setOptions:e=>{i={...i,...e},e.getStorage&&(o=e.getStorage())},clearStorage:()=>{null==o||o.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>n,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},p(),h||u})(e,t):((e,t)=>(s,a,r)=>{let i={storage:Ns(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1;const l=new Set,c=new Set;let o=i.storage;if(!o)return e((...e)=>{s(...e)},a,r);const d=()=>{const e=i.partialize({...a()});return o.setItem(i.name,{state:e,version:i.version})},m=r.setState;r.setState=(e,t)=>{m(e,t),d()};const x=e((...e)=>{s(...e),d()},a,r);let u;r.getInitialState=()=>x;const h=()=>{var e,t;if(!o)return;n=!1,l.forEach(e=>{var t;return e(null!=(t=a())?t:x)});const r=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=a())?e:x))||void 0;return ws(o.getItem.bind(o))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate)return[!0,i.migrate(e.state,e.version)]}return[!1,void 0]}).then(e=>{var t;const[r,n]=e;if(u=i.merge(n,null!=(t=a())?t:x),s(u,!0),r)return d()}).then(()=>{null==r||r(u,void 0),u=a(),n=!0,c.forEach(e=>e(u))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{i={...i,...e},e.storage&&(o=e.storage)},clearStorage:()=>{null==o||o.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>h(),hasHydrated:()=>n,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},i.skipHydration||h(),u||x})(e,t),Ss=js()(ks((e,t)=>({user:null,accessToken:null,isAuthenticated:!1,isLoading:!1,error:null,setAuth:(t,s)=>{e({user:t,accessToken:s,isAuthenticated:!0,error:null})},clearAuth:()=>{e({user:null,accessToken:null,isAuthenticated:!1,error:null})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},updateUser:s=>{const a=t().user;a&&e({user:{...a,...s}})},validateToken:()=>{const{accessToken:e}=t();return!(!e||!(e=>{if(!e||"string"!=typeof e)return!1;const t=e.split(".");if(3!==t.length)return!1;try{return t.forEach(e=>{if(!e)throw new Error("Empty part");atob(e.replace(/-/g,"+").replace(/_/g,"/"))}),!0}catch{return!1}})(e))||(t().clearAuth(),!1)}}),{name:"auth-store",partialize:e=>({user:e.user,accessToken:e.accessToken,isAuthenticated:e.isAuthenticated})}));const Cs=new class{constructor(e=10,s=6e4){t(this,"requests",new Map),t(this,"limit"),t(this,"windowMs"),this.limit=e,this.windowMs=s}isAllowed(e){const t=Date.now(),s=(this.requests.get(e)||[]).filter(e=>t-e<this.windowMs);return!(s.length>=this.limit)&&(s.push(t),this.requests.set(e,s),!0)}getRemainingRequests(e){const t=Date.now(),s=(this.requests.get(e)||[]).filter(e=>t-e<this.windowMs);return Math.max(0,this.limit-s.length)}}(20,6e4);class Es extends Error{constructor(e,t,s){super(s||t.error||"An error occurred"),this.status=e,this.response=t,this.name="ApiError"}}const _s=new class{constructor(e="https://your-backend-domain.com/api"){t(this,"baseURL"),this.baseURL=e}async request(e,t={}){const s=`${this.baseURL}${e}`,a=`${t.method||"GET"}:${e}`;if(!Cs.isAllowed(a)){const e=Cs.getRemainingRequests(a);throw new Es(429,{success:!1,error:`Rate limit exceeded. ${e} requests remaining in this minute.`})}const r={headers:{...t.body instanceof FormData?{}:{"Content-Type":"application/json"},...t.headers},credentials:"include",...t},i=this.getStoredToken();i&&(r.headers.Authorization=`Bearer ${i}`);try{0;const e=await fetch(s,r),t=await e.json();if(!e.ok){if(401===e.status&&"TOKEN_EXPIRED"===t.code)throw this.handleTokenExpiration(),new Es(e.status,{...t,shouldRedirectToLogin:!0});throw new Es(e.status,t)}return t}catch(n){if(n instanceof Es)throw n;throw new Es(0,{success:!1,error:"Network error or server unavailable"})}}getStoredToken(){var e;try{const t=Ss.getState();if(t.accessToken)return t.accessToken;const s=localStorage.getItem("auth-store");if(s){const t=JSON.parse(s);return(null==(e=t.state)?void 0:e.accessToken)||t.accessToken||null}}catch(t){}return null}handleTokenExpiration(){const e=Ss.getState();e.clearAuth(),e.setError("Your session has expired. Please log in again."),setTimeout(()=>{window.location.href="/login"},1e3)}async get(e){return this.request(e,{method:"GET"})}async post(e,t){const s=t instanceof FormData,a={method:"POST"};return a.body=s?t:t?JSON.stringify(t):void 0,this.request(e,a)}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}};class As{static async login(e){return _s.post("/auth/login",e)}static async register(e){return _s.post("/auth/register",e)}static async logout(){return _s.post("/auth/logout")}static async refreshToken(){return _s.post("/auth/refresh")}static async getProfile(){return _s.get("/auth/profile")}static isAuthenticated(){var e;try{const t=localStorage.getItem("auth-store");if(t){return(null==(e=JSON.parse(t).state)?void 0:e.isAuthenticated)||!1}}catch{}return!1}static getCurrentUser(){var e;try{const t=localStorage.getItem("auth-store");if(t){return(null==(e=JSON.parse(t).state)?void 0:e.user)||null}}catch{}return null}static getAccessToken(){var e;try{const t=localStorage.getItem("auth-store");if(t){return(null==(e=JSON.parse(t).state)?void 0:e.accessToken)||null}}catch{}return null}}const Ps=()=>{const e=n(),{user:t,isAuthenticated:a,isLoading:r,error:i,setAuth:l,clearAuth:c,setLoading:o,setError:d,updateUser:m}=Ss(),x=s.useCallback(async t=>{try{o(!0),d(null);const s=await As.login(t);if(s.success&&s.data)return l(s.data.user,s.data.accessToken),Qt.success("Login successful!"),e("/dashboard"),!0;throw new Error(s.error||"Login failed")}catch(s){let e="An unexpected error occurred";if(s instanceof Es)if(401===s.status)e="Invalid email or password. Please check your credentials and try again.";else if(403===s.status){const t=s.response;(null==t?void 0:t.requiresVerification)?(null==t?void 0:t.verificationEmailSent)?(e="Please verify your email address. We've sent a new verification email to your inbox.",Qt.success("New verification email sent! Please check your inbox.")):e="Please verify your email address before logging in. Check your inbox for verification instructions.":e="Your account has been disabled. Please contact support for assistance."}else e=429===s.status?"Too many login attempts. Please wait a few minutes and try again.":500===s.status?"Server error occurred. Please try again in a few moments.":s.response.error||"Login failed. Please check your credentials.";else s instanceof Error&&(e=s.message.includes("network")||s.message.includes("fetch")?"Unable to connect to the server. Please check your internet connection.":s.message||"Login failed. Please try again.");return d(e),Qt.error(e),!1}finally{o(!1)}},[l,o,d,e]),u=s.useCallback(async t=>{var s,a,r,i,n,c;try{o(!0),d(null);const i=await As.register(t);if(!i.success)throw new Error(i.error||"Registration failed");if(null==(s=i.data)?void 0:s.requiresVerification)return Qt.success("Account created! Please check your email for verification instructions."),e("/login"),!0;if((null==(a=i.data)?void 0:a.user)&&(null==(r=i.data)?void 0:r.accessToken))return l(i.data.user,i.data.accessToken),Qt.success("Account created successfully!"),e("/dashboard"),!0}catch(m){let e="An unexpected error occurred";return m instanceof Es?e=409===m.status?"An account with this email already exists. Please try logging in instead.":400===m.status?(null==(i=m.response.error)?void 0:i.includes("email"))?"Please provide a valid email address.":(null==(n=m.response.error)?void 0:n.includes("password"))?"Password must be at least 8 characters long.":(null==(c=m.response.error)?void 0:c.includes("name"))?"Please provide your full name.":m.response.error||"Please check your information and try again.":500===m.status?"Server error occurred. Please try again in a few moments.":m.response.error||"Registration failed. Please try again.":m instanceof Error&&(e=m.message.includes("network")||m.message.includes("fetch")?"Unable to connect to the server. Please check your internet connection.":m.message||"Registration failed. Please try again."),d(e),Qt.error(e),!1}finally{o(!1)}},[l,o,d,e]),h=s.useCallback(async()=>{try{o(!0),await As.logout(),c(),Qt.success("Logged out successfully"),e("/")}catch(t){c(),e("/")}finally{o(!1)}},[c,o,e]),p=s.useCallback(async()=>{try{const e=await As.refreshToken();if(e.success&&e.data){const t=Ss.getState().user;return t&&l(t,e.data.accessToken),!0}throw new Error("Token refresh failed")}catch(t){return c(),e("/login"),!1}},[l,c,e]),g=s.useCallback(async()=>{try{o(!0);const e=await As.getProfile();e.success&&e.data?m(e.data.user):c()}catch(e){await p()||c()}finally{o(!1)}},[m,c,p,o]);return{user:t,isAuthenticated:a,isLoading:r,error:i,login:x,register:u,logout:h,refreshToken:p,checkAuthStatus:g,updateUser:m,isOrganizer:"organizer"===(null==t?void 0:t.role)||"admin"===(null==t?void 0:t.role),isAdmin:"admin"===(null==t?void 0:t.role),clearError:()=>d(null)}};function Ds(){const{accessToken:e,isAuthenticated:t}=Ss(),[a,r]=s.useState(null),[i,n]=s.useState(!0),[l,c]=s.useState(null);return s.useEffect(()=>{if(!t||!e)return r(null),void n(!1);(async()=>{try{n(!0);const t=await fetch("/api/users/permissions",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch permissions");const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to fetch permissions");r(s.data),localStorage.setItem("dashboard_has_staff",s.data.hasStaffAssignments?"true":"false"),localStorage.setItem("dashboard_staff_can_cert",s.data.canAccessCertificates?"true":"false")}catch(t){c(t.message),r(null)}finally{n(!1)}})()},[e,t]),{permissions:a,loading:i,error:l}}const Ts=({children:e})=>{const t=l(),[s,a]=i.useState(!1),{user:r,isAuthenticated:n,logout:o}=Ps(),{permissions:d}=Ds(),[m,x]=i.useState(!1);i.useEffect(()=>{const e=localStorage.getItem("dashboard_has_registrations");x("true"===e);const t=()=>{x("true"===localStorage.getItem("dashboard_has_registrations"))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const u=[{name:"Events",href:"/events",icon:y}],h=[{name:"Dashboard",href:"/dashboard",icon:w}],k="organizer"===(null==r?void 0:r.role)||"admin"===(null==r?void 0:r.role)||(null==d?void 0:d.hasStaffAssignments)||(null==d?void 0:d.canScanQR),S="organizer"===(null==r?void 0:r.role)||"admin"===(null==r?void 0:r.role)||(null==d?void 0:d.canAccessCertificates),C=[...h,...m?[{name:"My Registrations",href:"/my-registrations",icon:v}]:[],...k?[{name:"QR Scanner",href:"/scanner",icon:j}]:[],...S?[{name:"Certificates",href:"/certificates",icon:N}]:[]],E=n?[...u,...C]:u,_=["/login","/register"].includes(t.pathname),A="/"===t.pathname;return _?Ve.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):Ve.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ve.jsxs("nav",{className:"bg-white shadow-sm border-b",children:[Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ve.jsxs("div",{className:"flex justify-between h-16",children:[Ve.jsxs("div",{className:"flex",children:[Ve.jsx("div",{className:"flex-shrink-0 flex items-center",children:Ve.jsx("p",{className:"text-2xl font-bold text-primary-600",children:"eveange"})}),Ve.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:E.map(e=>{const s=e.icon,a=t.pathname.startsWith(e.href);return u.includes(e)||n&&!A&&C.includes(e)?Ve.jsxs(c,{to:e.href,className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium "+(a?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[Ve.jsx(s,{className:"w-4 h-4 mr-2"}),e.name]},e.name):null})})]}),Ve.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center space-x-4",children:A||!n?Ve.jsxs("div",{className:"space-x-4",children:[Ve.jsx(c,{to:"/login",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Sign in"}),Ve.jsx(c,{to:"/register",className:"btn btn-primary",children:"Get Started"})]}):Ve.jsxs("div",{className:"flex items-center space-x-4",children:[Ve.jsx(c,{to:"/events/create",className:"btn btn-primary text-sm px-4 py-2",children:"Create Event"}),Ve.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[Ve.jsx(p,{className:"w-4 h-4"}),Ve.jsx("span",{children:null==r?void 0:r.name})]}),Ve.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-gray-100 text-red-600",title:"Sign out",children:Ve.jsx(g,{className:"w-5 h-5"})})]})}),Ve.jsx("div",{className:"sm:hidden flex items-center",children:Ve.jsx("button",{onClick:()=>a(!s),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:s?Ve.jsx(f,{className:"w-6 h-6"}):Ve.jsx(b,{className:"w-6 h-6"})})})]})}),s&&Ve.jsxs("div",{className:"sm:hidden",children:[Ve.jsx("div",{className:"pt-2 pb-3 space-y-1",children:E.map(e=>{const s=e.icon,r=t.pathname.startsWith(e.href);return u.includes(e)||n&&!A&&C.includes(e)?Ve.jsxs(c,{to:e.href,className:"flex items-center px-3 py-2 border-l-4 text-base font-medium "+(r?"bg-primary-50 border-primary-500 text-primary-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800"),onClick:()=>a(!1),children:[Ve.jsx(s,{className:"w-5 h-5 mr-3"}),e.name]},e.name):null})}),A?Ve.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:Ve.jsxs("div",{className:"flex items-center px-4 space-y-2",children:[Ve.jsx(c,{to:"/login",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-gray-900",onClick:()=>a(!1),children:"Sign in"}),Ve.jsx(c,{to:"/register",className:"block btn-primary w-full text-center",onClick:()=>a(!1),children:"Get Started"})]})}):Ve.jsxs("div",{className:"pt-4 pb-3 border-t border-gray-200",children:[Ve.jsx("div",{className:"px-4 mb-3",children:Ve.jsx(c,{to:"/events/create",className:"block btn btn-primary w-full text-center",onClick:()=>a(!1),children:"Create Event"})}),Ve.jsxs("div",{className:"flex items-center px-4 space-x-3",children:[Ve.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:Ve.jsx(p,{className:"w-5 h-5"})}),Ve.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 text-red-600",children:Ve.jsx(g,{className:"w-5 h-5"})})]})]})]})]}),Ve.jsx("main",{className:"flex-1",children:e}),Ve.jsx("footer",{className:"bg-white border-t",children:Ve.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:Ve.jsx("div",{className:"text-center text-gray-500",children:Ve.jsxs("p",{children:["© ",(new Date).getFullYear()," eveange. All rights reserved."]})})})})]})},Rs=({children:e,requireOrganizer:t=!1,requireAdmin:s=!1,allowStaff:a=!1})=>{const{isAuthenticated:r,user:i,isLoading:n}=Ps(),{permissions:c,loading:d}=Ds(),m=l();if(n||a&&d)return Ve.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Ve.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(!r)return Ve.jsx(o,{to:"/login",state:{from:m},replace:!0});if(s&&"admin"!==(null==i?void 0:i.role))return Ve.jsx(o,{to:"/dashboard",replace:!0});if(t){const e=["organizer","admin"].includes((null==i?void 0:i.role)||"");if(a&&!e){if(!((null==c?void 0:c.hasStaffAssignments)||(null==c?void 0:c.canAccessCertificates)||(null==c?void 0:c.canScanQR)))return Ve.jsx(o,{to:"/dashboard",replace:!0})}else if(!e)return Ve.jsx(o,{to:"/dashboard",replace:!0})}return Ve.jsx(Ve.Fragment,{children:e})};"undefined"!=typeof window&&["token","accessToken","authToken"].forEach(e=>{const t=localStorage.getItem(e);t&&(t.includes(".")&&3===t.split(".").length||localStorage.removeItem(e))});const Fs=()=>{const e=[{icon:C,title:"Easy Event Creation",description:"Create and manage events with our intuitive event creation wizard."},{icon:y,title:"Flexible Registration",description:"Build custom registration forms with drag-and-drop form builder."},{icon:j,title:"QR Code Attendance",description:"Track attendance with QR code scanning for seamless check-ins."},{icon:N,title:"Digital Certificates",description:"Generate and distribute certificates automatically to attendees."}];return Ve.jsxs("div",{children:[Ve.jsx("section",{className:"bg-gradient-to-br from-primary-600 to-primary-800 text-white",children:Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Manage Events Like a Pro"}),Ve.jsx("p",{className:"text-xl md:text-2xl mb-8 text-primary-100 max-w-3xl mx-auto",children:"Complete event management platform with registration, attendance tracking, and certificate generation - all in one place."}),Ve.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Ve.jsxs(c,{to:"/events",className:"bg-white text-primary-600 hover:bg-gray-100 font-semibold py-3 px-8 rounded-lg transition-colors inline-flex items-center justify-center",children:["Browse Events",Ve.jsx(k,{className:"w-5 h-5 ml-2"})]}),Ve.jsx(c,{to:"/register",className:"border border-white text-white hover:bg-white hover:text-primary-600 font-semibold py-3 px-8 rounded-lg transition-colors inline-flex items-center justify-center",children:"Get Started Free"})]})]})})}),Ve.jsx("section",{className:"py-20 bg-white",children:Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ve.jsxs("div",{className:"text-center mb-16",children:[Ve.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Everything you need to manage events"}),Ve.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"From creation to certification, we've got every aspect of event management covered."})]}),Ve.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((e,t)=>{const s=e.icon;return Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"bg-primary-100 w-16 h-16 rounded-lg flex items-center justify-center mx-auto mb-4",children:Ve.jsx(s,{className:"w-8 h-8 text-primary-600"})}),Ve.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),Ve.jsx("p",{className:"text-gray-600",children:e.description})]},t)})})]})}),Ve.jsx("section",{className:"py-20 bg-gray-50",children:Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ve.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[Ve.jsxs("div",{children:[Ve.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Why choose eveange?"}),Ve.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Our platform is designed to streamline every aspect of event management, from initial planning to post-event certificate distribution."}),Ve.jsx("div",{className:"space-y-4",children:["Create unlimited events","Custom registration forms","Real-time attendance tracking","Automated certificate generation","Payment integration","Analytics dashboard"].map((e,t)=>Ve.jsxs("div",{className:"flex items-start",children:[Ve.jsx(S,{className:"w-6 h-6 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),Ve.jsx("span",{className:"text-gray-700",children:e})]},t))})]}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[Ve.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ready to get started?"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:"Join thousands of event organizers who trust eventbase to manage their events."}),Ve.jsx(c,{to:"/register",className:"btn btn-primary w-full text-center block",children:"Start Your Free Trial"})]})]})})}),Ve.jsx("section",{className:"bg-primary-600 text-white py-20",children:Ve.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[Ve.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to revolutionize your event management?"}),Ve.jsx("p",{className:"text-xl mb-8 text-primary-100",children:"Start managing your events professionally with our comprehensive platform."}),Ve.jsxs(c,{to:"/register",className:"bg-white text-primary-600 hover:bg-gray-100 font-semibold py-3 px-8 rounded-lg transition-colors inline-flex items-center",children:["Get Started Now",Ve.jsx(k,{className:"w-5 h-5 ml-2"})]})]})})]})};var Is=function(e,t){for(var s={};e.length;){var a=e[0],r=a.code,i=a.message,n=a.path.join(".");if(!s[n])if("unionErrors"in a){var l=a.unionErrors[0].errors[0];s[n]={message:l.message,type:l.code}}else s[n]={message:i,type:r};if("unionErrors"in a&&a.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var c=s[n].types,o=c&&c[a.code];s[n]=ve(n,t,s,r,o?[].concat(o,a.message):a.message)}e.shift()}return s},Ls=function(e,t,s){return void 0===s&&(s={}),function(a,r,i){try{return Promise.resolve(function(r,n){try{var l=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](a,t)).then(function(e){return i.shouldUseNativeValidation&&be({},i),{errors:{},values:s.raw?a:e}})}catch(Nt){return n(Nt)}return l&&l.then?l.then(void 0,n):l}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:ye(Is(e.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};var t;throw e}))}catch(Nt){return Promise.reject(Nt)}}};const zs=je({email:Ne().email("Invalid email address"),password:Ne().min(1,"Password is required")}),$s=()=>{const{login:e,isLoading:t,error:s,isAuthenticated:a}=Ps(),{register:r,handleSubmit:i,formState:{errors:n,isSubmitting:l}}=we({resolver:Ls(zs)});if(a)return Ve.jsx(o,{to:"/dashboard",replace:!0});return Ve.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Ve.jsxs("div",{className:"max-w-md w-full space-y-8",children:[Ve.jsxs("div",{children:[Ve.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),Ve.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",Ve.jsx(c,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"create a new account"})]})]}),s&&Ve.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:s}),Ve.jsxs("form",{className:"mt-8 space-y-6",onSubmit:i(async t=>{await e(t)}),children:[Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),Ve.jsx("input",{...r("email"),type:"email",className:"input",placeholder:"Enter your email"}),n.email&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),Ve.jsx("input",{...r("password"),type:"password",className:"input",placeholder:"Enter your password"}),n.password&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password.message})]})]}),Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),Ve.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),Ve.jsx("div",{className:"text-sm",children:Ve.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),Ve.jsx("div",{children:Ve.jsx("button",{type:"submit",disabled:l||t,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:l||t?"Signing in...":"Sign in"})})]})]})})},Os=je({name:Ne().min(1,"Name is required"),email:Ne().email("Invalid email address"),password:Ne().min(8,"Password must be at least 8 characters"),confirmPassword:Ne().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Ms=()=>{const{register:e,isLoading:t,error:s,isAuthenticated:a}=Ps(),{register:r,handleSubmit:i,formState:{errors:n,isSubmitting:l}}=we({resolver:Ls(Os)});if(a)return Ve.jsx(o,{to:"/dashboard",replace:!0});return Ve.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Ve.jsxs("div",{className:"max-w-md w-full space-y-8",children:[Ve.jsxs("div",{children:[Ve.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),Ve.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",Ve.jsx(c,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})]}),s&&Ve.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:s}),Ve.jsxs("form",{className:"mt-8 space-y-6",onSubmit:i(async t=>{const{confirmPassword:s,...a}=t,r={...a,role:"participant"};await e(r)}),children:[Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),Ve.jsx("input",{...r("name"),type:"text",autoComplete:"name",className:"input",placeholder:"Enter your full name"}),n.name&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.name.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),Ve.jsx("input",{...r("email"),type:"email",autoComplete:"email",className:"input",placeholder:"Enter your email"}),n.email&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),Ve.jsx("input",{...r("password"),type:"password",autoComplete:"new-password",className:"input",placeholder:"Create a password (min. 8 characters)"}),n.password&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),Ve.jsx("input",{...r("confirmPassword"),type:"password",autoComplete:"new-password",className:"input",placeholder:"Confirm your password"}),n.confirmPassword&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.confirmPassword.message})]})]}),Ve.jsx("div",{children:Ve.jsx("button",{type:"submit",disabled:l||t,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:l||t?"Creating Account...":"Create Account"})})]})]})})},Us={createEvent:async e=>_s.post("/events",e),async getEvents(e){const t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.visibility)&&t.append("visibility",e.visibility),(null==e?void 0:e.categoryId)&&t.append("categoryId",e.categoryId),(null==e?void 0:e.organizerId)&&t.append("organizerId",e.organizerId),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.upcoming)&&t.append("upcoming",e.upcoming.toString()),(null==e?void 0:e.free)&&t.append("free",e.free.toString()),(null==e?void 0:e.week)&&t.append("week",e.week.toString());const s=t.toString()?`/events?${t.toString()}`:"/events";return _s.get(s)},getEventById:async e=>_s.get(`/events/${e}`),updateEvent:async(e,t)=>_s.put(`/events/${e}`,t),deleteEvent:async e=>_s.delete(`/events/${e}`),getMyEvents:async()=>_s.get("/events/my/events")},qs={getAssignedEvents:async()=>_s.get("/staff/assigned-events")},Bs={registerForEvent:async(e,t)=>_s.post(`/registrations/events/${e}/register`,t),getEventRegistrations:async e=>_s.get(`/registrations/events/${e}/registrations`),checkRegistrationStatus:async e=>_s.get(`/registrations/events/${e}/registration-status`),getUserRegistrations:async()=>_s.get("/registrations/my-registrations"),cancelRegistration:async e=>_s.put(`/registrations/${e}/cancel`)},Gs=()=>{const{accessToken:e,isAuthenticated:t,clearAuth:a}=Ss(),r=n(),[i,l]=s.useState([]),[o,d]=s.useState([]),[m,x]=s.useState([]),[u,h]=s.useState(!0);s.useEffect(()=>{(async()=>{var s,i,n,c;try{if(h(!0),!t||!e)return a(),void r("/login");const[m,u]=await Promise.all([Us.getMyEvents(),Bs.getUserRegistrations()]),p=(null==(s=m.data)?void 0:s.events)||[];l(p),localStorage.setItem("dashboard_has_organized",(p.length>0).toString()),d((null==(i=u.data)?void 0:i.registrations)||[]);const g=(null==(n=u.data)?void 0:n.registrations)||[];localStorage.setItem("dashboard_has_registrations",(g.length>0).toString());try{const e=await qs.getAssignedEvents();let t=[],s=!1;Array.isArray(null==(c=e.data)?void 0:c.events)?t=e.data.events:Array.isArray(e.events)&&(t=e.events),s=t.some(e=>{var t,s;return(null==(t=e.permissions)?void 0:t.can_view_stats)||(null==(s=e.permissions)?void 0:s.can_create_certificate)}),x(t),localStorage.setItem("dashboard_has_staff",(t.length>0).toString()),localStorage.setItem("dashboard_staff_can_cert",s.toString())}catch(o){x([]),localStorage.setItem("dashboard_has_staff","false"),localStorage.setItem("dashboard_staff_can_cert","false")}}finally{h(!1)}})()},[t,e]);const p=i.length,g=m.length,f=o.length;return Ve.jsxs("div",{className:"container mx-auto py-8 px-4",children:[Ve.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[Ve.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 text-center",children:[Ve.jsx("div",{className:"text-3xl font-bold text-purple-700",children:u?"...":p}),Ve.jsx("div",{className:"text-gray-500 mt-2",children:"Events Organized"})]}),Ve.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 text-center",children:[Ve.jsx("div",{className:"text-3xl font-bold text-blue-700",children:u?"...":g}),Ve.jsx("div",{className:"text-gray-500 mt-2",children:"Staff Assignments"})]}),Ve.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 text-center",children:[Ve.jsx("div",{className:"text-3xl font-bold text-green-700",children:u?"...":f}),Ve.jsx("div",{className:"text-gray-500 mt-2",children:"Events Participated"})]})]}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Ve.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[Ve.jsx("h2",{className:"font-semibold text-lg mb-4 text-purple-700",children:"Organizer For"}),u?Ve.jsx("div",{children:"Loading..."}):Ve.jsxs("ul",{className:"space-y-2",children:[0===i.length&&Ve.jsx("li",{className:"text-gray-400 text-sm",children:"No events organized."}),i.map(e=>Ve.jsx(c,{to:`/events/${e.id}`,className:"font-medium text-purple-600 hover:underline",children:Ve.jsxs("li",{className:"flex flex-col bg-purple-50 rounded-xl p-2 mb-2",children:[e.title,Ve.jsxs("span",{className:"text-xs text-gray-500",children:[e.location," ·"," ",new Date(e.start_date).toLocaleDateString()]})]},e.id)}))]})]}),Ve.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[Ve.jsx("h2",{className:"font-semibold text-lg mb-4 text-blue-700",children:"Staff For"}),u?Ve.jsx("div",{children:"Loading..."}):0===m.length?Ve.jsx("ul",{className:"space-y-2",children:Ve.jsx("li",{className:"text-gray-400 text-sm",children:"No staff assignments."})}):Ve.jsx("ul",{className:"space-y-2",children:m.map(e=>Ve.jsx(c,{to:`/events/${e.id}/check-in`,className:"font-medium text-primary-600 hover:underline",children:Ve.jsxs("li",{className:"flex flex-col bg-blue-50 rounded-xl mb-2 p-2",children:[e.title,Ve.jsxs("span",{className:"text-xs text-gray-500",children:[e.location," ·"," ",new Date(e.start_date).toLocaleDateString()]})]},e.id)}))})]}),Ve.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[Ve.jsx("h2",{className:"font-semibold text-lg mb-4 text-green-700",children:"Participating In"}),u?Ve.jsx("div",{children:"Loading..."}):Ve.jsxs("ul",{className:"space-y-2",children:[0===o.length&&Ve.jsx("li",{className:"text-gray-400 text-sm",children:"No event registrations."}),o.map(e=>e.event&&Ve.jsx(c,{to:`/events/${e.event.id}`,className:"font-medium text-green-600 hover:underline",children:Ve.jsxs("li",{className:"flex flex-col bg-green-50 p-2 mb-2 rounded-xl",children:[e.event.title,Ve.jsxs("span",{className:"text-xs text-gray-500",children:[e.event.location," ·"," ",new Date(e.event.start_date).toLocaleDateString()]})]},e.id)}))]})]})]})]})};class Vs{static async upgradeToOrganizer(e){return _s.post("/users/upgrade-to-organizer",e)}static async getProfile(){return _s.get("/users/profile")}}const Ys=({value:e,onChange:t,placeholder:a="Search for a location...",className:r=""})=>{const[i,n]=s.useState((null==e?void 0:e.address)||""),[l,c]=s.useState([]),[o,d]=s.useState(!1),[m,x]=s.useState(!1),[u,h]=s.useState(e||null),[p,g]=s.useState(null),[b,y]=s.useState(""),v=s.useRef(),j=s.useRef(null),N=s.useRef(null);s.useEffect(()=>{(null==e?void 0:e.address)!==i&&(n((null==e?void 0:e.address)||""),h(e||null))},[e]);return s.useEffect(()=>{const e=e=>{const t=e.target;j.current&&!j.current.contains(t)&&N.current&&!N.current.contains(t)&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),s.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),Ve.jsxs("div",{className:`relative ${r}`,children:[Ve.jsxs("div",{className:"relative",children:[Ve.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ve.jsx(E,{className:"h-4 w-4 text-gray-400"})}),Ve.jsx("input",{ref:j,type:"text",value:i,onChange:e=>{const t=e.target.value;n(t),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{(async e=>{var t,s;if(!e.trim()||e.length<3)c([]);else{d(!0),g(null);try{const a=await fetch(`https://your-backend-domain.com/api/maps/search?query=${encodeURIComponent(e)}&region=IND`);if(!a.ok){const e=await a.json().catch(()=>({}));return void(500===a.status&&(null==(t=e.error)?void 0:t.includes("API key"))?g("Location API not properly configured on server. Please contact administrator."):g("Failed to search locations. Please try again."))}const r=await a.json();r.success&&(null==(s=r.data)?void 0:s.results)&&Array.isArray(r.data.results)?(y(r.provider||"unknown"),c(r.data.results.slice(0,5)),x(!0)):c([])}catch(a){g("Network error. Please check your connection."),c([])}finally{d(!1)}}})(t)},300)},placeholder:a,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onFocus:()=>{l.length>0&&x(!0)}}),i&&Ve.jsx("button",{type:"button",onClick:()=>{h(null),n(""),c([]),x(!1),g(null),t({address:"",latitude:0,longitude:0})},className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-gray-600",children:Ve.jsx(f,{className:"h-4 w-4 text-gray-400"})}),o&&Ve.jsx("div",{className:"absolute inset-y-0 right-8 flex items-center",children:Ve.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})})]}),p&&Ve.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:p}),u&&u.address&&Ve.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:Ve.jsxs("div",{className:"flex items-start space-x-2",children:[Ve.jsx(E,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),Ve.jsxs("div",{className:"flex-1",children:[Ve.jsx("p",{className:"text-sm font-medium text-green-800",children:"Selected Location:"}),Ve.jsx("p",{className:"text-sm text-green-700",children:u.address}),Ve.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Coordinates: ",u.latitude.toFixed(6),","," ",u.longitude.toFixed(6)]})]})]})}),m&&l.length>0&&Ve.jsxs("div",{ref:N,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[b&&Ve.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:Ve.jsxs("p",{className:"text-xs text-gray-500",children:["Results from"," ","olamaps"===b?"Ola Maps 🚗 ✅":"mapmyindia"===b?"MapMyIndia 🇮🇳":"Unknown Provider","olamaps"===b&&" • 500K free/month • Verified"]})}),l.map((e,s)=>Ve.jsx("button",{type:"button",onMouseDown:s=>{s.preventDefault(),s.stopPropagation(),(e=>{var s,a,r,i;const l={address:e.formatted_address||e.name,latitude:(null==(a=null==(s=e.geometry)?void 0:s.location)?void 0:a.lat)||0,longitude:(null==(i=null==(r=e.geometry)?void 0:r.location)?void 0:i.lng)||0,placeId:e.place_id};n(l.address),h(l),setTimeout(()=>{x(!1),c([])},10),g(null),t(l)})(e)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0",children:Ve.jsxs("div",{className:"flex items-start space-x-2",children:[Ve.jsx(E,{className:"h-4 w-4 text-gray-400 mt-0.5 flex-shrink-0"}),Ve.jsxs("div",{className:"flex-1 min-w-0",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),Ve.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.formatted_address})]})]})},e.place_id||s))]}),m&&0===l.length&&i.length>=3&&!o&&!p&&Ve.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4",children:Ve.jsxs("div",{className:"text-center text-gray-500",children:[Ve.jsx(_,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),Ve.jsxs("p",{className:"text-sm",children:['No locations found for "',i,'"']}),Ve.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try a different search term"})]})})]})},Qs=je({organizationName:Ne().min(1,"Organization name is required"),phoneNumber:Ne().optional(),description:Ne().optional()}),Ws=({isOpen:e,onClose:t,onSuccess:a})=>{const[r,i]=s.useState(!1),{updateUser:n}=Ps(),{register:l,handleSubmit:c,formState:{errors:o},reset:d}=we({resolver:Ls(Qs)}),m=()=>{r||(d(),t())};return e?Ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Ve.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[Ve.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Become an Event Organizer"}),Ve.jsx("button",{onClick:m,disabled:r,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:Ve.jsx(f,{className:"h-6 w-6"})})]}),Ve.jsxs("div",{className:"p-6",children:[Ve.jsx("p",{className:"text-gray-600 mb-6",children:"To create events, you need to upgrade your account to an organizer. Please provide some additional information about your organization."}),Ve.jsxs("form",{onSubmit:c(async e=>{try{i(!0);const t={organizationName:e.organizationName,phoneNumber:e.phoneNumber||void 0},s=await Vs.upgradeToOrganizer(t);if(!s.success||!s.data)throw new Error(s.error||"Failed to upgrade to organizer");{const e=s.data.user,t=e,r={...e,organizationName:e.organizationName||t.organization_name||"",phoneNumber:e.phoneNumber||t.phone_number||""};n(r),Qt.success("Successfully upgraded to organizer!"),d(),a()}}catch(t){Qt.error(t instanceof Error?t.message:"Failed to upgrade to organizer. Please try again.")}finally{i(!1)}}),className:"space-y-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name *"}),Ve.jsx("input",{...l("organizationName"),type:"text",id:"organizationName",className:"input",placeholder:"Enter your organization name",disabled:r}),o.organizationName&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.organizationName.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number (Optional)"}),Ve.jsx("input",{...l("phoneNumber"),type:"tel",id:"phoneNumber",className:"input",placeholder:"Enter your phone number",disabled:r}),o.phoneNumber&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.phoneNumber.message})]}),Ve.jsxs("div",{className:"flex gap-3 pt-4",children:[Ve.jsx("button",{type:"button",onClick:m,disabled:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),Ve.jsx("button",{type:"submit",disabled:r,className:"flex-1 btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Upgrading...":"Upgrade Account"})]})]})]})]})}):null},Hs=je({title:Ne().min(1,"Title is required"),description:Ne().min(1,"Description is required"),startDate:Ne().min(1,"Start date is required"),endDate:Ne().min(1,"End date is required"),location:Ne().min(1,"Location is required"),latitude:ke().optional(),longitude:ke().optional(),capacity:ke().min(1,"Capacity must be at least 1"),bannerUrl:Ne().url("Must be a valid URL").optional().or(Se("")),visibility:Ce(["public","private","invite-only"]),registrationDeadline:Ne().optional(),isPaid:Ee(),price:ke().min(0,"Price must be 0 or greater").optional()}),Xs=()=>{const e=n(),{user:t,updateUser:a}=Ps(),r=!(null==t?void 0:t.organizationName)||!(null==t?void 0:t.phoneNumber),[i,l]=s.useState(!1),[c,o]=s.useState(null),[d,m]=s.useState(!1),[x,u]=s.useState(void 0);s.useEffect(()=>{m(!(!t||!r))},[t,r]);const{register:h,handleSubmit:p,watch:g,setValue:f,formState:{errors:b}}=we({resolver:Ls(Hs),defaultValues:{visibility:"public",isPaid:!1,capacity:50}}),y=g("isPaid");return Ve.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ve.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Event"}),Ve.jsx("button",{type:"button",onClick:()=>e(-1),className:"text-gray-600 hover:text-gray-900",children:"← Back"})]}),!d&&!r&&Ve.jsxs(Ve.Fragment,{children:[c&&Ve.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),Ve.jsxs("form",{onSubmit:p(async t=>{try{l(!0),o(null);const s=new Date(t.startDate);if(new Date(t.endDate)<=s)return void o("End date must be after start date");if(t.registrationDeadline){if(new Date(t.registrationDeadline)>=s)return void o("Registration deadline must be before the event start date")}const a={title:t.title,description:t.description,startDate:t.startDate,endDate:t.endDate,location:t.location,latitude:t.latitude,longitude:t.longitude,capacity:t.capacity,bannerUrl:t.bannerUrl||void 0,visibility:t.visibility,registrationDeadline:t.registrationDeadline||void 0,isPaid:t.isPaid,price:t.isPaid?t.price:void 0},r=await Us.createEvent(a);r.success&&r.data?e(`/events/${r.data.event.id}`):o(r.error||"Failed to create event")}catch(s){o("Failed to create event. Please try again.")}finally{l(!1)}}),className:"card space-y-6",children:[Ve.jsxs("div",{className:"form-section",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Information"}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"title",className:"form-label",children:"Event Title *"}),Ve.jsx("input",{...h("title"),type:"text",id:"title",className:"input "+(b.title?"border-red-500":""),placeholder:"Enter event title"}),b.title&&Ve.jsx("p",{className:"form-error",children:b.title.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"description",className:"form-label",children:"Description *"}),Ve.jsx("textarea",{...h("description"),id:"description",rows:4,className:"input "+(b.description?"border-red-500":""),placeholder:"Describe your event"}),b.description&&Ve.jsx("p",{className:"form-error",children:b.description.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"location",className:"form-label",children:"Event Location *"}),Ve.jsx(Ys,{value:x,onChange:e=>{u(e),f("location",e.address),f("latitude",e.latitude),f("longitude",e.longitude)},placeholder:"Search for event location...",className:"mt-1"}),b.location&&Ve.jsx("p",{className:"form-error",children:b.location.message}),Ve.jsx("input",{type:"hidden",...h("location")}),Ve.jsx("input",{type:"hidden",...h("latitude",{valueAsNumber:!0})}),Ve.jsx("input",{type:"hidden",...h("longitude",{valueAsNumber:!0})})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"bannerUrl",className:"form-label",children:"Banner Image URL"}),Ve.jsx("input",{...h("bannerUrl"),type:"url",id:"bannerUrl",className:"input "+(b.bannerUrl?"border-red-500":""),placeholder:"https://example.com/banner.jpg"}),b.bannerUrl&&Ve.jsx("p",{className:"form-error",children:b.bannerUrl.message})]})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Date & Time"}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date & Time *"}),Ve.jsx("input",{...h("startDate"),type:"datetime-local",id:"startDate",className:"input "+(b.startDate?"border-red-500":"")}),b.startDate&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.startDate.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date & Time *"}),Ve.jsx("input",{...h("endDate"),type:"datetime-local",id:"endDate",className:"input "+(b.endDate?"border-red-500":"")}),b.endDate&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.endDate.message})]})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"registrationDeadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Deadline"}),Ve.jsx("input",{...h("registrationDeadline"),type:"datetime-local",id:"registrationDeadline",className:"input"}),Ve.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional: Set a deadline for registrations"})]})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Event Settings"}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Capacity *"}),Ve.jsx("input",{...h("capacity",{valueAsNumber:!0}),type:"number",id:"capacity",min:"1",className:"input "+(b.capacity?"border-red-500":"")}),b.capacity&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.capacity.message})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"visibility",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Visibility *"}),Ve.jsxs("select",{...h("visibility"),id:"visibility",className:"input",children:[Ve.jsx("option",{value:"public",children:"Public"}),Ve.jsx("option",{value:"private",children:"Private"}),Ve.jsx("option",{value:"invite-only",children:"Invite Only"})]})]})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("input",{...h("isPaid"),type:"checkbox",id:"isPaid",className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),Ve.jsx("label",{htmlFor:"isPaid",className:"ml-2 text-sm font-medium text-gray-700",children:"This is a paid event"})]}),y&&Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ticket Price *"}),Ve.jsxs("div",{className:"relative",children:[Ve.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),Ve.jsx("input",{...h("price",{valueAsNumber:!0}),type:"number",id:"price",min:"0",step:"0.5",className:"input pl-8 "+(b.price?"border-red-500":""),placeholder:"0.00"})]}),b.price&&Ve.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.price.message})]})]})]}),Ve.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[Ve.jsx("button",{type:"button",onClick:()=>e(-1),className:"btn btn-secondary",disabled:i,children:"Cancel"}),Ve.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Event"})]})]})]}),Ve.jsx(Ws,{isOpen:d,onClose:()=>m(!1),onSuccess:async()=>{try{const e=await Vs.getProfile();e.success&&e.data&&a(e.data.user)}catch(e){}finally{m(!1)}}})]})};function Js({eventId:e}){const{accessToken:t}=Ss(),[a,r]=s.useState([]),[i,n]=s.useState(!0),[l,c]=s.useState(null),[o,d]=s.useState(!1),[m,x]=s.useState(!1),[u,h]=s.useState(!1),[p,g]=s.useState(null),[f,b]=s.useState({email:"",name:"",permissions:{can_check_in:!0,can_view_stats:!0,can_create_certificate:!1}});s.useEffect(()=>{y(),v()},[e]),s.useEffect(()=>{const e=e=>{p&&!e.target.closest(".relative")&&g(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[p]);const y=async()=>{try{c(null);const s=await fetch(`/api/checkin/events/${e}/staff`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const e=await s.json();r(Array.isArray(e.staff)?e.staff:[])}else r([]),403===s.status?c("You don't have permission to view staff for this event. Only event organizers and administrators can access staff management."):404===s.status?c("Event not found. Please check if the event still exists and refresh the page."):401===s.status?c("Your session has expired. Please log in again to view staff information."):c("Unable to load staff information. Please try refreshing the page.")}catch(s){r([]),c("Unable to connect to the server. Please check your internet connection and try again.")}finally{n(!1)}},v=async()=>{try{h(!0);const e=await fetch("/api/email/status",{headers:{Authorization:`Bearer ${t}`}});if(e.ok){const t=await e.json();x(t.hasGmailPermission)}}catch(e){}finally{h(!1)}},j=async s=>{if(confirm("Are you sure you want to remove this staff member?"))try{const a=await fetch(`/api/checkin/events/${e}/staff/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(a.ok)await y(),alert("Staff member removed successfully");else{const e=await a.json();let t="Failed to remove staff member";t=403===a.status?"You don't have permission to remove staff members from this event. Only event organizers and administrators can manage staff.":404===a.status?"Staff member not found. They may have already been removed or the event information is outdated.":400===a.status?"Cannot remove this staff member. They may be currently checked in or have active sessions.":e.error||"An unexpected error occurred while removing the staff member.",alert(t)}}catch(a){alert("Unable to connect to the server. Please check your internet connection and try again.")}};return i?Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"animate-pulse",children:[Ve.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),Ve.jsxs("div",{className:"space-y-3",children:[Ve.jsx("div",{className:"h-4 bg-gray-200 rounded"}),Ve.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})}):Ve.jsxs("div",{className:"bg-white rounded-lg shadow",children:[Ve.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{children:[Ve.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Event Staff Management"}),Ve.jsx("p",{className:"text-sm text-gray-600",children:"Manage staff access for check-in and event management"})]}),Ve.jsxs("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[Ve.jsx(A,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Add Staff"})]})]})}),!m&&Ve.jsx("div",{className:"px-6 py-4 bg-amber-50 border-b border-amber-200",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx(P,{className:"h-5 w-5 text-amber-600"}),Ve.jsxs("div",{children:[Ve.jsx("h4",{className:"text-sm font-medium text-amber-800",children:"Gmail Permission Required"}),Ve.jsx("p",{className:"text-sm text-amber-700",children:"Grant Gmail access to automatically send staff credentials from your email account"})]})]}),Ve.jsx("button",{onClick:async()=>{try{const e=await fetch("/api/email/authorize",{headers:{Authorization:`Bearer ${t}`}});if(e.ok){const t=await e.json();window.location.href=t.authUrl}}catch(e){}},disabled:u,className:"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 disabled:opacity-50",children:u?"Checking...":"Grant Permission"})]})}),m&&Ve.jsx("div",{className:"px-6 py-3 bg-green-50 border-b border-green-200",children:Ve.jsxs("div",{className:"flex items-center space-x-2",children:[Ve.jsx(P,{className:"h-4 w-4 text-green-600"}),Ve.jsx("span",{className:"text-sm text-green-800",children:"✓ Gmail permission granted - Staff emails will be sent from your account"})]})}),o&&Ve.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:Ve.jsxs("form",{onSubmit:async s=>{var a,r,i;s.preventDefault();try{const s=[];f.permissions.can_check_in&&s.push("check-in"),f.permissions.can_view_stats&&s.push("view-stats"),f.permissions.can_create_certificate&&s.push("create-certificate");const n={email:f.email,name:f.name,permissions:s},l=await fetch(`/api/checkin/events/${e}/staff`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(n)});if(l.ok)await y(),b({email:"",name:"",permissions:{can_check_in:!0,can_view_stats:!0,can_create_certificate:!1}}),d(!1),alert("Staff member added successfully! Login credentials will be sent via email.");else{const e=await l.json();let t="Failed to add staff member";t=400===l.status?(null==(a=e.error)?void 0:a.includes("already exists"))||(null==(r=e.error)?void 0:r.includes("duplicate"))?"This person is already a staff member for this event.":(null==(i=e.error)?void 0:i.includes("validation"))||e.details?"Please check that the email address and name are valid and try again.":e.error||"Invalid staff information provided.":403===l.status?"You don't have permission to add staff members to this event. Only event organizers and administrators can manage staff.":404===l.status?"Event not found. Please refresh the page and try again.":500===l.status?"Server error occurred while adding staff member. Please try again in a few moments.":e.error||"An unexpected error occurred while adding the staff member.",alert(t)}}catch(n){alert("Unable to connect to the server. Please check your internet connection and try again.")}},className:"space-y-4",children:[Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),Ve.jsx("input",{type:"email",required:!0,value:f.email,onChange:e=>b({...f,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"staff@example.com"})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),Ve.jsx("input",{type:"text",required:!0,value:f.name,onChange:e=>b({...f,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"})]})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),Ve.jsxs("div",{className:"space-y-2",children:[Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"checkbox",checked:f.permissions.can_check_in,onChange:e=>b({...f,permissions:{...f.permissions,can_check_in:e.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),Ve.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Can check-in participants"})]}),Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"checkbox",checked:f.permissions.can_view_stats,onChange:e=>b({...f,permissions:{...f.permissions,can_view_stats:e.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),Ve.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Can view check-in statistics"})]}),Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"checkbox",checked:f.permissions.can_create_certificate,onChange:e=>b({...f,permissions:{...f.permissions,can_create_certificate:e.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),Ve.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Can manage certificates"})]})]})]}),Ve.jsxs("div",{className:"flex space-x-3",children:[Ve.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Staff Member"}),Ve.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]})}),Ve.jsx("div",{className:"divide-y divide-gray-200",children:i?Ve.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:Ve.jsx("p",{children:"Loading staff..."})}):l?Ve.jsxs("div",{className:"px-6 py-8 text-center",children:[Ve.jsxs("div",{className:"text-red-600 mb-4",children:[Ve.jsx(D,{className:"h-12 w-12 text-red-300 mx-auto mb-4"}),Ve.jsx("p",{className:"font-medium",children:l})]}),Ve.jsx("button",{onClick:()=>{c(null),y()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Try Again"})]}):0===a.length?Ve.jsxs("div",{className:"px-6 py-8 text-center text-gray-500",children:[Ve.jsx(D,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ve.jsx("p",{children:"No staff members assigned to this event."}),Ve.jsx("p",{className:"text-sm",children:"Add staff members to help with check-in and event management."})]}):a.map(t=>{var s,a,r,i,n,l,c;return Ve.jsx("div",{className:"px-6 py-4",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsx("div",{className:"flex-1",children:Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx("div",{className:"flex-shrink-0",children:Ve.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:Ve.jsx("span",{className:"text-blue-600 font-medium text-sm",children:(null==(a=null==(s=t.user)?void 0:s.name)?void 0:a.charAt(0).toUpperCase())||"?"})})}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-900",children:(null==(r=t.user)?void 0:r.name)||"Unknown User"}),Ve.jsx("p",{className:"text-sm text-gray-600",children:(null==(i=t.user)?void 0:i.email)||"No email"}),Ve.jsxs("p",{className:"text-xs text-gray-500",children:["Added"," ",new Date(t.assigned_at).toLocaleDateString()," by"," ",(null==(n=t.assigned_by_user)?void 0:n.name)||"Unknown"]})]})]})}),Ve.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[Ve.jsxs("div",{className:"flex space-x-2",children:[t.permissions.can_check_in&&Ve.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Check-in"}),t.permissions.can_view_stats&&Ve.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Ve.jsx(T,{className:"h-3 w-3 mr-1"}),"Stats"]}),t.permissions.can_create_certificate?Ve.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Certificates"}):null]}),Ve.jsx("div",{className:"text-xs text-gray-500",children:(null==(l=t.user)?void 0:l.last_login_at)?Ve.jsxs(Ve.Fragment,{children:["Last login:"," ",new Date(t.user.last_login_at).toLocaleDateString()]}):"Never logged in"}),Ve.jsxs("div",{className:"flex space-x-2",children:[Ve.jsx("button",{onClick:()=>{var s,a;const r=encodeURIComponent(`Event Staff Access - ${e}`),i=encodeURIComponent(`Hi ${(null==(s=t.user)?void 0:s.name)||"Staff Member"},\n\nYou have been granted staff access for this event. Please check your email for login credentials.\n\nBest regards`);window.open(`mailto:${(null==(a=t.user)?void 0:a.email)||""}?subject=${r}&body=${i}`)},className:"text-blue-600 hover:text-blue-700",title:"Send email",children:Ve.jsx(P,{className:"h-4 w-4"})}),Ve.jsx("button",{onClick:()=>{var e;return j((null==(e=t.user)?void 0:e.id)||t.id)},className:"text-red-600 hover:text-red-700",title:"Remove staff",children:Ve.jsx(R,{className:"h-4 w-4"})})]})]}),Ve.jsxs("div",{className:"md:hidden relative",children:[Ve.jsx("button",{onClick:()=>g(p===t.id?null:t.id),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:Ve.jsx(F,{className:"h-4 w-4"})}),p===t.id&&Ve.jsx("div",{className:"absolute right-0 top-full mt-1 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:Ve.jsxs("div",{className:"p-3 space-y-3",children:[Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Permissions:"}),Ve.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.permissions.can_check_in&&Ve.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Check-in"}),t.permissions.can_view_stats&&Ve.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Ve.jsx(T,{className:"h-3 w-3 mr-1"}),"Stats"]}),t.permissions.can_create_certificate?Ve.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Certificates"}):null]})]}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Last Login:"}),Ve.jsx("p",{className:"text-xs text-gray-500",children:(null==(c=t.user)?void 0:c.last_login_at)?new Date(t.user.last_login_at).toLocaleDateString():"Never logged in"})]}),Ve.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-gray-100",children:[Ve.jsxs("button",{onClick:()=>{var s,a;const r=encodeURIComponent(`Event Staff Access - ${e}`),i=encodeURIComponent(`Hi ${(null==(s=t.user)?void 0:s.name)||"Staff Member"},\n\nYou have been granted staff access for this event. Please check your email for login credentials.\n\nBest regards`);window.open(`mailto:${(null==(a=t.user)?void 0:a.email)||""}?subject=${r}&body=${i}`),g(null)},className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md",children:[Ve.jsx(P,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Email"})]}),Ve.jsxs("button",{onClick:()=>{var e;j((null==(e=t.user)?void 0:e.id)||t.id),g(null)},className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md",children:[Ve.jsx(R,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Remove"})]})]})]})})]})]})},t.id)})}),Ve.jsx("div",{className:"px-6 py-4 bg-blue-50 border-t border-blue-200",children:Ve.jsxs("div",{className:"flex items-start space-x-3",children:[Ve.jsx(D,{className:"h-5 w-5 text-blue-600 mt-0.5"}),Ve.jsxs("div",{className:"text-sm text-blue-800",children:[Ve.jsx("p",{className:"font-medium mb-1",children:"Staff Access Information:"}),Ve.jsxs("ul",{className:"space-y-1",children:[Ve.jsx("li",{children:"• Staff members receive login credentials via email"}),Ve.jsx("li",{children:"• They can access the check-in system with their assigned permissions"}),Ve.jsx("li",{children:"• Staff accounts are created automatically if they don't exist"}),Ve.jsx("li",{children:"• You can modify or revoke access at any time"})]})]})]})})]})}const Zs=()=>{var e,t,a,r;const{id:i}=d(),l=n(),{user:o,accessToken:m}=Ss(),[x,u]=s.useState(null),[h,p]=s.useState([]),[g,f]=s.useState(!0),[b,v]=s.useState(null),[j,w]=s.useState("about"),[k,S]=s.useState(null);s.useEffect(()=>{(async()=>{var e,t,s,a;if(!i)return v("Event ID is required"),void f(!1);try{f(!0);const r=await Us.getEventById(i);r.success&&r.data?u(r.data.event):(null==(e=r.error)?void 0:e.includes("not found"))||(null==(t=r.error)?void 0:t.includes("404"))?v("This event could not be found. It may have been deleted or the link is incorrect."):(null==(s=r.error)?void 0:s.includes("permission"))||(null==(a=r.error)?void 0:a.includes("access"))?v("You don't have permission to view this event. It may be private or restricted."):v(r.error||"Event not found")}catch(r){if(r instanceof Error&&"response"in r){const e=r;404===e.status?v("This event could not be found."):403===e.status?v("You don't have permission to view this event."):401===e.status?v("Please log in to view this event."):v("An unexpected error occurred while loading the event.")}else v("Unable to connect to the server.")}finally{f(!1)}})(),(async()=>{if(o)try{const e=await Bs.getUserRegistrations();e.success&&e.data&&p(e.data.registrations)}catch(e){}})(),(async()=>{if(o&&i&&m)try{const e=await fetch(`/api/events/${i}/user-role`,{headers:{Authorization:`Bearer ${m}`}});if(e.ok){const t=await e.json();t.success&&t.data&&S(t.data.role)}}catch(e){}})()},[i,o,m]);const _=()=>{navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")};if(g)return Ve.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading event..."})]})});if(b||!x)return Ve.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center max-w-md px-4",children:[Ve.jsx("p",{className:"text-red-600 mb-4",children:b}),Ve.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[Ve.jsx(I,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})});const P="organizer"===k,D=new Date(x.start_date),T=new Date(x.end_date),R=D>new Date,F=new Date>=D&&new Date<=T,V=(null==(e=x.registrations)?void 0:e.length)||0,Y=(e=>{var t;const s=h.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});return!!s&&((null==(t=s.event)?void 0:t.is_paid)?"completed"===s.payment_status:"confirmed"===s.status||null===s.payment_status)})(x.id),Q=(e=>{var t;const s=h.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});if(!s)return;if(null==(t=s.event)?void 0:t.is_paid)return"completed"===s.payment_status?s:void 0;return"confirmed"===s.status||null===s.payment_status?s:void 0})(x.id),W=[{name:"Company Name",tier:"platinum",logo:null},{name:"Company Name",tier:"gold",logo:null},{name:"Company Name",tier:"gold",logo:null},{name:"Company Name",tier:"silver",logo:null},{name:"Company Name",tier:"silver",logo:null},{name:"Company Name",tier:"silver",logo:null}];return Ve.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ve.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ve.jsxs("div",{className:"flex items-center justify-between h-16",children:[Ve.jsxs("button",{onClick:()=>l(-1),className:"flex items-center text-gray-700 hover:text-primary-600 transition-colors",children:[Ve.jsx(I,{className:"w-5 h-5 mr-2"}),Ve.jsx("span",{className:"font-medium",children:"Back"})]}),P&&Ve.jsxs("div",{className:"flex items-center gap-2",children:[Ve.jsxs(c,{to:`/events/${x.id}/edit`,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[Ve.jsx(L,{className:"w-4 h-4 mr-2"}),Ve.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),Ve.jsxs(c,{to:`/events/${x.id}/staff`,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[Ve.jsx(z,{className:"w-4 h-4 mr-2"}),Ve.jsx("span",{className:"hidden sm:inline",children:"Staff"})]}),Ve.jsx("button",{onClick:async()=>{if(x&&i&&confirm(`Are you sure you want to delete "${x.title}"? This action cannot be undone.`))try{const e=await Us.deleteEvent(i);e.success?l("/dashboard"):alert(e.error||"Failed to delete event")}catch(e){alert("Failed to delete event")}},className:"flex items-center px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event",children:Ve.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),Ve.jsxs("div",{className:"relative bg-gradient-to-br from-primary-600 to-primary-800",children:[x.banner_url?Ve.jsxs("div",{className:"relative h-[500px]",children:[Ve.jsx("img",{src:x.banner_url,alt:x.title,className:"w-full h-full object-cover"}),Ve.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),Ve.jsx("div",{className:"absolute top-6 right-6 z-20",children:Ve.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-gray-900 rounded-lg hover:bg-white transition-all shadow-lg",children:[Ve.jsx($,{className:"w-4 h-4"}),Ve.jsx("span",{className:"font-medium",children:"Share"})]})})]}):Ve.jsx("div",{className:"relative h-[500px] bg-gradient-to-br from-primary-600 to-primary-800",children:Ve.jsx("div",{className:"absolute top-6 right-6 z-20",children:Ve.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-gray-900 rounded-lg hover:bg-white transition-all shadow-lg",children:[Ve.jsx($,{className:"w-4 h-4"}),Ve.jsx("span",{className:"font-medium",children:"Share"})]})})}),Ve.jsx("div",{className:"absolute inset-0 flex items-end",children:Ve.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:Ve.jsxs("div",{className:"max-w-4xl",children:[Ve.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Ve.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${F?"bg-green-500":R?"bg-blue-500":"bg-gray-500"} text-white shadow-lg`,children:F?"Live Now":R?"Upcoming":"Past Event"}),x.is_paid&&Ve.jsxs("span",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-yellow-500 text-white shadow-lg",children:["$",x.price]})]}),Ve.jsx("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight",children:x.title}),Ve.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-white/90",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(C,{className:"w-5 h-5 mr-3 flex-shrink-0"}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm opacity-80",children:"Date"}),Ve.jsx("div",{className:"font-semibold",children:D.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(E,{className:"w-5 h-5 mr-3 flex-shrink-0"}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm opacity-80",children:"Location"}),Ve.jsx("div",{className:"font-semibold",children:x.location})]})]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(y,{className:"w-5 h-5 mr-3 flex-shrink-0"}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm opacity-80",children:"Attendees"}),Ve.jsxs("div",{className:"font-semibold",children:[V," / ",x.capacity]})]})]})]})]})})})]}),Ve.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-40 shadow-sm",children:Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[Ve.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[Ve.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(O,{className:"w-4 h-4 mr-2"}),D.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(y,{className:"w-4 h-4 mr-2"}),V," Registered"]})]}),Ve.jsx("div",{className:"flex items-center gap-3",children:Y&&Q?Ve.jsxs(Ve.Fragment,{children:[Ve.jsxs("div",{className:"flex items-center text-green-600 font-medium",children:[Ve.jsx(M,{className:"w-5 h-5 mr-2"}),"You're Registered"]}),Ve.jsx(c,{to:`/ticket/${Q.id}`,className:"px-4 py-2 bg-white text-primary-600 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors font-medium shadow-sm",children:"Ticket"})]}):R?Ve.jsx(c,{to:`/events/${x.id}/register`,className:"px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-lg",children:"Register Now"}):Ve.jsx("div",{className:"text-gray-500 font-medium",children:"Registration Closed"})})]}),Ve.jsx("nav",{className:"mt-6 flex gap-8 overflow-x-auto border-t border-gray-200 pt-2",children:["about","speakers","schedule","sponsors"].map(e=>Ve.jsx("button",{onClick:()=>w(e),className:"py-3 px-2 border-b-2 font-medium text-sm transition-colors whitespace-nowrap "+(j===e?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})}),P&&Ve.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-purple-50 border-b border-primary-100",children:Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:Ve.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[Ve.jsx("h3",{className:"text-sm font-semibold text-primary-900",children:"Quick Management"}),Ve.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Ve.jsxs(c,{to:`/events/${x.id}/registrations`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Ve.jsx(A,{className:"w-4 h-4"}),Ve.jsx("span",{children:"Registrations"})]}),Ve.jsxs(c,{to:`/events/${x.id}/attendance`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Ve.jsx(M,{className:"w-4 h-4"}),Ve.jsx("span",{children:"Attendance"})]}),Ve.jsxs(c,{to:`/events/${x.id}/certificates`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Ve.jsx(N,{className:"w-4 h-4"}),Ve.jsx("span",{children:"Certificates"})]}),Ve.jsxs(c,{to:`/events/${x.id}/form-builder`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Ve.jsx(U,{className:"w-4 h-4"}),Ve.jsx("span",{children:"Create Registration Form"})]})]})]})})}),Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:["about"===j&&Ve.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[Ve.jsxs("div",{className:"lg:col-span-2",children:[Ve.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"About this Event"}),Ve.jsxs("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",children:[Ve.jsx("p",{children:x.description}),Ve.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"What to Expect"}),Ve.jsxs("ul",{className:"space-y-3",children:[Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx(M,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Ve.jsx("span",{children:"Engaging presentations from industry experts"})]}),Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx(M,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Ve.jsx("span",{children:"Networking opportunities with fellow attendees"})]}),Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx(M,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Ve.jsx("span",{children:"Hands-on workshops and interactive sessions"})]}),Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx(M,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Ve.jsx("span",{children:"Access to exclusive event materials and resources"})]})]})]})]}),Ve.jsx("div",{className:"space-y-6",children:Ve.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[Ve.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Event Details"}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Organizer"}),Ve.jsx("div",{className:"font-semibold text-gray-900",children:(null==(t=x.organizer)?void 0:t.name)||"N/A"}),(null==(a=x.organizer)?void 0:a.organization_name)&&Ve.jsx("div",{className:"text-sm text-gray-600",children:x.organizer.organization_name})]}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Category"}),Ve.jsx("div",{className:"font-semibold text-gray-900",children:(null==(r=x.category)?void 0:r.name)||"General"})]}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Event Duration"}),Ve.jsxs("div",{className:"font-semibold text-gray-900",children:[D.toLocaleDateString()," -"," ",T.toLocaleDateString()]})]}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Registration Deadline"}),Ve.jsx("div",{className:"font-semibold text-gray-900",children:x.registration_deadline?new Date(x.registration_deadline).toLocaleDateString():"Until event starts"})]}),Ve.jsxs("button",{onClick:()=>{const e=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(x.location)}`;window.open(e,"_blank")},className:"w-full flex items-center justify-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[Ve.jsx(E,{className:"w-4 h-4 mr-2"}),"View on Google Maps"]})]})]})})]}),"speakers"===j&&Ve.jsxs("div",{children:[Ve.jsxs("div",{className:"text-center mb-12",children:[Ve.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Featured Speakers"}),Ve.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Learn from industry leaders and experts in their fields"})]}),Ve.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{name:"Speaker Name",role:"Coming Soon",company:"TBA"},{name:"Speaker Name",role:"Coming Soon",company:"TBA"},{name:"Speaker Name",role:"Coming Soon",company:"TBA"},{name:"Speaker Name",role:"Coming Soon",company:"TBA"}].map((e,t)=>Ve.jsxs("div",{className:"text-center group",children:[Ve.jsxs("div",{className:"relative mb-6 overflow-hidden rounded-2xl",children:[Ve.jsx("div",{className:"aspect-square bg-gradient-to-br from-primary-100 to-purple-100 flex items-center justify-center",children:Ve.jsx(q,{className:"w-16 h-16 text-primary-400"})}),Ve.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary-900/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),Ve.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:e.name}),Ve.jsx("p",{className:"text-gray-600 mb-1",children:e.role}),Ve.jsx("p",{className:"text-sm text-gray-500",children:e.company})]},t))}),Ve.jsx("div",{className:"mt-12 bg-primary-50 rounded-2xl p-8 text-center border border-primary-100",children:Ve.jsx("p",{className:"text-gray-700",children:"Speaker information will be available soon. Check back for updates!"})})]}),"schedule"===j&&Ve.jsxs("div",{children:[Ve.jsxs("div",{className:"text-center mb-12",children:[Ve.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Event Schedule"}),Ve.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Full day agenda with sessions, workshops, and networking breaks"})]}),Ve.jsxs("div",{className:"max-w-4xl mx-auto",children:[Ve.jsx("div",{className:"space-y-4",children:[{time:"09:00 AM",title:"Registration & Welcome Coffee",type:"break"},{time:"10:00 AM",title:"Opening Keynote",type:"keynote",speaker:"TBA"},{time:"11:30 AM",title:"Panel Discussion",type:"panel",speaker:"Multiple Speakers"},{time:"12:30 PM",title:"Lunch & Networking",type:"break"},{time:"02:00 PM",title:"Workshop Sessions",type:"workshop",speaker:"TBA"},{time:"04:00 PM",title:"Closing Remarks",type:"keynote",speaker:"TBA"}].map((e,t)=>Ve.jsxs("div",{className:"flex gap-6 p-6 rounded-2xl border transition-all "+("break"===e.type?"bg-gray-50 border-gray-200":"bg-white border-primary-200 hover:border-primary-300 shadow-sm hover:shadow"),children:[Ve.jsx("div",{className:"flex-shrink-0 w-24 text-right",children:Ve.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.time})}),Ve.jsx("div",{className:"flex-shrink-0",children:"break"===e.type?Ve.jsx(B,{className:"w-6 h-6 text-gray-400"}):Ve.jsx(q,{className:"w-6 h-6 text-primary-600"})}),Ve.jsxs("div",{className:"flex-grow",children:[Ve.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:e.title}),e.speaker&&Ve.jsx("p",{className:"text-gray-600",children:e.speaker})]})]},t))}),Ve.jsx("div",{className:"mt-12 bg-primary-50 rounded-2xl p-8 text-center border border-primary-100",children:Ve.jsx("p",{className:"text-gray-700",children:"Detailed schedule will be announced closer to the event date"})})]})]}),"sponsors"===j&&Ve.jsxs("div",{children:[Ve.jsxs("div",{className:"text-center mb-12",children:[Ve.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Event Sponsors"}),Ve.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Thank you to our sponsors who make this event possible"})]}),Ve.jsxs("div",{className:"mb-12",children:[Ve.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Platinum Sponsors"}),Ve.jsx("div",{className:"grid md:grid-cols-1 gap-8 max-w-2xl mx-auto",children:W.filter(e=>"platinum"===e.tier).map((e,t)=>Ve.jsxs("div",{className:"bg-white border-2 border-primary-200 rounded-2xl p-12 text-center shadow-sm",children:[Ve.jsx("div",{className:"h-32 flex items-center justify-center",children:Ve.jsx(G,{className:"w-20 h-20 text-primary-400"})}),Ve.jsx("p",{className:"mt-4 text-xl font-bold text-gray-900",children:e.name})]},t))})]}),Ve.jsxs("div",{className:"mb-12",children:[Ve.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Gold Sponsors"}),Ve.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:W.filter(e=>"gold"===e.tier).map((e,t)=>Ve.jsxs("div",{className:"bg-white border border-gray-300 rounded-2xl p-8 text-center shadow-sm",children:[Ve.jsx("div",{className:"h-24 flex items-center justify-center",children:Ve.jsx(G,{className:"w-16 h-16 text-gray-400"})}),Ve.jsx("p",{className:"mt-4 text-lg font-bold text-gray-900",children:e.name})]},t))})]}),Ve.jsxs("div",{children:[Ve.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Silver Sponsors"}),Ve.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:W.filter(e=>"silver"===e.tier).map((e,t)=>Ve.jsxs("div",{className:"bg-white border border-gray-300 rounded-xl p-6 text-center",children:[Ve.jsx("div",{className:"h-20 flex items-center justify-center",children:Ve.jsx(G,{className:"w-12 h-12 text-gray-400"})}),Ve.jsx("p",{className:"mt-3 font-semibold text-gray-900",children:e.name})]},t))})]}),Ve.jsx("div",{className:"mt-12 bg-primary-50 rounded-2xl p-8 text-center border border-primary-100",children:Ve.jsx("p",{className:"text-gray-700",children:"Interested in sponsoring this event? Contact the organizer for opportunities."})})]})]}),P&&Ve.jsx("div",{className:"border-t border-gray-200 bg-white",children:Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:Ve.jsx(Js,{eventId:x.id})})})]})},Ks={getFormTemplates:async()=>_s.get("/registration-forms/templates"),createRegistrationForm:async(e,t)=>_s.post(`/registration-forms/events/${e}/form`,t),getRegistrationForm:async e=>_s.get(`/registration-forms/events/${e}/form`),updateRegistrationForm:async(e,t,s)=>_s.put(`/registration-forms/events/${e}/form/${t}`,s),deleteRegistrationForm:async(e,t)=>_s.delete(`/registration-forms/events/${e}/form/${t}`)};const ea={action:"register for the event",fallbackMessage:"Registration failed. Please try again."};function ta(e,t={}){const s=function(e,t={}){var s;const{action:a,fallbackMessage:r}=t,i=r||(a?`Failed to ${a}`:"An unexpected error occurred");if(e instanceof Error&&"response"in e){const t=e,r=t.status,n=(null==(s=t.response)?void 0:s.error)||"";switch(r){case 400:return n.includes("validation")||n.includes("invalid")?"Please check your information and try again.":n.includes("deadline")?"The deadline for this action has passed.":n.includes("capacity")||n.includes("full")?"This action cannot be completed due to capacity limitations.":n.includes("already")?"This action has already been completed.":n||"Invalid request. Please check your information.";case 401:return"Your session has expired. Please log in again.";case 403:return n.includes("organizer")?"As an organizer, you cannot perform this action on your own event.":n.includes("permission")||n.includes("access")?"You don't have permission to perform this action.":n.includes("invitation")||n.includes("private")?"This is a private resource that requires special access.":n||"Access denied. You don't have permission for this action.";case 404:return(null==a?void 0:a.includes("event"))?"The event could not be found. It may have been deleted or the link is incorrect.":(null==a?void 0:a.includes("user"))||(null==a?void 0:a.includes("staff"))?"The user could not be found. They may have been removed or the information is outdated.":n||"The requested resource could not be found.";case 409:return n.includes("already registered")?"You have already registered for this event.":n.includes("already exists")?"This item already exists. Please use a different name or identifier.":n||"This action conflicts with existing data.";case 429:return"Too many requests. Please wait a moment and try again.";case 500:case 502:case 503:return"Server error occurred. Please try again in a few moments.";default:return n||i}}return e instanceof Error?e.message.includes("network")||e.message.includes("fetch")||e.message.includes("connection")?"Unable to connect to the server. Please check your internet connection and try again.":e.message.includes("timeout")?"The request timed out. Please try again.":e.message||i:"string"==typeof e?e:i}(e,t);return t.showToast,s}function sa(e){return e instanceof Error?e.message:"string"==typeof e?e:e&&"object"==typeof e&&"message"in e?String(e.message):"An unexpected error occurred"}function aa({form:e,onDataChange:t,initialData:a={}}){const[r,i]=s.useState(0),[n,l]=s.useState(a);s.useEffect(()=>{t(n)},[n,t]);const c=(e,t)=>{l(s=>({...s,[e]:t}))},o=e=>{var t,s,a,r,i;const l=n[e.id]||"";switch(e.type){case"text":case"email":case"phone":case"url":return Ve.jsx("input",{type:"email"===e.type?"email":"url"===e.type?"url":"text",value:l,onChange:t=>c(e.id,t.target.value),placeholder:e.placeholder,required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"number":return Ve.jsx("input",{type:"number",value:l,onChange:t=>c(e.id,t.target.value),placeholder:e.placeholder,required:e.required,min:null==(t=e.validation)?void 0:t.min,max:null==(s=e.validation)?void 0:s.max,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"date":return Ve.jsx("input",{type:"date",value:l,onChange:t=>c(e.id,t.target.value),required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"textarea":return Ve.jsx("textarea",{value:l,onChange:t=>c(e.id,t.target.value),placeholder:e.placeholder,required:e.required,rows:4,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"select":return Ve.jsxs("select",{value:l,onChange:t=>c(e.id,t.target.value),required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[Ve.jsx("option",{value:"",children:"Select an option"}),null==(a=e.options)?void 0:a.map(e=>Ve.jsx("option",{value:e,children:e},e))]});case"radio":return Ve.jsx("div",{className:"space-y-2",children:null==(r=e.options)?void 0:r.map(t=>Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"radio",name:e.id,value:t,checked:l===t,onChange:t=>c(e.id,t.target.value),required:e.required,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500"}),Ve.jsx("span",{className:"text-sm text-gray-700",children:t})]},t))});case"checkbox":return Ve.jsx("div",{className:"space-y-2",children:null==(i=e.options)?void 0:i.map(t=>Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"checkbox",value:t,checked:Array.isArray(l)&&l.includes(t),onChange:s=>{const a=Array.isArray(l)?l:[];s.target.checked?c(e.id,[...a,t]):c(e.id,a.filter(e=>e!==t))},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500"}),Ve.jsx("span",{className:"text-sm text-gray-700",children:t})]},t))});case"file":return Ve.jsx("input",{type:"file",onChange:t=>{var s;const a=null==(s=t.target.files)?void 0:s[0];c(e.id,a)},required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});default:return null}},d=()=>!e.is_multi_step||!e.steps||e.steps[r].fields.map(t=>e.fields.find(e=>e.id===t)).filter(e=>void 0!==e).every(e=>{if(!e.required)return!0;const t=n[e.id];return"checkbox"===e.type?Array.isArray(t)&&t.length>0:void 0!==t&&""!==t&&null!==t}),m=()=>{e.is_multi_step&&e.steps&&r<e.steps.length-1&&d()&&i(r+1)},x=()=>{r>0&&i(r-1)};if(e.is_multi_step&&e.steps){const t=e.steps[r],s=t.fields.map(t=>e.fields.find(e=>e.id===t)).filter(e=>void 0!==e);return Ve.jsxs("div",{children:[Ve.jsxs("div",{className:"mb-6",children:[Ve.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-2",children:[Ve.jsxs("span",{children:["Step ",r+1," of ",e.steps.length]}),Ve.jsxs("span",{children:[Math.round((r+1)/e.steps.length*100),"% Complete"]})]}),Ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Ve.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:(r+1)/e.steps.length*100+"%"}})})]}),Ve.jsxs("div",{className:"mb-6",children:[Ve.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),t.description&&Ve.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),Ve.jsx("div",{className:"space-y-4",children:s.map(e=>Ve.jsxs("div",{children:[Ve.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&Ve.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o(e)]},e.id))})]}),Ve.jsxs("div",{className:"flex justify-between",children:[Ve.jsxs("button",{type:"button",onClick:x,disabled:0===r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[Ve.jsx(V,{className:"h-4 w-4 mr-1"}),"Previous"]}),r<e.steps.length-1?Ve.jsxs("button",{type:"button",onClick:m,disabled:!d(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:["Next",Ve.jsx(Y,{className:"h-4 w-4 ml-1"})]}):Ve.jsx("span",{className:"text-sm text-gray-600",children:"Ready to submit"})]})]})}return Ve.jsx("div",{className:"space-y-4",children:e.fields.map(e=>Ve.jsxs("div",{children:[Ve.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&Ve.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o(e)]},e.id))})}const ra=()=>{const{id:e}=d(),t=n(),{user:a}=Ss(),[r,i]=s.useState(null),[l,c]=s.useState(null),[o,m]=s.useState(!0),[x,u]=s.useState(!1),[h,p]=s.useState(null),[g,f]=s.useState(!1),[b,y]=s.useState({});s.useEffect(()=>{(async()=>{var t;if(!e)return p("Event ID is required"),void m(!1);try{m(!0);const r=await Us.getEventById(e);if(!r.success||!r.data)return p(r.error||"Event not found"),void m(!1);i(r.data.event);try{const t=await Ks.getRegistrationForm(e);t.success&&t.data&&c(t.data.form)}catch(s){}if(a&&y(e=>({...e,email:a.email,firstName:a.name.split(" ")[0]||"",lastName:a.name.split(" ").slice(1).join(" ")||""})),a){const s=await Bs.checkRegistrationStatus(e);s.success&&(null==(t=s.data)?void 0:t.isRegistered)&&f(!0)}}catch(r){p("Failed to load event details")}finally{m(!1)}})()},[e,a]);if(o)return Ve.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),Ve.jsx("p",{className:"mt-2 text-gray-600",children:"Loading registration form..."})]})});if(h||!r)return Ve.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx("p",{className:"text-red-600 mb-4",children:h}),Ve.jsx("button",{onClick:()=>t(-1),className:"text-primary-600 hover:text-primary-700 font-medium",children:"← Go Back"})]})});if(!a)return Ve.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Login Required"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to register for events."}),Ve.jsxs("div",{className:"space-x-4",children:[Ve.jsx("button",{onClick:()=>t("/login"),className:"btn btn-primary",children:"Login"}),Ve.jsx("button",{onClick:()=>t("/register"),className:"btn btn-secondary",children:"Create Account"})]})]})});if(g)return Ve.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:Ve.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),Ve.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Already Registered"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:"You are already registered for this event."}),Ve.jsx("button",{onClick:()=>t(`/events/${r.id}`),className:"btn btn-primary",children:"View Event Details"})]})});const v=new Date(r.start_date),j=r.registration_deadline?new Date(r.registration_deadline):null,N=j&&new Date>j,w=new Date>v;return N||w?Ve.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Registration Closed"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:w?"This event has already started.":"The registration deadline has passed."}),Ve.jsx("button",{onClick:()=>t(`/events/${r.id}`),className:"btn btn-secondary",children:"View Event Details"})]})}):Ve.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ve.jsxs("div",{className:"mb-8",children:[Ve.jsxs("button",{onClick:()=>t(`/events/${r.id}`),className:"text-gray-600 hover:text-gray-900 flex items-center mb-4",children:[Ve.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Event"]}),Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Register for Event"}),Ve.jsx("h2",{className:"text-xl text-gray-700 mb-4",children:r.title}),Ve.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Ve.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[Ve.jsxs("span",{className:"flex items-center",children:[Ve.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-2m-8 0V7"})}),v.toLocaleDateString()," at"," ",v.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),Ve.jsxs("span",{className:"flex items-center",children:[Ve.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[Ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.location]})]}),r.is_paid&&Ve.jsxs("div",{className:"mt-2",children:[Ve.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["$",r.price]}),Ve.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"per ticket"})]})]})]}),h&&Ve.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),Ve.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),r&&e&&a)try{u(!0),p(null);const s=await Bs.registerForEvent(e,{formData:b});s.success&&s.data?s.data.requiresPayment?t(`/events/${e}/payment`,{state:{registration:s.data.registration,amount:s.data.amount,message:s.message}}):t(`/events/${e}`,{state:{message:"Successfully registered for the event!"}}):p(s.error||"Failed to register for event")}catch(i){const e=ta(i,ea);p(e)}finally{u(!1)}},className:"space-y-6",children:[l?Ve.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[Ve.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:l.title}),l.description&&Ve.jsx("p",{className:"text-gray-600 mb-6",children:l.description}),Ve.jsx(aa,{form:l,onDataChange:y,initialData:b})]}):Ve.jsx(ia,{event:r,formData:b,handleInputChange:(e,t)=>{y(s=>({...s,[e]:t}))}}),Ve.jsx("div",{className:"flex justify-end",children:Ve.jsx("button",{type:"submit",disabled:x,className:"px-6 py-3 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white inline mr-2"}),"Registering..."]}):Ve.jsx(Ve.Fragment,{children:"Register for Event"})})})]})]})},ia=({event:e,formData:t,handleInputChange:s})=>Ve.jsxs("div",{className:"card space-y-6",children:[Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),Ve.jsx("input",{type:"text",id:"firstName",value:t.firstName||"",onChange:e=>s("firstName",e.target.value),className:"input",placeholder:"Enter your first name",required:!0})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),Ve.jsx("input",{type:"text",id:"lastName",value:t.lastName||"",onChange:e=>s("lastName",e.target.value),className:"input",placeholder:"Enter your last name",required:!0})]})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),Ve.jsx("input",{type:"email",id:"email",value:t.email||"",onChange:e=>s("email",e.target.value),className:"input",placeholder:"Enter your email address",required:!0})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),Ve.jsx("input",{type:"tel",id:"phone",value:t.phone||"",onChange:e=>s("phone",e.target.value),className:"input",placeholder:"Enter your phone number",required:!0})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"organization",className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization (Optional)"}),Ve.jsx("input",{type:"text",id:"organization",value:t.organization||"",onChange:e=>s("organization",e.target.value),className:"input",placeholder:"Enter your organization"})]})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"dietary",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dietary Requirements (Optional)"}),Ve.jsx("textarea",{id:"dietary",rows:3,value:t.dietary||"",onChange:e=>s("dietary",e.target.value),className:"input",placeholder:"Please list any dietary requirements or food allergies"})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"accessibility",className:"block text-sm font-medium text-gray-700 mb-1",children:"Accessibility Requirements (Optional)"}),Ve.jsx("textarea",{id:"accessibility",rows:3,value:t.accessibility||"",onChange:e=>s("accessibility",e.target.value),className:"input",placeholder:"Please describe any accessibility requirements"})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"comments",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Comments (Optional)"}),Ve.jsx("textarea",{id:"comments",rows:3,value:t.comments||"",onChange:e=>s("comments",e.target.value),className:"input",placeholder:"Any additional comments or questions"})]})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Emergency Contact (Optional)"}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"emergencyContact",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),Ve.jsx("input",{type:"text",id:"emergencyContact",value:t.emergencyContact||"",onChange:e=>s("emergencyContact",e.target.value),className:"input",placeholder:"Emergency contact name"})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"emergencyPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),Ve.jsx("input",{type:"tel",id:"emergencyPhone",value:t.emergencyPhone||"",onChange:e=>s("emergencyPhone",e.target.value),className:"input",placeholder:"Emergency contact phone"})]})]})]}),Ve.jsx("div",{className:"border-t pt-6",children:Ve.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Ve.jsxs("p",{className:"text-sm text-gray-700",children:["By registering for this event, you agree to provide accurate information and comply with the event terms and conditions.",e.is_paid&&Ve.jsxs("span",{className:"font-medium",children:[" ","Payment will be required to complete your registration."]})]})})})]}),na=js((e,t)=>({events:[],selectedEvent:null,isLoading:!1,error:null,loadEvents:async()=>{try{e({isLoading:!0,error:null});const t=await Us.getEvents();t.success&&t.data?e({events:t.data.events}):e({error:t.error||"Failed to load events"})}catch(t){e({error:"Error loading events"})}finally{e({isLoading:!1})}},loadEvent:async s=>{try{e({isLoading:!0,error:null});const a=await Us.getEventById(s);if(a.success&&a.data){e({selectedEvent:a.data.event});const{events:r}=t(),i=r.map(e=>e.id===s?a.data.event:e);e({events:i})}else e({error:a.error||"Failed to load event"})}catch(a){e({error:"Error loading event"})}finally{e({isLoading:!1})}},setSelectedEvent:t=>{e({selectedEvent:t})},createEvent:async t=>{try{e({isLoading:!0,error:null});const s=await Us.createEvent(t);if(s.success&&s.data){const t=s.data.event;return e(e=>({events:[...e.events,t],selectedEvent:t})),t}return e({error:s.error||"Failed to create event"}),null}catch(s){return e({error:"Error creating event"}),null}finally{e({isLoading:!1})}},updateEvent:async(t,s)=>{try{e({isLoading:!0,error:null});const a=await Us.updateEvent(t,s);if(a.success&&a.data){const s=a.data.event;return e(e=>{var a;return{events:e.events.map(e=>e.id===t?s:e),selectedEvent:(null==(a=e.selectedEvent)?void 0:a.id)===t?s:e.selectedEvent}}),s}return e({error:a.error||"Failed to update event"}),null}catch(a){return e({error:"Error updating event"}),null}finally{e({isLoading:!1})}},deleteEvent:async t=>{try{e({isLoading:!0,error:null});const s=await Us.deleteEvent(t);return s.success?(e(e=>{var s;return{events:e.events.filter(e=>e.id!==t),selectedEvent:(null==(s=e.selectedEvent)?void 0:s.id)===t?null:e.selectedEvent}}),!0):(e({error:s.error||"Failed to delete event"}),!1)}catch(s){return e({error:"Error deleting event"}),!1}finally{e({isLoading:!1})}}})),la=js((e,t)=>({form:null,templates:[],activeFieldId:null,isMultiStep:!1,currentStep:0,isLoading:!1,isSaving:!1,setForm:t=>e({form:t}),setTemplates:t=>e({templates:t}),setActiveFieldId:t=>e({activeFieldId:t}),setIsMultiStep:t=>e({isMultiStep:t}),setCurrentStep:t=>e({currentStep:t}),addField:(s,a)=>{const{form:r,isMultiStep:i}=t();if(!r)return;const n=[...r.fields,s];let l=r.steps||[];i&&"number"==typeof a&&l[a]&&(l=l.map((e,t)=>t===a?{...e,fields:[...e.fields,s.id]}:e)),e({form:{...r,fields:n,steps:l.length>0?l:void 0}})},updateField:(s,a)=>{const{form:r}=t();if(!r)return;const i=r.fields.map(e=>e.id===s?{...e,...a}:e);e({form:{...r,fields:i}})},removeField:s=>{const{form:a}=t();if(!a)return;const r=a.fields.filter(e=>e.id!==s);let i=a.steps||[];i.length>0&&(i=i.map(e=>({...e,fields:e.fields.filter(e=>e!==s)}))),e({form:{...a,fields:r,steps:i.length>0?i:void 0},activeFieldId:null})},reorderFields:(s,a)=>{const{form:r}=t();if(!r)return;const i=[...r.fields],[n]=i.splice(s,1);i.splice(a,0,n),e({form:{...r,fields:i}})},addStep:s=>{const{form:a}=t();if(!a)return;const r=[...a.steps||[],s];e({form:{...a,is_multi_step:!0,steps:r},isMultiStep:!0})},updateStep:(s,a)=>{const{form:r}=t();if(!r||!r.steps)return;const i=r.steps.map((e,t)=>t===s?{...e,...a}:e);e({form:{...r,steps:i}})},removeStep:s=>{const{form:a}=t();if(!a||!a.steps)return;const r=a.steps.filter((e,t)=>t!==s);e({form:{...a,steps:r.length>0?r:void 0,is_multi_step:r.length>0},isMultiStep:r.length>0,currentStep:Math.min(t().currentStep,r.length-1)})},reorderSteps:(s,a)=>{const{form:r}=t();if(!r||!r.steps)return;const i=[...r.steps],[n]=i.splice(s,1);i.splice(a,0,n),e({form:{...r,steps:i}})},applyTemplate:s=>{const{form:a}=t();if(!a)return;const r={...a,fields:[...s.fields],is_multi_step:!1,steps:void 0};e({form:r,isMultiStep:!1,currentStep:0,activeFieldId:null})},loadFormTemplates:async()=>{try{e({isLoading:!0});const t=await Ks.getFormTemplates();t.success&&t.data&&e({templates:t.data.templates})}catch(t){}finally{e({isLoading:!1})}},loadRegistrationForm:async t=>{try{e({isLoading:!0});const s=await Ks.getRegistrationForm(t);if(s.success&&s.data){const t=s.data.form;e({form:t,isMultiStep:t.is_multi_step,currentStep:0})}else e({form:null})}catch(s){e({form:null})}finally{e({isLoading:!1})}},saveRegistrationForm:async s=>{const{form:a}=t();if(a)try{e({isSaving:!0});const t=await Ks.updateRegistrationForm(s,a.id,{title:a.title,description:a.description,fields:a.fields,is_multi_step:a.is_multi_step,steps:a.steps});t.success&&t.data&&e({form:t.data.form})}catch(r){}finally{e({isSaving:!1})}},createRegistrationForm:async(t,s,a)=>{try{e({isSaving:!0});const r=await Ks.createRegistrationForm(t,{title:s,description:a,fields:[],is_multi_step:!1});r.success&&r.data&&e({form:r.data.form,isMultiStep:r.data.form.is_multi_step,currentStep:0})}catch(r){}finally{e({isSaving:!1})}},deleteRegistrationForm:async(t,s)=>{try{e({isLoading:!0});(await Ks.deleteRegistrationForm(t,s)).success&&e({form:null,activeFieldId:null,isMultiStep:!1,currentStep:0})}catch(a){}finally{e({isLoading:!1})}}}));function ca({templates:e,onClose:t,onSelect:s}){return Ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Ve.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[Ve.jsxs("div",{className:"p-6 border-b",children:[Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Choose a Template"}),Ve.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600",children:Ve.jsx(f,{className:"h-5 w-5"})})]}),Ve.jsx("p",{className:"text-gray-600 mt-1",children:"Start with a pre-built template and customize it to fit your event's needs. All templates can be fully edited after selection."})]}),Ve.jsxs("div",{className:"p-6",children:[Ve.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{const t=(e=>{switch(e){case"basic":default:return Q;case"detailed":return y;case"conference":return W}})(e.id),a=(e=>{switch(e){case"basic":return"text-blue-600";case"detailed":return"text-green-600";case"conference":return"text-purple-600";default:return"text-gray-600"}})(e.id);return Ve.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-gray-300 hover:shadow-sm cursor-pointer transition-all",onClick:()=>s(e),children:[Ve.jsxs("div",{className:"flex items-center mb-4",children:[Ve.jsx("div",{className:"p-2 rounded-md bg-gray-100",children:Ve.jsx(t,{className:`h-6 w-6 ${a}`})}),Ve.jsx("div",{className:"ml-3",children:Ve.jsx("h3",{className:"font-medium text-gray-900",children:e.name})})]}),Ve.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),Ve.jsxs("div",{className:"space-y-2",children:[Ve.jsxs("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:["Includes ",e.fields.length," fields:"]}),Ve.jsxs("div",{className:"space-y-1",children:[e.fields.slice(0,4).map((e,t)=>Ve.jsxs("div",{className:"text-xs text-gray-600 flex items-center",children:[Ve.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mr-2"}),e.label]},t)),e.fields.length>4&&Ve.jsxs("div",{className:"text-xs text-gray-500 pl-4",children:["+",e.fields.length-4," more fields"]})]})]}),Ve.jsx("div",{className:"mt-4 pt-4 border-t",children:Ve.jsx("button",{onClick:()=>s(e),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:"Use This Template"})})]},e.id)})}),0===e.length&&Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx(Q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ve.jsx("p",{className:"text-gray-600",children:"No templates available"})]})]}),Ve.jsx("div",{className:"p-6 border-t bg-gray-50",children:Ve.jsxs("div",{className:"flex justify-between items-center",children:[Ve.jsx("p",{className:"text-sm text-gray-600",children:"You can customize any template after selection"}),Ve.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"})]})})]})})}function oa({form:e,eventId:t,onClose:a}){const[r,i]=s.useState(null),[n,l]=s.useState(!1),c=window.location.origin,o=`${c}/events/${t}/register`,d=`${c}/events/${t}/register?embed=true`,m=async(e,t)=>{try{await navigator.clipboard.writeText(e),i(t),setTimeout(()=>i(null),2e3)}catch(s){}},x=()=>`<iframe \n  src="${d}" \n  width="100%" \n  height="600" \n  frameborder="0" \n  style="border: none; border-radius: 8px;">\n</iframe>`;return Ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Ve.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[Ve.jsx("div",{className:"p-6 border-b",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx($,{className:"h-6 w-6 text-blue-600"}),Ve.jsxs("div",{children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Share Registration Form"}),Ve.jsx("p",{className:"text-sm text-gray-600",children:e.title})]})]}),Ve.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600",children:Ve.jsx(f,{className:"h-5 w-5"})})]})}),Ve.jsxs("div",{className:"p-6 space-y-6",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Registration Link"}),Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx("input",{type:"text",value:o,readOnly:!0,className:"flex-1 p-3 border border-gray-300 rounded-md bg-gray-50 text-gray-700"}),Ve.jsx("button",{onClick:()=>m(o,"url"),className:"px-4 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 flex items-center space-x-2",children:"url"===r?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(H,{className:"h-4 w-4 text-green-600"}),Ve.jsx("span",{children:"Copied!"})]}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(X,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Copy"})]})}),Ve.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 flex items-center space-x-2",children:[Ve.jsx(J,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Preview"})]})]}),Ve.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Share this link with participants to register for your event"})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"QR Code"}),Ve.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[Ve.jsxs("div",{className:"flex items-center justify-between p-4",children:[Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx("div",{className:"p-2 bg-gray-100 rounded-md",children:Ve.jsx(j,{className:"h-6 w-6 text-gray-600"})}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"font-medium text-gray-900",children:"QR Code for Easy Access"}),Ve.jsx("p",{className:"text-sm text-gray-600",children:"Let participants scan to register quickly"})]})]}),Ve.jsx("button",{onClick:()=>l(!n),className:"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100",children:n?"Hide QR Code":"Generate QR Code"})]}),n&&Ve.jsx("div",{className:"border-t border-gray-200 p-6 bg-white",children:Ve.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[Ve.jsx("div",{className:"qr-code-container bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:Ve.jsx(_e,{value:o,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 200 200"})}),Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Scan to Register"}),Ve.jsx("p",{className:"text-xs text-gray-600 max-w-sm mx-auto",children:"Point your camera at this QR code to quickly access the registration form"})]}),Ve.jsxs("div",{className:"flex space-x-2",children:[Ve.jsx("button",{onClick:()=>{const t=document.querySelector(".qr-code-container"),s=null==t?void 0:t.querySelector("svg");if(s)try{const t=(new XMLSerializer).serializeToString(s),a=document.createElement("canvas"),r=a.getContext("2d"),i=new Image;a.width=200,a.height=200,i.onload=()=>{r&&(r.fillStyle="white",r.fillRect(0,0,200,200),r.drawImage(i,0,0));const t=document.createElement("a");t.download=`${e.title.replace(/\s+/g,"-")}-qr-code.png`,t.href=a.toDataURL("image/png"),t.click()},i.src="data:image/svg+xml;base64,"+btoa(t)}catch(a){alert("Failed to download QR code. Please try again.")}else alert("QR code not found. Please generate the QR code first.")},className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Download QR Code"}),Ve.jsx("button",{onClick:()=>m(o,"qr-url"),className:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 flex items-center space-x-1",children:"qr-url"===r?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(H,{className:"h-4 w-4 text-green-600"}),Ve.jsx("span",{children:"Copied!"})]}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(X,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Copy URL"})]})})]})]})})]})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Embed Code"}),Ve.jsxs("div",{className:"space-y-3",children:[Ve.jsx("textarea",{value:x(),readOnly:!0,rows:6,className:"w-full p-3 border border-gray-300 rounded-md bg-gray-50 text-sm text-gray-700 font-mono"}),Ve.jsxs("div",{className:"flex justify-between items-center",children:[Ve.jsx("p",{className:"text-sm text-gray-600",children:"Embed this form directly on your website"}),Ve.jsx("button",{onClick:()=>m(x(),"embed"),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 flex items-center space-x-2",children:"embed"===r?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(H,{className:"h-4 w-4 text-green-600"}),Ve.jsx("span",{children:"Copied!"})]}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(X,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Copy Code"})]})})]})]})]}),Ve.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Ve.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Form Statistics"}),Ve.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-gray-600",children:"Total Registrations"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:"0"})]}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-gray-600",children:"Form Views"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:"0"})]})]})]})]}),Ve.jsx("div",{className:"p-6 border-t bg-gray-50",children:Ve.jsx("div",{className:"flex justify-end",children:Ve.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})})]})})}function da(){const{id:e}=d(),t=n(),[a,r]=s.useState(!1),[i,l]=s.useState(!1),[c,o]=s.useState(!1),[m,x]=s.useState(null),{events:u,selectedEvent:h,loadEvent:p,isLoading:g}=na(),{form:b,templates:y,activeFieldId:v,isMultiStep:j,currentStep:N,isLoading:w,isSaving:k,setActiveFieldId:S,setIsMultiStep:C,setCurrentStep:E,addField:_,updateField:A,removeField:P,reorderFields:D,addStep:F,removeStep:L,applyTemplate:O,loadFormTemplates:M,loadRegistrationForm:q,saveRegistrationForm:B,createRegistrationForm:G,deleteRegistrationForm:V}=la(),Y=u.find(t=>t.id===e)||h;s.useEffect(()=>{e&&(p(e),M(),q(e))},[e]);const W=e=>{const t=`field_${Date.now()}`,s={id:t,type:e,label:`New ${e} field`,required:!1},a=j&&(null==b?void 0:b.steps)?N:void 0;_(s,a),S(t)},H=[{type:"text",label:"Text Input",icon:Q},{type:"email",label:"Email",icon:Q},{type:"phone",label:"Phone",icon:Q},{type:"textarea",label:"Text Area",icon:Q},{type:"select",label:"Dropdown",icon:Q},{type:"radio",label:"Radio Buttons",icon:Q},{type:"checkbox",label:"Checkboxes",icon:Q},{type:"file",label:"File Upload",icon:Q},{type:"date",label:"Date Picker",icon:Q},{type:"number",label:"Number",icon:Q},{type:"url",label:"URL",icon:Q}];return w||g?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"flex items-center space-x-2",children:[Ve.jsx(Z,{className:"h-6 w-6 animate-spin text-blue-600"}),Ve.jsx("span",{children:"Loading form builder..."})]})}):Y||g||w?Ve.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ve.jsx("div",{className:"bg-white border-b",children:Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Ve.jsxs("div",{className:"flex items-center justify-between h-16",children:[Ve.jsxs("div",{className:"flex items-center space-x-4",children:[Ve.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:Ve.jsx(I,{className:"h-5 w-5"})}),Ve.jsxs("div",{children:[Ve.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Registration Form Builder"}),Ve.jsx("p",{className:"text-sm text-gray-600",children:null==Y?void 0:Y.title})]})]}),Ve.jsxs("div",{className:"flex items-center space-x-3",children:[!a&&Ve.jsxs(Ve.Fragment,{children:[Ve.jsx("button",{onClick:()=>l(!0),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Use Template"}),Ve.jsxs("button",{onClick:()=>{if(b){if(j){if(b.steps)for(let e=b.steps.length-1;e>=0;e--)L(e)}else{const e={title:"Step 1",description:"Please fill out the following information",fields:b.fields.map(e=>e.id)};F(e)}C(!j),E(0)}},className:"px-3 py-2 text-sm font-medium rounded-md "+(j?"text-blue-700 bg-blue-100 border border-blue-300":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:[Ve.jsx(K,{className:"h-4 w-4 inline mr-1"}),"Multi-Step"]})]}),Ve.jsxs("button",{onClick:()=>r(!a),className:"px-3 py-2 text-sm font-medium rounded-md "+(a?"text-blue-700 bg-blue-100 border border-blue-300":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:[Ve.jsx(T,{className:"h-4 w-4 inline mr-1"}),a?"Edit":"Preview"]}),b&&Ve.jsxs(Ve.Fragment,{children:[Ve.jsxs("button",{onClick:()=>o(!0),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[Ve.jsx($,{className:"h-4 w-4 inline mr-1"}),"Share"]}),Ve.jsx("button",{onClick:async()=>{e&&b&&await B(e)},disabled:k,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:k?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(Z,{className:"h-4 w-4 inline mr-1 animate-spin"}),"Saving..."]}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(ee,{className:"h-4 w-4 inline mr-1"}),"Save"]})}),Ve.jsx("button",{onClick:async()=>{e&&b&&window.confirm("Are you sure you want to delete this form? This action cannot be undone.")&&await V(e,b.id)},className:"px-3 py-2 text-sm font-medium text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50",children:Ve.jsx(R,{className:"h-4 w-4"})})]})]})]})})}),Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:b?a?Ve.jsx("div",{className:"max-w-2xl mx-auto",children:Ve.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[Ve.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:b.title}),b.description&&Ve.jsx("p",{className:"text-gray-600 mb-6",children:b.description}),Ve.jsxs("div",{className:"space-y-6",children:[b.fields.map(e=>{var t;return Ve.jsxs("div",{children:[Ve.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&Ve.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===e.type?Ve.jsx("textarea",{placeholder:e.placeholder,className:"w-full p-3 border border-gray-300 rounded-md",rows:3}):"select"===e.type?Ve.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-md",children:[Ve.jsx("option",{value:"",children:e.placeholder||"Select an option"}),null==(t=e.options)?void 0:t.map((e,t)=>Ve.jsx("option",{value:e,children:e},t))]}):"radio"===e.type&&e.options?Ve.jsx("div",{className:"space-y-2",children:e.options.map((t,s)=>Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"radio",name:e.id,value:t,className:"mr-2"}),Ve.jsx("span",{className:"text-sm",children:t})]},s))}):"checkbox"===e.type&&e.options?Ve.jsx("div",{className:"space-y-2",children:e.options.map((e,t)=>Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"checkbox",value:e,className:"mr-2"}),Ve.jsx("span",{className:"text-sm",children:e})]},t))}):Ve.jsx("input",{type:"email"===e.type?"email":"number"===e.type?"number":"url"===e.type?"url":"date"===e.type?"date":"text",placeholder:e.placeholder,className:"w-full p-3 border border-gray-300 rounded-md"})]},e.id)}),Ve.jsx("div",{className:"pt-4",children:Ve.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700",children:"Submit Registration"})})]})]})}):Ve.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[Ve.jsx("div",{className:"lg:col-span-1",children:Ve.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[Ve.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Add Fields"}),Ve.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Click on any field type to add it to your form"}),Ve.jsx("div",{className:"space-y-2",children:H.map(({type:e,label:t,icon:s})=>Ve.jsxs("button",{onClick:()=>W(e),className:"w-full flex items-center space-x-3 p-3 text-left text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-200 rounded-md border border-transparent transition-all duration-200 group",title:`Add ${t} field`,children:[Ve.jsx(s,{className:"h-4 w-4 group-hover:text-blue-600"}),Ve.jsx("span",{className:"font-medium",children:t}),Ve.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:Ve.jsx(U,{className:"h-3 w-3 text-blue-600"})})]},e))}),j&&Ve.jsxs("div",{className:"mt-6 pt-6 border-t",children:[Ve.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Steps"}),Ve.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Organize your form into multiple steps"}),Ve.jsxs("button",{onClick:()=>{var e;const t=((null==(e=null==b?void 0:b.steps)?void 0:e.length)||0)+1;F({title:`Step ${t}`,description:"Please fill out the following information",fields:[]})},className:"w-full flex items-center justify-center space-x-2 p-3 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-md border border-blue-200 hover:border-blue-300 transition-all duration-200",children:[Ve.jsx(U,{className:"h-4 w-4"}),Ve.jsx("span",{children:"Add New Step"})]})]}),Ve.jsxs("div",{className:"mt-6 pt-6 border-t",children:[Ve.jsx("h4",{className:"font-medium text-gray-800 mb-2 text-sm",children:"💡 Quick Tips"}),Ve.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[Ve.jsx("p",{children:"• Click on any field to edit its settings"}),Ve.jsx("p",{children:"• Use Preview to test your form"}),Ve.jsx("p",{children:"• Toggle Multi-Step for complex forms"}),Ve.jsx("p",{children:"• Use templates for quick setup"})]})]})]})}),Ve.jsx("div",{className:"lg:col-span-2",children:Ve.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[Ve.jsxs("div",{className:"p-6 border-b",children:[Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{children:[Ve.jsx("h2",{className:"text-lg font-medium text-gray-900",children:b.title}),b.description&&Ve.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.description})]}),Ve.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:Ve.jsx(z,{className:"h-5 w-5"})})]}),j&&b.steps&&b.steps.length>0&&Ve.jsx("div",{className:"mt-4 flex space-x-2",children:b.steps.map((e,t)=>Ve.jsx("button",{onClick:()=>E(t),className:"px-3 py-2 text-sm rounded-md "+(N===t?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"),children:e.title},t))})]}),Ve.jsx("div",{className:"p-6",children:0===b.fields.length?Ve.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[Ve.jsx(Q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start Building Your Form"}),Ve.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create a custom registration form by adding fields from the sidebar, or get started quickly with a pre-built template."}),Ve.jsxs("div",{className:"flex justify-center space-x-4",children:[Ve.jsx("button",{onClick:()=>l(!0),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Use Template"}),Ve.jsx("button",{onClick:()=>W("text"),className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Add First Field"})]})]}):Ve.jsx("div",{className:"space-y-3 pl-8 relative",children:b.fields.filter(e=>{if(!j||!b.steps)return!0;const t=b.steps[N];return null==t?void 0:t.fields.includes(e.id)}).map((e,t)=>{var s;return Ve.jsxs("div",{className:"group relative",children:[Ve.jsx("div",{className:"absolute -left-8 top-3 text-xs text-gray-400 font-medium bg-gray-100 rounded-full w-5 h-5 flex items-center justify-center",children:t+1}),Ve.jsxs("div",{className:"p-4 border rounded-lg cursor-pointer transition-all duration-200 "+(v===e.id?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300 hover:shadow-sm"),onClick:()=>S(e.id),children:[Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{className:"flex-1",children:[Ve.jsxs("div",{className:"flex items-center gap-2",children:[Ve.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.label,e.required&&Ve.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),Ve.jsx("span",{className:"px-2 py-1 text-xs text-gray-500 bg-gray-100 rounded-full capitalize",children:e.type})]}),e.placeholder&&Ve.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Placeholder: ",e.placeholder]})]}),Ve.jsxs("div",{className:"flex items-center gap-1",children:[t>0&&Ve.jsx("button",{onClick:e=>{e.stopPropagation(),D(t,t-1)},className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Move up",children:Ve.jsx(te,{className:"h-4 w-4"})}),t<b.fields.filter(e=>{if(!j||!b.steps)return!0;const t=b.steps[N];return null==t?void 0:t.fields.includes(e.id)}).length-1&&Ve.jsx("button",{onClick:e=>{e.stopPropagation(),D(t,t+1)},className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Move down",children:Ve.jsx(se,{className:"h-4 w-4"})}),Ve.jsx("button",{onClick:t=>{t.stopPropagation(),P(e.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete field",children:Ve.jsx(R,{className:"h-4 w-4"})})]})]}),Ve.jsx("div",{className:"mt-3 opacity-80",children:"textarea"===e.type?Ve.jsx("textarea",{placeholder:e.placeholder,className:"w-full p-2 text-sm border border-gray-300 rounded-md bg-gray-50",rows:2,disabled:!0}):"select"===e.type?Ve.jsxs("select",{className:"w-full p-2 text-sm border border-gray-300 rounded-md bg-gray-50",disabled:!0,children:[Ve.jsx("option",{children:e.placeholder||"Select an option"}),null==(s=e.options)?void 0:s.slice(0,3).map((e,t)=>Ve.jsx("option",{children:e},t)),e.options&&e.options.length>3&&Ve.jsxs("option",{children:["... and ",e.options.length-3," ","more"]})]}):"radio"===e.type&&e.options?Ve.jsxs("div",{className:"space-y-1",children:[e.options.slice(0,3).map((e,t)=>Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"radio",className:"mr-2",disabled:!0}),Ve.jsx("span",{className:"text-sm text-gray-600",children:e})]},t)),e.options.length>3&&Ve.jsxs("p",{className:"text-xs text-gray-500 pl-5",children:["... and ",e.options.length-3," more options"]})]}):"checkbox"===e.type&&e.options?Ve.jsxs("div",{className:"space-y-1",children:[e.options.slice(0,3).map((e,t)=>Ve.jsxs("label",{className:"flex items-center",children:[Ve.jsx("input",{type:"checkbox",className:"mr-2",disabled:!0}),Ve.jsx("span",{className:"text-sm text-gray-600",children:e})]},t)),e.options.length>3&&Ve.jsxs("p",{className:"text-xs text-gray-500 pl-5",children:["... and ",e.options.length-3," more options"]})]}):Ve.jsx("input",{type:"email"===e.type?"email":"number"===e.type?"number":"url"===e.type?"url":"date"===e.type?"date":"text",placeholder:e.placeholder,className:"w-full p-2 text-sm border border-gray-300 rounded-md bg-gray-50",disabled:!0})})]}),Ve.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:Ve.jsx("div",{className:"flex justify-center mt-2",children:Ve.jsxs("button",{onClick:()=>{const e={id:`field_${Date.now()}`,type:"text",label:"New Field",placeholder:"Enter value",required:!1,options:[]};_(e),S(e.id)},className:"flex items-center gap-1 px-3 py-1 text-xs text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-full border border-blue-200 transition-colors",children:[Ve.jsx(U,{className:"h-3 w-3"}),"Add Field Below"]})})})]},e.id)})})})]})}),Ve.jsx("div",{className:"lg:col-span-1",children:v&&(()=>{const e=b.fields.find(e=>e.id===v);return e?Ve.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 sticky top-24 max-h-[80vh] overflow-y-auto",children:[Ve.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ve.jsx("h3",{className:"font-medium text-gray-900",children:"Edit Field"}),Ve.jsx("button",{onClick:()=>S(null),className:"p-1 text-gray-400 hover:text-gray-600",children:Ve.jsx(f,{className:"h-4 w-4"})})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label"}),Ve.jsx("input",{type:"text",value:e.label,onChange:e=>A(v,{label:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md"})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placeholder"}),Ve.jsx("input",{type:"text",value:e.placeholder||"",onChange:e=>A(v,{placeholder:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md"})]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("input",{type:"checkbox",checked:e.required,onChange:e=>A(v,{required:e.target.checked}),className:"mr-2"}),Ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Required field"})]}),("select"===e.type||"radio"===e.type||"checkbox"===e.type)&&Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),Ve.jsxs("div",{className:"space-y-2",children:[(e.options||[]).map((t,s)=>Ve.jsxs("div",{className:"flex items-center gap-2",children:[Ve.jsx("input",{type:"text",value:t,onChange:t=>{const a=[...e.options||[]];a[s]=t.target.value,A(v,{options:a})},className:"flex-1 p-2 border border-gray-300 rounded-md"}),Ve.jsx("button",{type:"button",className:"text-red-500 px-2 py-1 rounded hover:bg-red-50",onClick:()=>{const t=[...e.options||[]];t.splice(s,1),A(v,{options:t})},title:"Remove option",children:Ve.jsx(R,{className:"h-4 w-4"})})]},s)),Ve.jsx("button",{type:"button",className:"w-full mt-2 py-2 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded border border-blue-200",onClick:()=>{const t=[...e.options||[],""];A(v,{options:t})},children:"Add Option"})]})]})]})]}):null})()})]}):Ve.jsxs("div",{className:"text-center py-12",children:[Ve.jsx(Q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Registration Form"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:"Create a registration form for participants to register for your event."}),Ve.jsx("button",{onClick:async()=>{if(!e)return;const t=`${(null==Y?void 0:Y.title)||"Event"} Registration Form`,s=`Registration form for ${(null==Y?void 0:Y.title)||"this event"}`;await G(e,t,s)},disabled:k,className:"px-6 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:k?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(Z,{className:"h-4 w-4 inline mr-2 animate-spin"}),"Creating..."]}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(U,{className:"h-4 w-4 inline mr-2"}),"Create Registration Form"]})})]})}),i&&Ve.jsx(ca,{templates:y,onClose:()=>l(!1),onSelect:e=>{O(e),l(!1),x(`Template "${e.name}" applied successfully! You can now edit the fields.`),setTimeout(()=>x(null),4e3)}}),b&&c&&Ve.jsx(oa,{form:b,eventId:e,onClose:()=>o(!1)}),m&&Ve.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:Ve.jsxs("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm",children:[Ve.jsx("div",{className:"flex-shrink-0",children:Ve.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:Ve.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),Ve.jsx("p",{className:"text-sm font-medium",children:m}),Ve.jsx("button",{onClick:()=>x(null),className:"flex-shrink-0 text-green-200 hover:text-white",children:Ve.jsx(f,{className:"h-4 w-4"})})]})})]}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event not found"}),Ve.jsxs("p",{className:"text-gray-600 mb-4",children:["Event ID: ",e," | Events loaded: ",u.length]}),Ve.jsx("button",{onClick:()=>t("/dashboard"),className:"text-blue-600 hover:text-blue-800",children:"Return to Dashboard"})]})})}const ma=e=>{const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},xa=()=>{const[e,t]=s.useState([]),[a,r]=s.useState(!0),[i,n]=s.useState(null),l=async()=>{var e;try{r(!0),n(null);const s=await Bs.getUserRegistrations();t((null==(e=s.data)?void 0:e.registrations)||[])}catch(s){n("string"==typeof s?s:"An error occurred")}finally{r(!1)}};s.useEffect(()=>{l()},[]);const o=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case null:return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},m=e=>{var t;return"cancelled"!==e.status&&((null==(t=e.event)?void 0:t.is_paid)?"completed"===e.payment_status:"confirmed"===e.status||null===e.payment_status)};return a?Ve.jsx("div",{className:"flex items-center justify-center min-h-64",children:Ve.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):i?Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ve.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Ve.jsxs("div",{className:"flex",children:[Ve.jsx(ae,{className:"h-5 w-5 text-red-400"}),Ve.jsxs("div",{className:"ml-3",children:[Ve.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading registrations"}),Ve.jsx("p",{className:"mt-1 text-sm text-red-700",children:i||"An error occurred"}),Ve.jsx("button",{onClick:()=>l(),className:"mt-2 text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded",children:"Try again"})]})]})})}):Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ve.jsxs("div",{className:"mb-8",children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Registrations"}),Ve.jsx("p",{className:"text-gray-600",children:"View and manage your event registrations"})]}),e&&0!==e.length?Ve.jsx("div",{className:"space-y-6",children:e.map(e=>{const t=e.event;return t?Ve.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:Ve.jsx("div",{className:"p-6",children:Ve.jsxs("div",{className:"flex items-start justify-between",children:[Ve.jsxs("div",{className:"flex-1 min-w-0",children:[Ve.jsxs("div",{className:"flex items-center mb-2",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.title}),Ve.jsxs("div",{className:"ml-3 flex space-x-2",children:[Ve.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o(e.status)}`,children:e.status}),t.is_paid&&e.payment_status&&Ve.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d(e.payment_status)}`,children:[Ve.jsx(re,{className:"w-3 h-3 mr-1"}),e.payment_status.replace("_"," ")]}),!t.is_paid&&Ve.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Free Event"})]})]}),Ve.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:t.description}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm text-gray-500",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(C,{className:"h-4 w-4 mr-2"}),ma(t.start_date)]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(E,{className:"h-4 w-4 mr-2"}),t.location]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(O,{className:"h-4 w-4 mr-2"}),"Registered ",ma(e.created_at)]})]}),t.is_paid&&t.price&&Ve.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Event Price: $",t.price]})]}),Ve.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[m(e)&&Ve.jsxs(c,{to:`/ticket/${e.id}`,className:"inline-flex items-center px-3 py-2 border border-green-300 shadow-sm text-sm leading-4 font-medium rounded-md text-green-700 bg-white hover:bg-green-50",children:[Ve.jsx(ie,{className:"h-4 w-4 mr-2"}),"View Ticket"]}),t.is_paid&&"pending"===e.payment_status&&Ve.jsxs(c,{to:`/events/${t.id}/payment`,state:{registration:e,amount:t.price||0,message:"Complete your payment to confirm registration"},className:"inline-flex items-center px-3 py-2 border border-blue-300 shadow-sm text-sm leading-4 font-medium rounded-md text-blue-700 bg-white hover:bg-blue-50",children:[Ve.jsx(re,{className:"h-4 w-4 mr-2"}),"Complete Payment"]}),Ve.jsxs(c,{to:`/events/${t.id}`,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[Ve.jsx(J,{className:"h-4 w-4 mr-2"}),"View Event"]}),"cancelled"!==e.status&&!m(e)&&Ve.jsxs("button",{onClick:()=>(async e=>{var t;if(window.confirm("Are you sure you want to cancel your registration for this event?"))try{await Bs.cancelRegistration(e),l()}catch(s){let e="Failed to cancel registration. Please try again.";if(s instanceof Error&&"response"in s){const a=s;e=400===a.status?"Cannot cancel registration for this event. It may have already started or the cancellation deadline has passed.":404===a.status?"Registration not found. It may have already been cancelled.":403===a.status?"You don't have permission to cancel this registration.":(null==(t=a.response)?void 0:t.error)||"Failed to cancel registration. Please try again."}alert(e)}})(e.id),className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50",children:[Ve.jsx(R,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})},e.id):null})}):Ve.jsxs("div",{className:"text-center py-12",children:[Ve.jsx(C,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No registrations yet"}),Ve.jsx("p",{className:"text-gray-500 mb-6",children:"You haven't registered for any events yet."}),Ve.jsx(c,{to:"/events",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700",children:"Browse Events"})]})]})},ua=()=>{const{id:e}=d(),t=n(),[a,r]=s.useState(null),[i,l]=s.useState([]),[c,o]=s.useState(!0),[m,x]=s.useState(null),[u,h]=s.useState("all");s.useEffect(()=>{(async()=>{if(!e)return x("Event ID is required"),void o(!1);try{o(!0),x(null);const[t,s]=await Promise.all([Us.getEventById(e),Bs.getEventRegistrations(e)]);if(!t.success||!t.data)return void x(t.error||"Event not found");r(t.data.event),s.success&&s.data?l(s.data.registrations):x(s.error||"Failed to load registrations")}catch(t){x("Failed to load data")}finally{o(!1)}})()},[e]);const p=e=>{switch(e){case"confirmed":return Ve.jsx(S,{className:"h-5 w-5 text-green-500"});case"pending":return Ve.jsx(O,{className:"h-5 w-5 text-yellow-500"});case"cancelled":return Ve.jsx(ce,{className:"h-5 w-5 text-red-500"});default:return Ve.jsx(O,{className:"h-5 w-5 text-gray-500"})}},g=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=i.filter(e=>"all"===u||e.status===u);return c?Ve.jsx("div",{className:"flex items-center justify-center min-h-64",children:Ve.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):m?Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Ve.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Ve.jsxs("div",{className:"text-red-800",children:[Ve.jsx("h3",{className:"text-lg font-medium",children:"Error"}),Ve.jsx("p",{className:"mt-1",children:m}),Ve.jsx("button",{onClick:()=>t(-1),className:"mt-3 text-sm bg-red-100 hover:bg-red-200 px-3 py-1 rounded",children:"Go Back"})]})})}):a?Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ve.jsxs("div",{className:"mb-8",children:[Ve.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ve.jsxs("button",{onClick:()=>t(`/events/${e}`),className:"flex items-center text-gray-600 hover:text-gray-900",children:[Ve.jsx(I,{className:"h-5 w-5 mr-2"}),"Back to Event"]}),Ve.jsxs("button",{onClick:()=>{if(!i.length)return;const e=[["Name","Email","Phone","Status","Registration Date"].join(","),...f.map(e=>{const t=e.user;return[(null==t?void 0:t.name)||"N/A",(null==t?void 0:t.email)||"N/A",(null==t?void 0:t.phone_number)||"N/A",e.status,ma(e.created_at)].join(",")})].join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`${(null==a?void 0:a.title)||"event"}-registrations.csv`,r.click(),window.URL.revokeObjectURL(s)},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:!f.length,children:[Ve.jsx(ne,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Event Registrations"}),Ve.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:Ve.jsx("div",{className:"flex items-start justify-between",children:Ve.jsxs("div",{className:"flex-1",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:a.title}),Ve.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(C,{className:"h-4 w-4 mr-2"}),ma(a.start_date)]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(E,{className:"h-4 w-4 mr-2"}),a.location]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(y,{className:"h-4 w-4 mr-2"}),i.length," / ",a.capacity," registered"]})]})]})})})]}),Ve.jsx("div",{className:"border-b border-gray-200 mb-6",children:Ve.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"All Registrations"},{key:"confirmed",label:"Confirmed"},{key:"pending",label:"Pending"},{key:"cancelled",label:"Cancelled"}].map(e=>{return Ve.jsxs("button",{onClick:()=>h(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm "+(u===e.key?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label," (",(t=e.key,"all"===t?i.length:i.filter(e=>e.status===t).length),")"]},e.key);var t})})}),0===f.length?Ve.jsxs("div",{className:"text-center py-12",children:[Ve.jsx(y,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No registrations found"}),Ve.jsx("p",{className:"text-gray-500",children:"all"===u?"No one has registered for this event yet.":`No ${u} registrations for this event.`})]}):Ve.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:Ve.jsx("ul",{className:"divide-y divide-gray-200",children:f.map(e=>{var t,s,a;return Ve.jsx("li",{className:"px-6 py-4",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[Ve.jsx("div",{className:"flex-shrink-0",children:p(e.status)}),Ve.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name||(null==(t=e.user)?void 0:t.name)||"Unknown User"}),Ve.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(e.status)}`,children:e.status})]}),Ve.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(P,{className:"h-4 w-4 mr-1"}),e.email||(null==(s=e.user)?void 0:s.email)||"No email"]}),(null==(a=e.user)?void 0:a.phone_number)&&Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(le,{className:"h-4 w-4 mr-1"}),e.user.phone_number]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(C,{className:"h-4 w-4 mr-1"}),"Registered ",ma(e.created_at)]})]})]})]}),Ve.jsx("div",{className:"flex items-center space-x-2",children:e.responses&&Object.keys(e.responses).length>0&&Ve.jsx("button",{onClick:()=>{alert(`Form Data:\n${JSON.stringify(e.responses,null,2)}`)},className:"inline-flex items-center p-2 border border-gray-300 rounded-md text-gray-400 hover:text-gray-500",title:"View Form Data",children:Ve.jsx(Q,{className:"h-4 w-4"})})})]})},e.id)})})})]}):null},ha=()=>{const{id:e}=d(),t=n(),{accessToken:a}=Ss(),[r,i]=s.useState(null),[l,c]=s.useState({total_registrations:0,total_check_ins:0,check_in_rate:"0"}),[o,m]=s.useState([]),[x,u]=s.useState(!0),[h,p]=s.useState(null),[g,f]=s.useState("");s.useEffect(()=>{(async()=>{if(!e)return p("Event ID is required"),void u(!1);try{u(!0),p(null);const t=await Us.getEventById(e);if(!t.success||!t.data)return p(t.error||"Event not found"),void u(!1);i(t.data.event);const s="https://your-backend-domain.com/api",r=await fetch(`${s}/checkin/events/${e}/stats?all=true`,{headers:{Authorization:`Bearer ${a}`}});if(!r.ok)throw new Error("Failed to fetch attendance data");const n=await r.json();c(n.stats),m(n.recent_check_ins||[])}catch(t){p("Failed to load attendance data")}finally{u(!1)}})()},[e,a]);const b=o.filter(e=>e.registration.name.toLowerCase().includes(g.toLowerCase())||e.registration.email.toLowerCase().includes(g.toLowerCase()));return x?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading attendance data..."})]})}):h||!r?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsx("div",{className:"text-center",children:Ve.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[Ve.jsx("h3",{className:"text-lg font-medium text-red-900",children:"Error"}),Ve.jsx("p",{className:"mt-1 text-red-700",children:h}),Ve.jsx("button",{onClick:()=>t(-1),className:"mt-3 text-sm bg-red-100 hover:bg-red-200 px-3 py-1 rounded",children:"Go Back"})]})})}):Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ve.jsxs("div",{className:"mb-8",children:[Ve.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ve.jsxs("button",{onClick:()=>t(`/events/${e}`),className:"flex items-center text-gray-600 hover:text-gray-900",children:[Ve.jsx(I,{className:"h-5 w-5 mr-2"}),"Back to Event"]}),Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsxs("button",{onClick:()=>t(`/events/${e}/checkin`),className:"inline-flex items-center px-4 py-2 border border-primary-600 rounded-md shadow-sm text-sm font-medium text-primary-600 bg-white hover:bg-primary-50",children:[Ve.jsx(j,{className:"h-4 w-4 mr-2"}),"Scan QR Code"]}),Ve.jsxs("button",{onClick:()=>{if(!o.length)return;const e=o.map(e=>[e.registration.name,e.registration.email,new Date(e.checked_in_at).toLocaleString(),e.location||"N/A",e.checked_in_by_user.name]),t=[["Name","Email","Check-in Time","Location","Checked In By"].join(","),...e.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),s=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=`${(null==r?void 0:r.title)||"event"}-attendance-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:!o.length,children:[Ve.jsx(ne,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Attendance Tracking"}),Ve.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:Ve.jsx("div",{className:"flex items-start justify-between",children:Ve.jsxs("div",{className:"flex-1",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:r.title}),Ve.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(C,{className:"h-4 w-4 mr-2"}),ma(r.start_date)]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(E,{className:"h-4 w-4 mr-2"}),r.location]})]})]})})})]}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-blue-100 rounded-md",children:Ve.jsx(y,{className:"h-6 w-6 text-blue-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Registrations"}),Ve.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_registrations})]})]})}),Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-green-100 rounded-md",children:Ve.jsx(v,{className:"h-6 w-6 text-green-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Check-ins"}),Ve.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_check_ins})]})]})}),Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-purple-100 rounded-md",children:Ve.jsx(oe,{className:"h-6 w-6 text-purple-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Check-in Rate"}),Ve.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[l.check_in_rate,"%"]})]})]})})]}),Ve.jsx("div",{className:"mb-6",children:Ve.jsxs("div",{className:"relative",children:[Ve.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ve.jsx(_,{className:"h-5 w-5 text-gray-400"})}),Ve.jsx("input",{type:"text",placeholder:"Search by name or email...",value:g,onChange:e=>f(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})}),0===b.length?Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[Ve.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:g?"No matching records found":"No check-ins yet"}),Ve.jsx("p",{className:"text-gray-500",children:g?"Try adjusting your search terms":"Participants will appear here once they check in"})]}):Ve.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[Ve.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:Ve.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Check-in Records (",b.length,")"]})}),Ve.jsx("ul",{className:"divide-y divide-gray-200",children:b.map(e=>Ve.jsx("li",{className:"px-6 py-4",children:Ve.jsx("div",{className:"flex items-center justify-between",children:Ve.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[Ve.jsx("div",{className:"flex-shrink-0",children:Ve.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:Ve.jsx(v,{className:"h-6 w-6 text-green-600"})})}),Ve.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.registration.name}),Ve.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Checked In"})]}),Ve.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[Ve.jsx("div",{className:"flex items-center",children:Ve.jsx("span",{children:e.registration.email})}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(O,{className:"h-4 w-4 mr-1"}),new Date(e.checked_in_at).toLocaleString()]}),e.location&&Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(E,{className:"h-4 w-4 mr-1"}),e.location]})]}),Ve.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:["Checked in by: ",e.checked_in_by_user.name]})]})]})})},e.id))})]})]})};function pa(e){var t,s,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(s=pa(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function ga(){for(var e,t,s=0,a="";s<arguments.length;)(e=arguments[s++])&&(t=fa(e))&&(a&&(a+=" "),a+=t);return a}function fa(e){if("string"==typeof e)return e;for(var t,s="",a=0;a<e.length;a++)e[a]&&(t=fa(e[a]))&&(s&&(s+=" "),s+=t);return s}function ba(e){var t=function(e){var t=e.theme,s=e.prefix,a={nextPart:new Map,validators:[]},r=function(e,t){if(!t)return e;return e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){var s=e[0],a=e[1];return[t+s,a]})):e})]})}(Object.entries(e.classGroups),s);return r.forEach(function(e){var s=e[0];ja(e[1],a,s,t)}),a}(e),s=e.conflictingClassGroups,a=e.conflictingClassGroupModifiers,r=void 0===a?{}:a;return{getClassGroupId:function(e){var s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),ya(s,t)||function(e){if(va.test(e)){var t=va.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}}(e)},getConflictingClassGroupIds:function(e,t){var a=s[e]||[];return t&&r[e]?[].concat(a,r[e]):a}}}function ya(e,t){var s;if(0===e.length)return t.classGroupId;var a=e[0],r=t.nextPart.get(a),i=r?ya(e.slice(1),r):void 0;if(i)return i;if(0!==t.validators.length){var n=e.join("-");return null==(s=t.validators.find(function(e){return(0,e.validator)(n)}))?void 0:s.classGroupId}}var va=/^\[(.+)\]$/;function ja(e,t,s,a){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void ja(e(a),t,s,a):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(function(e){var r=e[0];ja(e[1],Na(t,r),s,a)})}else{(""===e?t:Na(t,e)).classGroupId=s}})}function Na(e,t){var s=e;return t.split("-").forEach(function(e){s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s}function wa(e){if(e<1)return{get:function(){},set:function(){}};var t=0,s=new Map,a=new Map;function r(r,i){s.set(r,i),++t>e&&(t=0,a=s,s=new Map)}return{get:function(e){var t=s.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(r(e,t),t):void 0},set:function(e,t){s.has(e)?s.set(e,t):r(e,t)}}}function ka(e){var t=e.separator||":",s=1===t.length,a=t[0],r=t.length;return function(e){for(var i,n=[],l=0,c=0,o=0;o<e.length;o++){var d=e[o];if(0===l){if(d===a&&(s||e.slice(o,o+r)===t)){n.push(e.slice(c,o)),c=o+r;continue}if("/"===d){i=o;continue}}"["===d?l++:"]"===d&&l--}var m=0===n.length?e:e.substring(c),x=m.startsWith("!");return{modifiers:n,hasImportantModifier:x,baseClassName:x?m.substring(1):m,maybePostfixModifierPosition:i&&i>c?i-c:void 0}}}var Sa=/\s+/;function Ca(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var a,r,i,n=function(e){var s=t[0],c=t.slice(1).reduce(function(e,t){return t(e)},s());return a=function(e){return{cache:wa(e.cacheSize),splitModifiers:ka(e),...ba(e)}}(c),r=a.cache.get,i=a.cache.set,n=l,l(e)};function l(e){var t=r(e);if(t)return t;var s=function(e,t){var s=t.splitModifiers,a=t.getClassGroupId,r=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(Sa).map(function(e){var t=s(e),r=t.modifiers,i=t.hasImportantModifier,n=t.baseClassName,l=t.maybePostfixModifierPosition,c=a(l?n.substring(0,l):n),o=Boolean(l);if(!c){if(!l)return{isTailwindClass:!1,originalClassName:e};if(!(c=a(n)))return{isTailwindClass:!1,originalClassName:e};o=!1}var d=function(e){if(e.length<=1)return e;var t=[],s=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,s.sort().concat([e])),s=[]):s.push(e)}),t.push.apply(t,s.sort()),t}(r).join(":");return{isTailwindClass:!0,modifierId:i?d+"!":d,classGroupId:c,originalClassName:e,hasPostfixModifier:o}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,s=e.classGroupId,a=e.hasPostfixModifier,n=t+s;return!i.has(n)&&(i.add(n),r(s,a).forEach(function(e){return i.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}(e,a);return i(e,s),s}return function(){return n(ga.apply(null,arguments))}}function Ea(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var _a=/^\[(?:([a-z-]+):)?(.+)\]$/i,Aa=/^\d+\/\d+$/,Pa=new Set(["px","full","screen"]),Da=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ta=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ra=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Fa(e){return Ma(e)||Pa.has(e)||Aa.test(e)||Ia(e)}function Ia(e){return Qa(e,"length",Wa)}function La(e){return Qa(e,"size",Ha)}function za(e){return Qa(e,"position",Ha)}function $a(e){return Qa(e,"url",Xa)}function Oa(e){return Qa(e,"number",Ma)}function Ma(e){return!Number.isNaN(Number(e))}function Ua(e){return e.endsWith("%")&&Ma(e.slice(0,-1))}function qa(e){return Ja(e)||Qa(e,"number",Ja)}function Ba(e){return _a.test(e)}function Ga(){return!0}function Va(e){return Da.test(e)}function Ya(e){return Qa(e,"",Za)}function Qa(e,t,s){var a=_a.exec(e);return!!a&&(a[1]?a[1]===t:s(a[2]))}function Wa(e){return Ta.test(e)}function Ha(){return!1}function Xa(e){return e.startsWith("url(")}function Ja(e){return Number.isInteger(Number(e))}function Za(e){return Ra.test(e)}function Ka(){var e=Ea("colors"),t=Ea("spacing"),s=Ea("blur"),a=Ea("brightness"),r=Ea("borderColor"),i=Ea("borderRadius"),n=Ea("borderSpacing"),l=Ea("borderWidth"),c=Ea("contrast"),o=Ea("grayscale"),d=Ea("hueRotate"),m=Ea("invert"),x=Ea("gap"),u=Ea("gradientColorStops"),h=Ea("gradientColorStopPositions"),p=Ea("inset"),g=Ea("margin"),f=Ea("opacity"),b=Ea("padding"),y=Ea("saturate"),v=Ea("scale"),j=Ea("sepia"),N=Ea("skew"),w=Ea("space"),k=Ea("translate"),S=function(){return["auto",Ba,t]},C=function(){return[Ba,t]},E=function(){return["",Fa]},_=function(){return["auto",Ma,Ba]},A=function(){return["","0",Ba]},P=function(){return[Ma,Oa]},D=function(){return[Ma,Ba]};return{cacheSize:500,theme:{colors:[Ga],spacing:[Fa],blur:["none","",Va,Ba],brightness:P(),borderColor:[e],borderRadius:["none","","full",Va,Ba],borderSpacing:C(),borderWidth:E(),contrast:P(),grayscale:A(),hueRotate:D(),invert:A(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[Ua,Ia],inset:S(),margin:S(),opacity:P(),padding:C(),saturate:P(),scale:P(),sepia:A(),skew:D(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",Ba]}],container:["container"],columns:[{columns:[Va]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[Ba])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qa]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ba]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",qa]}],"grid-cols":[{"grid-cols":[Ga]}],"col-start-end":[{col:["auto",{span:["full",qa]},Ba]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[Ga]}],"row-start-end":[{row:["auto",{span:[qa]},Ba]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ba]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ba]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ba,t]}],"min-w":[{"min-w":["min","max","fit",Ba,Fa]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Va]},Va,Ba]}],h:[{h:[Ba,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ba,Fa]}],"max-h":[{"max-h":[Ba,t,"min","max","fit"]}],"font-size":[{text:["base",Va,Ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Oa]}],"font-family":[{font:[Ga]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ba]}],"line-clamp":[{"line-clamp":["none",Ma,Oa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ba,Fa]}],"list-image":[{"list-image":["none",Ba]}],"list-style-type":[{list:["none","disc","decimal",Ba]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Fa]}],"underline-offset":[{"underline-offset":["auto",Ba,Fa]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ba]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ba]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[za])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",La]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$a]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[u]}],"gradient-via":[{via:[u]}],"gradient-to":[{to:[u]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[Ba,Fa]}],"outline-w":[{outline:[Fa]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[Fa]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Va,Ya]}],"shadow-color":[{shadow:[Ga]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[a]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Va,Ba]}],grayscale:[{grayscale:[o]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[y]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[o]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[n]}],"border-spacing-x":[{"border-spacing-x":[n]}],"border-spacing-y":[{"border-spacing-y":[n]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ba]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",Ba]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ba]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[qa,Ba]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ba]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ba]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ba]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Fa,Oa]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var er=Ca(Ka);function tr(...e){return er(function(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=pa(e))&&(a&&(a+=" "),a+=t);return a}(e))}const sr=({className:e,variant:t="default",size:s="default",children:a,...r})=>Ve.jsx("button",{className:tr("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-blue-600 text-white hover:bg-blue-700":"default"===t,"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground":"outline"===t,"bg-red-600 text-white hover:bg-red-700":"destructive"===t,"hover:bg-accent hover:text-accent-foreground":"ghost"===t},{"h-10 py-2 px-4":"default"===s,"h-9 px-3":"sm"===s,"h-11 px-8":"lg"===s},e),...r,children:a}),ar=()=>{const{id:e}=d(),t=n(),[a,r]=s.useState([]),[i,l]=s.useState([]),[c,o]=s.useState([]),[m,x]=s.useState([]),[u,h]=s.useState("generated"),[p,g]=s.useState(""),[f,b]=s.useState([]),[y,v]=s.useState(!1),[j,N]=s.useState(!0),[w,k]=s.useState(null),[C,E]=s.useState(!1),[_,A]=s.useState(null),[P,D]=s.useState(null),[T,F]=s.useState(""),[I,$]=s.useState("powerpoint"),[O,M]=s.useState(!1);s.useEffect(()=>{q()},[e]);const U=(e,t)=>{k({type:e,text:t}),setTimeout(()=>k(null),5e3)},q=async()=>{var t,s,a,i;try{N(!0);const[n,c,d,m]=await Promise.all([_s.get(`/certificates/templates?eventId=${e}`),_s.get("/certificates/data-fields"),_s.get(`/certificates/events/${e}/participants`),_s.get(`/certificates/events/${e}/certificates`)]),u=(null==(t=n.data)?void 0:t.data)||n.data||[];r(u);const h=(null==(s=c.data)?void 0:s.data)||c.data||[];l(h);const p=(null==(a=d.data)?void 0:a.data)||d.data||[];o(p);const g=(null==(i=m.data)?void 0:i.data)||m.data||[];x(g)}catch(n){U("error","Failed to load certificate data")}finally{N(!1)}};return j?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading certificate data..."})]})}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Ve.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Certificate Management"}),Ve.jsx(sr,{onClick:()=>t(-1),variant:"outline",children:"Back to Event"})]}),w&&Ve.jsx("div",{className:"p-4 rounded-lg "+("success"===w.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:Ve.jsxs("div",{className:"flex items-center gap-2",children:["success"===w.type?Ve.jsx(S,{className:"h-5 w-5"}):Ve.jsx(de,{className:"h-5 w-5"}),w.text]})}),Ve.jsxs("div",{className:"flex space-x-2 border-b mb-6",children:[Ve.jsx("button",{className:"px-4 py-2 font-medium border-b-2 "+("generate"===u?"border-blue-600 text-blue-700":"border-transparent text-gray-500"),onClick:()=>h("generate"),children:"Generate Certificates"}),Ve.jsx("button",{className:"px-4 py-2 font-medium border-b-2 "+("generated"===u?"border-blue-600 text-blue-700":"border-transparent text-gray-500"),onClick:()=>h("generated"),children:"Generated Certificates"})]}),"generated"===u&&Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Ve.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Participants with Certificates"}),0===m.length?Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx(de,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ve.jsx("p",{className:"text-gray-600",children:"No certificates have been generated yet."})]}):Ve.jsx("div",{className:"overflow-x-auto",children:Ve.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ve.jsx("thead",{className:"bg-gray-50",children:Ve.jsxs("tr",{children:[Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Participant"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Verification Code"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Generated Date"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email Status"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),Ve.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(t=>{var s,a;return Ve.jsxs("tr",{children:[Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:(null==(s=t.registrations)?void 0:s.name)||"Unknown"}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null==(a=t.registrations)?void 0:a.email)||"Unknown"}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ve.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono",children:t.verification_code})}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.email_sent?Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Sent"}),t.email_sent_at&&Ve.jsx("span",{className:"ml-2 text-xs text-gray-400",children:new Date(t.email_sent_at).toLocaleDateString()})]}):Ve.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Sent"})}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ve.jsxs("div",{className:"flex gap-2",children:[Ve.jsx(sr,{size:"sm",variant:"outline",onClick:()=>{t.file_url?window.open(t.file_url,"_blank"):U("error","Certificate file not available")},children:"View"}),Ve.jsx(sr,{size:"sm",variant:"outline",onClick:async()=>{try{await _s.post(`/certificates/events/${e}/email`,{certificateIds:[t.id]}),U("success","Certificate emailed successfully")}catch(s){U("error","Failed to email certificate")}},children:"Email"})]})})]},t.id)})})]})})]}),"generate"===u&&Ve.jsxs(Ve.Fragment,{children:[Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[Ve.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[Ve.jsx(me,{className:"h-5 w-5"}),"Upload New Template"]}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name"}),Ve.jsx("input",{type:"text",value:T,onChange:e=>F(e.target.value),placeholder:"Enter template name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Type"}),Ve.jsxs("select",{value:I,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ve.jsx("option",{value:"powerpoint",children:"PowerPoint (.pptx)"}),Ve.jsx("option",{value:"canvas",children:"Canvas (Programmatic)"})]})]}),Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template File"}),Ve.jsx("input",{type:"file",accept:".pptx,.png,.jpg,.jpeg",onChange:e=>{var t;return D((null==(t=e.target.files)?void 0:t[0])||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),Ve.jsx(sr,{onClick:async()=>{var t,s,a,r;if(P&&T)try{M(!0);const a=new FormData;a.append("template",P),a.append("name",T),a.append("type",I),e&&a.append("eventId",e);const r=(await _s.post("/certificates/templates",a)).data;U("success",(null==(t=null==r?void 0:r.data)?void 0:t.message)||"Template uploaded successfully"),D(null),F(""),$("powerpoint"),await q(),(null==(s=null==r?void 0:r.data)?void 0:s.placeholders)&&r.data.placeholders.length>0&&(A(r.data.template),E(!0))}catch(i){U("error",(null==(r=null==(a=i.response)?void 0:a.data)?void 0:r.message)||"Failed to upload template")}finally{M(!1)}else U("error","Please select a file and provide a template name")},disabled:O||!P||!T,className:"w-full md:w-auto",children:O?"Uploading...":"Upload Template"})]}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[Ve.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Available Templates"}),0===a.length?Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx(de,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ve.jsx("p",{className:"text-gray-600",children:"No templates available. Upload a template to get started."})]}):Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Template for Generation"}),Ve.jsxs("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ve.jsx("option",{value:"",children:"Choose a template"}),a.map(e=>Ve.jsxs("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))]})]}),Ve.jsx("div",{className:"overflow-x-auto",children:Ve.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ve.jsx("thead",{className:"bg-gray-50",children:Ve.jsxs("tr",{children:[Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Placeholders"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),Ve.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>{var t,s;const a=(null==(t=e.extracted_placeholders)?void 0:t.length)||0,r=Object.values(e.placeholder_mapping||{}).filter(Boolean).length,i=0===a||a===r;return Ve.jsxs("tr",{children:[Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.name}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ve.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("powerpoint"===e.type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.type})}),Ve.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:a>0?Ve.jsxs("div",{className:"space-y-1",children:[Ve.jsxs("div",{className:"font-medium",children:[r,"/",a," mapped"]}),null==(s=e.extracted_placeholders)?void 0:s.map((t,s)=>{var a;const r=null==(a=e.placeholder_mapping)?void 0:a[t];return Ve.jsxs("div",{className:"text-xs",children:[Ve.jsx("code",{className:"bg-gray-100 px-1 rounded",children:t}),r?Ve.jsxs("span",{className:"text-green-600 ml-1",children:["→ ",r]}):Ve.jsx("span",{className:"text-red-500 ml-1",children:"→ unmapped"})]},s)})]}):"None"}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ve.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(i?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:i?"Ready":"Needs Configuration"})}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ve.jsxs("div",{className:"flex gap-2",children:[a>0&&Ve.jsx("button",{onClick:()=>{A(e),E(!0)},className:"text-blue-600 hover:text-blue-900",title:i?"Edit mapping":"Configure mapping",children:i?Ve.jsx(L,{className:"h-4 w-4"}):Ve.jsx(z,{className:"h-4 w-4"})}),Ve.jsx("button",{onClick:()=>(async e=>{var t,s;if(confirm("Are you sure you want to delete this template?"))try{await _s.delete(`/certificates/templates/${e}`),U("success","Template deleted successfully"),await q()}catch(a){U("error",(null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Failed to delete template")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete template",children:Ve.jsx(R,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Ve.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Select Participants (",c.length," eligible)"]}),0===c.length?Ve.jsxs("div",{className:"text-center py-8",children:[Ve.jsx(de,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ve.jsx("p",{className:"text-gray-600",children:"No eligible participants found. Only participants who attended the event can receive certificates."})]}):Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{className:"flex gap-2 items-center",children:[Ve.jsx(sr,{size:"sm",variant:"outline",onClick:()=>b(c.map(e=>e.id)),children:"Select All"}),Ve.jsx(sr,{size:"sm",variant:"outline",onClick:()=>b([]),children:"Clear Selection"}),Ve.jsx(sr,{size:"sm",disabled:0===f.length||!p||y,onClick:async()=>{var t,s;if(p)try{v(!0);const t=(await _s.post(`/certificates/events/${e}/generate`,{templateId:p,participantIds:f.length>0?f:void 0})).data,s=null==t?void 0:t.summary;U("success",`Generated ${(null==s?void 0:s.successful)||0} certificates successfully${(null==s?void 0:s.failed)>0?`, ${s.failed} failed`:""}`),b([]),await q()}catch(a){U("error",(null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Failed to generate certificates")}finally{v(!1)}else U("error","Please select a template")},children:y?"Generating...":`Generate Certificates (${f.length})`})]}),Ve.jsx("div",{className:"overflow-x-auto",children:Ve.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ve.jsx("thead",{className:"bg-gray-50",children:Ve.jsxs("tr",{children:[Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Select"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),Ve.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Registration Date"})]})}),Ve.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>m.some(t=>t.registration_id===e.registration_id)?null:Ve.jsxs("tr",{children:[Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ve.jsx("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>{return t=e.id,void b(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"rounded"})}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.name}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),Ve.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.registration_date).toLocaleDateString()})]},e.id))})]})})]})]})]}),C&&_?Ve.jsx(rr,{template:_,dataFields:i,onSave:async e=>{var t,s;if(_)try{await _s.put(`/certificates/templates/${_.id}/mapping`,{placeholderMapping:e}),U("success","Placeholder mapping updated successfully"),E(!1),A(null),await q()}catch(a){U("error",(null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Failed to update mapping")}},onClose:()=>{E(!1),A(null)}}):null]})})},rr=({template:e,dataFields:t,onSave:a,onClose:r})=>{var i;const[n,l]=s.useState(e.placeholder_mapping||{}),c=t.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return Ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Ve.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto m-4",children:[Ve.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ve.jsx("h2",{className:"text-2xl font-bold",children:"Configure Placeholder Mapping"}),Ve.jsx(sr,{variant:"outline",onClick:r,children:"Close"})]}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:"Map the placeholders found in your template to data fields from the database."}),Ve.jsx("div",{className:"space-y-4",children:null==(i=e.extracted_placeholders)?void 0:i.map(e=>Ve.jsxs("div",{className:"border rounded-lg p-4",children:[Ve.jsxs("label",{className:"block text-lg font-medium mb-2",children:["Placeholder:"," ",Ve.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"{{"+e+"}}"})]}),Ve.jsxs("select",{value:n[e]||"",onChange:t=>l(s=>({...s,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ve.jsx("option",{value:"",children:"Select a data field"}),Object.entries(c).map(([e,t])=>Ve.jsx("optgroup",{label:e.toUpperCase(),children:t.map(e=>Ve.jsxs("option",{value:e.key,children:[e.label," - ",e.description,e.example&&` (e.g., ${e.example})`]},e.key))},e))]})]},e))}),Ve.jsxs("div",{className:"flex gap-2 mt-6",children:[Ve.jsx(sr,{onClick:()=>{a(n)},className:"flex-1",children:"Save Mapping"}),Ve.jsx(sr,{variant:"outline",onClick:r,children:"Cancel"})]})]})})},ir=()=>{const[e,t]=s.useState([]),[a,r]=s.useState(!0),[i,n]=s.useState(null);s.useEffect(()=>{l()},[]);const l=async()=>{var e;try{r(!0),n(null);const s=await _s.get("/certificates/events"),a=(null==(e=s.data)?void 0:e.data)||s.data||[];t(a)}catch(s){n("Failed to load events")}finally{r(!1)}};return a?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx(xe,{className:"h-12 w-12 text-blue-600 animate-spin mx-auto mb-4"}),Ve.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Ve.jsxs("div",{className:"max-w-7xl mx-auto",children:[Ve.jsxs("div",{className:"mb-8",children:[Ve.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Ve.jsx(N,{className:"h-8 w-8 text-blue-600"}),Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Certificate Management"})]}),Ve.jsx("p",{className:"text-gray-600",children:"Select an event to generate and manage certificates for participants"})]}),i&&Ve.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:Ve.jsxs("div",{className:"flex items-center gap-2",children:[Ve.jsx(de,{className:"h-5 w-5 text-red-400"}),Ve.jsx("p",{className:"text-red-700",children:i})]})}),0===e.length?Ve.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[Ve.jsx(N,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Events Available"}),Ve.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any events that can generate certificates yet."}),Ve.jsx(c,{to:"/events/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create New Event"})]}):Ve.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>{const t=new Date>new Date(e.end_date),s=t;return Ve.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden",children:Ve.jsxs("div",{className:"p-6",children:[Ve.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ve.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(t?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(S,{className:"w-3 h-3 mr-1"}),"Completed"]}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(O,{className:"w-3 h-3 mr-1"}),"Ongoing"]})}),e.certificates_generated&&Ve.jsxs("span",{className:"text-xs text-gray-500",children:[e.certificates_generated," certificates"]})]}),Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),Ve.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[Ve.jsxs("div",{className:"flex items-center gap-2",children:[Ve.jsx(C,{className:"w-4 h-4"}),Ve.jsxs("span",{children:[new Date(e.start_date).toLocaleDateString()," -"," ",new Date(e.end_date).toLocaleDateString()]})]}),Ve.jsxs("div",{className:"flex items-center gap-2",children:[Ve.jsx(y,{className:"w-4 h-4"}),Ve.jsxs("span",{children:[e.registrations_count||0," participants"]})]}),e.location&&Ve.jsxs("div",{className:"flex items-center gap-2",children:[Ve.jsx(E,{className:"w-4 h-4"}),Ve.jsx("span",{className:"line-clamp-1",children:e.location})]})]}),e.description&&Ve.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description}),Ve.jsx("div",{className:"pt-4 border-t border-gray-200",children:s?Ve.jsxs(c,{to:`/certificates/${e.id}`,className:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[Ve.jsx(N,{className:"w-4 h-4 mr-2"}),"Manage Certificates"]}):Ve.jsxs("div",{className:"text-center",children:[Ve.jsxs("button",{disabled:!0,className:"w-full inline-flex items-center justify-center px-4 py-2 bg-gray-100 text-gray-400 text-sm font-medium rounded-lg cursor-not-allowed",children:[Ve.jsx(O,{className:"w-4 h-4 mr-2"}),"Event Must End First"]}),Ve.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Certificates available after event completion"})]})})]})},e.id)})})]})})};class nr{static async getPastEvents(){return _s.get("/certificates/events")}static async getEventCertificates(e){return _s.get(`/certificates/event/${e}`)}static async generateCertificates(e,t){return _s.post(`/certificates/events/${e}/generate`,{participantIds:null==t?void 0:t.participantIds,templateId:null==t?void 0:t.templateId})}static async getCertificates(e){return _s.get(`/certificates/events/${e}/certificates`)}static async emailCertificates(e,t){return _s.post(`/certificates/events/${e}/email`,{certificateIds:null==t?void 0:t.certificateIds,message:null==t?void 0:t.message})}static async verifyCertificate(e){return _s.get(`/certificates/verify/${e}`)}static downloadCertificate(e){return`https://your-backend-domain.com/api/certificates/download/${e}`}}function lr(){const[e,t]=s.useState(""),[a,r]=s.useState(null),[i,n]=s.useState(!1),[l,c]=s.useState(null);return Ve.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:Ve.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ve.jsxs("div",{className:"text-center mb-12",children:[Ve.jsx(N,{className:"h-16 w-16 text-blue-600 mx-auto mb-6"}),Ve.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Certificate Verification"}),Ve.jsx("p",{className:"text-xl text-gray-600",children:"Verify the authenticity of event participation certificates"})]}),Ve.jsx("div",{className:"bg-white shadow-lg rounded-lg p-8 mb-8",children:Ve.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.trim())try{n(!0),c(null),r(null);const t=await nr.verifyCertificate(e.trim());t.success&&t.data?r(t.data):c(t.error||"Certificate not found")}catch(s){c("Failed to verify certificate")}finally{n(!1)}else c("Please enter a certificate code")},className:"space-y-6",children:[Ve.jsxs("div",{children:[Ve.jsx("label",{htmlFor:"certificate-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Certificate Code"}),Ve.jsxs("div",{className:"flex space-x-4",children:[Ve.jsx("input",{type:"text",id:"certificate-code",value:e,onChange:e=>t(e.target.value),placeholder:"Enter certificate code (e.g., CERT-ABC12345)",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:i}),Ve.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:i?Ve.jsx(xe,{className:"h-5 w-5 animate-spin"}):Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(_,{className:"h-5 w-5 mr-2"}),"Verify"]})})]})]}),Ve.jsx("div",{className:"text-sm text-gray-500",children:Ve.jsx("p",{children:"Enter the certificate code found on your participation certificate to verify its authenticity. Certificate codes are in the format: CERT-XXXXXXXX"})})]})}),l&&Ve.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-8",children:Ve.jsxs("div",{className:"flex",children:[Ve.jsx(ce,{className:"h-5 w-5 text-red-400 mr-2"}),Ve.jsx("p",{className:"text-red-700",children:l})]})}),a&&Ve.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:a.valid&&a.certificate?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx("div",{className:"bg-green-50 border-b border-green-200 p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(S,{className:"h-8 w-8 text-green-500 mr-3"}),Ve.jsxs("div",{children:[Ve.jsx("h2",{className:"text-2xl font-bold text-green-900",children:"Certificate Verified ✓"}),Ve.jsx("p",{className:"text-green-700",children:"This certificate is authentic and valid"})]})]})}),Ve.jsxs("div",{className:"p-6",children:[Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Participant Information"}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(p,{className:"h-5 w-5 text-gray-400 mr-3"}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.participantName})]})]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(P,{className:"h-5 w-5 text-gray-400 mr-3"}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.participantEmail})]})]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(N,{className:"h-5 w-5 text-gray-400 mr-3"}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm text-gray-500",children:"Certificate Code"}),Ve.jsx("p",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded inline-block",children:a.certificate.code})]})]})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Event Information"}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm text-gray-500",children:"Event Title"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.event.title})]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(C,{className:"h-5 w-5 text-gray-400 mr-3"}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm text-gray-500",children:"Event Date"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:new Date(a.certificate.event.date).toLocaleDateString()})]})]}),a.certificate.event.location&&Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(E,{className:"h-5 w-5 text-gray-400 mr-3"}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.event.location})]})]}),Ve.jsxs("div",{children:[Ve.jsx("p",{className:"text-sm text-gray-500",children:"Issued Date"}),Ve.jsx("p",{className:"font-semibold text-gray-900",children:new Date(a.certificate.issuedAt).toLocaleDateString()})]})]})]}),Ve.jsx("div",{className:"mt-8 pt-6 border-t",children:Ve.jsxs("button",{onClick:()=>{if(null==a?void 0:a.certificate){const e=nr.downloadCertificate(a.certificate.code);window.open(e,"_blank")}},className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 flex items-center mx-auto",children:[Ve.jsx(ne,{className:"h-5 w-5 mr-2"}),"Download Certificate"]})})]})]}):Ve.jsx("div",{className:"bg-red-50 p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(ce,{className:"h-8 w-8 text-red-500 mr-3"}),Ve.jsxs("div",{children:[Ve.jsx("h2",{className:"text-2xl font-bold text-red-900",children:"Certificate Not Found"}),Ve.jsx("p",{className:"text-red-700",children:"The certificate code you entered is not valid or does not exist in our system."})]})]})})}),!a&&!l&&Ve.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-6",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"How to Verify Your Certificate"}),Ve.jsxs("ul",{className:"text-blue-800 space-y-2",children:[Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"1"}),"Locate your certificate code on your participation certificate"]}),Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"2"}),"Enter the complete code in the field above (format: CERT-XXXXXXXX)"]}),Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"3"}),'Click "Verify" to check the certificate\'s authenticity']}),Ve.jsxs("li",{className:"flex items-start",children:[Ve.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"4"}),"Download the verified certificate if needed"]})]})]})]})})}function cr({onScan:e,isScanning:t,setIsScanning:a}){const[r,i]=s.useState(null),[n,l]=s.useState(!1),[c,o]=s.useState(""),[d,m]=s.useState(null),x=s.useRef(0),u=e=>{const t="success"===e.type?1800:2e3;setTimeout(()=>{i(null)},t)},h=async t=>{var s,a,r,n,c,o,d,m,x;l(!0),i(null);try{const a=await e(t),r={type:"success",message:"✅ Check-in successful!",participantName:(null==(s=null==a?void 0:a.participant)?void 0:s.name)||(null==a?void 0:a.name)};return i(r),void u(r)}catch(h){h.status;let e="❌ Check-in failed - Please try again",t="error";(null==(a=h.message)?void 0:a.includes("already checked in"))?(e="⚠️ Participant already checked in",t="duplicate"):(null==(r=h.message)?void 0:r.includes("Registration not found"))?e="❌ Invalid QR code - This registration was not found for this event":(null==(n=h.message)?void 0:n.includes("not found"))?e="❌ Registration not found - Please check the QR code":(null==(c=h.message)?void 0:c.includes("Authentication"))?e="🔐 Authentication error - Please refresh and login again":(null==(o=h.message)?void 0:o.includes("401"))?e="🔐 Session expired - Please refresh and login again":(null==(d=h.message)?void 0:d.includes("403"))||(null==(m=h.message)?void 0:m.includes("Access denied"))?e="🚫 Access denied - You don't have check-in permissions":(null==(x=h.message)?void 0:x.includes("different event"))?e="🎫 Wrong event - This QR code is for a different event":h.message&&(e=h.message);const s={type:t,message:e};i(s),u(s)}finally{l(!1)}};return Ve.jsxs("div",{className:"qr-scanner-container",children:[Ve.jsx("div",{className:"scanner-header mb-4",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"QR Code Scanner"}),Ve.jsx("div",{className:"flex items-center gap-2",children:t?Ve.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[Ve.jsx(ue,{className:"w-4 h-4"}),Ve.jsx("span",{className:"text-sm font-medium",children:"Active"})]}):Ve.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[Ve.jsx(he,{className:"w-4 h-4"}),Ve.jsx("span",{className:"text-sm font-medium",children:"Inactive"})]})})]})}),Ve.jsx("div",{className:"scanner-controls mb-4",children:Ve.jsx("div",{className:"flex gap-2",children:t?Ve.jsxs("button",{onClick:()=>{a(!1)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[Ve.jsx(he,{className:"w-4 h-4"}),"Stop Scanner"]}):Ve.jsxs("button",{onClick:()=>{a(!0),m(null),i(null)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[Ve.jsx(ue,{className:"w-4 h-4"}),"Start Scanner"]})})}),Ve.jsx("div",{className:"scanner-display",children:t?Ve.jsxs("div",{className:"scanner-viewport relative",children:[Ve.jsx(Ae,{onScan:e=>{var t,s;let r="";if(Array.isArray(e)&&e.length>0?r=(null==(t=e[0])?void 0:t.rawValue)||(null==(s=e[0])?void 0:s.text)||e[0]:"string"==typeof e?r=e:(null==e?void 0:e.rawValue)?r=e.rawValue:(null==e?void 0:e.text)&&(r=e.text),!r)return;Date.now()-x.current<100||r===c&&n||(o(r),setTimeout(()=>{a(!1),setTimeout(()=>{a(!0),m(null)},100)},500),h(r))},onError:e=>{const t="string"==typeof e?e:(null==e?void 0:e.toString())||"Camera access failed";t.includes("media-src")||t.includes("audio")||m(t)},scanDelay:2e3,allowMultiple:!1,constraints:{facingMode:"environment",width:{ideal:640},height:{ideal:480}},styles:{container:{width:"100%",maxWidth:"400px",height:"300px",margin:"0 auto",border:"2px solid #e5e7eb",borderRadius:"0.5rem",overflow:"hidden"},video:{width:"100%",height:"100%",objectFit:"cover"}}}),Ve.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:Ve.jsx("div",{className:"w-48 h-48 border-2 border-blue-500 border-dashed rounded-lg flex items-center justify-center",children:Ve.jsxs("div",{className:"text-blue-500 text-center",children:[Ve.jsx(ue,{className:"w-8 h-8 mx-auto mb-2"}),Ve.jsx("p",{className:"text-sm font-medium",children:"Scan QR Code"})]})})}),n&&Ve.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-white dark:bg-gray-900",children:Ve.jsxs("div",{className:"relative",children:[Ve.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl bg-blue-500",children:Ve.jsx(pe,{className:"w-16 h-16 text-white animate-spin"})}),Ve.jsx("div",{className:"mt-4 text-center",children:Ve.jsx("div",{className:"px-4 py-2 rounded-lg text-sm font-medium shadow-lg bg-blue-600 text-white",children:"Processing QR code..."})})]})}),r&&!n&&Ve.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-white dark:bg-gray-900",children:Ve.jsxs("div",{className:"relative",children:[Ve.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl "+("success"===r.type?"bg-green-500":"duplicate"===r.type?"bg-yellow-500":"bg-red-500"),children:"success"===r.type?Ve.jsx(S,{className:"w-16 h-16 text-white"}):"duplicate"===r.type?Ve.jsx(de,{className:"w-16 h-16 text-white"}):Ve.jsx(ce,{className:"w-16 h-16 text-white"})}),Ve.jsx("div",{className:"mt-4 text-center",children:Ve.jsx("div",{className:"px-4 py-2 rounded-lg text-sm font-medium shadow-lg "+("success"===r.type?"bg-green-600 text-white":"duplicate"===r.type?"bg-yellow-600 text-white":"bg-red-600 text-white"),children:r.message})})]})})]}):Ve.jsx("div",{className:"scanner-placeholder flex items-center justify-center h-64 bg-gray-100 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:Ve.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[Ve.jsx(he,{className:"w-12 h-12 mx-auto mb-4"}),Ve.jsx("p",{className:"text-lg font-medium",children:"Scanner Inactive"}),Ve.jsx("p",{className:"text-sm",children:'Click "Start Scanner" to begin scanning QR codes'})]})})}),d&&Ve.jsxs("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[Ve.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400",children:[Ve.jsx(ce,{className:"w-5 h-5"}),Ve.jsx("span",{className:"font-medium",children:"Camera Error"})]}),Ve.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-300",children:d})]})]})}function or({eventId:e}){const{accessToken:t,user:a,validateToken:r,clearAuth:i}=Ss(),[n,l]=s.useState({total_registrations:0,total_check_ins:0,check_in_rate:"0"}),[c,o]=s.useState([]),[d,m]=s.useState(!0),[x,u]=s.useState(!1),[h,p]=s.useState(""),[g,f]=s.useState(null);s.useEffect(()=>{if(!r())return void f({name:"Authentication Error",time:"Please refresh and login again"});b();const e=setInterval(b,3e4);return()=>clearInterval(e)},[e]);const b=async()=>{try{if(!t)return void m(!1);const s="https://your-backend-domain.com/api",a=await fetch(`${s}/checkin/events/${e}/stats`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Failed to fetch stats");const r=await a.json();l(r.stats),o(r.recent_check_ins),m(!1)}catch(s){m(!1)}},j=c.filter(e=>e.registration.name.toLowerCase().includes(h.toLowerCase())||e.registration.email.toLowerCase().includes(h.toLowerCase()));return t&&a?d?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading check-in dashboard..."})]})}):Ve.jsx("div",{className:"min-h-screen bg-gray-50",children:Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ve.jsxs("div",{className:"mb-8",children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Check-In"}),Ve.jsx("p",{className:"mt-2 text-gray-600",children:"Scan QR codes to check in participants"})]}),g&&Ve.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:Ve.jsxs("div",{className:"flex items-center space-x-3",children:[Ve.jsx(v,{className:"h-6 w-6 text-green-600"}),Ve.jsxs("div",{children:[Ve.jsxs("p",{className:"text-green-800 font-medium",children:["✅ ",g.name," checked in successfully"]}),Ve.jsxs("p",{className:"text-green-600 text-sm",children:["at ",g.time]})]})]})}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-blue-100 rounded-md",children:Ve.jsx(y,{className:"h-6 w-6 text-blue-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Registrations"}),Ve.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total_registrations})]})]})}),Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-green-100 rounded-md",children:Ve.jsx(v,{className:"h-6 w-6 text-green-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Checked In"}),Ve.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total_check_ins})]})]})}),Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-purple-100 rounded-md",children:Ve.jsx(oe,{className:"h-6 w-6 text-purple-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Check-in Rate"}),Ve.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[n.check_in_rate,"%"]})]})]})})]}),Ve.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Ve.jsx("div",{children:Ve.jsx(cr,{onScan:async s=>{if(!t)throw new Error("Authentication required. Please refresh the page and login again.");const a=`https://your-backend-domain.com/api/checkin/events/${e}`,r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({qr_code:s,location:"Main Entrance",device_info:{userAgent:navigator.userAgent,timestamp:(new Date).toISOString()}})});if(!r.ok){if(401===r.status)throw new Error("Authentication failed. Please refresh the page and login again.");const e=await r.json();throw new Error(e.error||e.message||"Failed to check in participant")}const i=await r.json();return f({name:i.participant.name,time:(new Date).toLocaleTimeString()}),b(),i},isScanning:x,setIsScanning:u,eventId:e})}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow",children:[Ve.jsxs("div",{className:"p-6 border-b border-gray-200",children:[Ve.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ve.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Check-ins"}),Ve.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Refresh"})]}),Ve.jsxs("div",{className:"relative",children:[Ve.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Ve.jsx("input",{type:"text",placeholder:"Search participants...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),Ve.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===j.length?Ve.jsx("div",{className:"p-6 text-center text-gray-500",children:h?"No participants found":"No check-ins yet"}):Ve.jsx("div",{className:"divide-y divide-gray-200",children:j.map(e=>Ve.jsx("div",{className:"p-4 hover:bg-gray-50",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{children:[Ve.jsx("p",{className:"font-medium text-gray-900",children:e.registration.name}),Ve.jsx("p",{className:"text-sm text-gray-600",children:e.registration.email}),e.location&&Ve.jsxs("p",{className:"text-xs text-gray-500",children:["📍 ",e.location]})]}),Ve.jsxs("div",{className:"text-right",children:[Ve.jsxs("div",{className:"flex items-center space-x-2",children:[Ve.jsx(O,{className:"h-4 w-4 text-gray-400"}),Ve.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.checked_in_at).toLocaleTimeString()})]}),Ve.jsxs("p",{className:"text-xs text-gray-500",children:["by ",e.checked_in_by_user.name]})]})]})},e.id))})})]})]}),Ve.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[Ve.jsx("h4",{className:"text-lg font-medium text-blue-900 mb-3",children:"📱 How to Use Check-In System"}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[Ve.jsxs("div",{children:[Ve.jsx("h5",{className:"font-medium mb-2",children:"For Staff:"}),Ve.jsxs("ul",{className:"space-y-1",children:[Ve.jsx("li",{children:'• Click "Start Scanning" to activate camera'}),Ve.jsx("li",{children:"• Point camera at participant's QR code"}),Ve.jsx("li",{children:"• Wait for automatic scan and confirmation"}),Ve.jsx("li",{children:"• Monitor real-time check-in statistics"})]})]}),Ve.jsxs("div",{children:[Ve.jsx("h5",{className:"font-medium mb-2",children:"For Participants:"}),Ve.jsxs("ul",{className:"space-y-1",children:[Ve.jsx("li",{children:"• Show QR code from registration email"}),Ve.jsx("li",{children:"• Ensure QR code is clearly visible"}),Ve.jsx("li",{children:"• One-time check-in per registration"}),Ve.jsx("li",{children:"• Get instant confirmation when checked in"})]})]})]})]})]})}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Ve.jsx("div",{className:"text-6xl mb-4",children:"🔐"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),Ve.jsx("p",{className:"text-gray-600 mb-4",children:"You need to be logged in to access the check-in system."}),Ve.jsx("button",{onClick:()=>{i(),window.location.href="/login"},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Login Again"})]})})}function dr(){const{eventId:e}=d(),{user:t,isLoading:s}=Ps();return s?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?["staff","organizer","admin"].includes(t.role)?e?Ve.jsx(or,{eventId:e}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Event Not Found"}),Ve.jsx("p",{className:"text-gray-600",children:"Invalid event ID provided."})]})}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Ve.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Ve.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the check-in system. Only event staff and organizers can check in participants."})]})}):Ve.jsx(o,{to:"/login",replace:!0})}const mr=({value:e,size:t=180,label:s,footer:a,className:r=""})=>{const i=null==e?void 0:e.toString().trim();return Ve.jsxs("div",{className:`flex flex-col items-center ${r}`,children:[s&&Ve.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-2 text-center",children:s}),Ve.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-100",children:i?Ve.jsx(_e,{value:i,size:t,style:{height:"auto",maxWidth:"100%",width:"100%"}}):Ve.jsx("div",{className:"h-[${size}px] w-[${size}px] flex items-center justify-center text-xs text-red-500",children:"Invalid QR"})}),a&&Ve.jsx("p",{className:"mt-2 text-[11px] text-gray-500 text-center",children:a})]})};function xr(){const{registrationId:e}=d(),{user:t,isLoading:a}=Ps(),{accessToken:r}=Ss(),[i,n]=s.useState(null),[l,c]=s.useState(!0),[m,x]=s.useState(null);s.useEffect(()=>{e&&r&&u()},[e,r]);const u=async()=>{try{if(!r)return x("Authentication required"),void c(!1);if(!e)return x("Missing registration ID"),void c(!1);const t=await fetch(`/api/registrations/${e}`,{headers:{Authorization:`Bearer ${r}`}});if(!t.ok)throw new Error("Registration not found");const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to fetch registration");n(s.data)}catch(t){x(t.message)}finally{c(!1)}};if(a||l)return Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your ticket..."})]})});if(!t)return Ve.jsx(o,{to:"/login",replace:!0});if(m||!i)return Ve.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-purple-50 flex items-center justify-center px-4",children:Ve.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-primary-100 rounded-2xl shadow-xl max-w-lg w-full p-8 text-center",children:[Ve.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-700",children:"🎫"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ticket Not Found"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:m||"The ticket you're looking for doesn't exist or you don't have permission to view it."}),Ve.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[Ve.jsx(I,{className:"h-4 w-4"}),"Go Back"]})]})});if(!(t.email===i.email||"admin"===t.role||"organizer"===t.role))return Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Ve.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Ve.jsx("p",{className:"text-gray-600",children:"You don't have permission to view this ticket."})]})});const h=new Date(i.event.start_date);return Ve.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-purple-50",children:[Ve.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200",children:Ve.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between",children:Ve.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-700 hover:text-primary-600",children:[Ve.jsx(I,{className:"h-5 w-5 mr-2"}),Ve.jsx("span",{className:"font-medium",children:"Back"})]})})}),Ve.jsx("div",{className:"bg-gradient-to-br from-primary-600 to-primary-800 text-white mb-3",children:Ve.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[Ve.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",children:"Your Event Ticket"}),Ve.jsx("p",{className:"text-white/90 mt-1",children:"Show this at the entrance for quick check-in"})]})}),Ve.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 -mt-10 pb-16",children:Ve.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden relative",children:[Ve.jsxs("div",{className:"absolute top-4 right-4",children:["confirmed"===i.status&&Ve.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-green-100 text-green-800 shadow-sm",children:[Ve.jsx(M,{className:"h-4 w-4 mr-1"})," Confirmed"]}),"attended"===i.status&&Ve.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-blue-100 text-blue-800 shadow-sm",children:"🎉 Attended"}),"pending"===i.status&&Ve.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-yellow-100 text-yellow-800 shadow-sm",children:"⏳ Pending"}),"cancelled"===i.status&&Ve.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-red-100 text-red-800 shadow-sm",children:"❌ Cancelled"})]}),Ve.jsxs("div",{className:"grid md:grid-cols-2",children:[Ve.jsxs("div",{className:"p-8",children:[Ve.jsx("div",{className:"",children:Ve.jsx(mr,{value:i.qr_code,size:220,label:void 0,footer:"Show this QR at check-in"})}),Ve.jsx("div",{className:"mt-6",children:Ve.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[Ve.jsx("div",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Registration"}),Ve.jsxs("div",{className:"mt-1 font-semibold text-gray-900",children:["#",i.id.slice(0,8).toUpperCase()]}),i.event.is_paid&&Ve.jsxs("div",{className:"text-sm mt-1",children:[Ve.jsx("span",{className:"text-gray-600 mr-1",children:"Payment:"}),Ve.jsx("span",{className:"completed"===i.payment_status?"text-green-600":"text-yellow-700",children:"completed"===i.payment_status?"Completed":i.payment_status||"Pending"})]})]})})]}),Ve.jsxs("div",{className:"p-8 bg-gradient-to-b from-white to-primary-50/40 border-l border-gray-200",children:[Ve.jsxs("div",{className:"mb-6",children:[Ve.jsx("div",{className:"text-sm text-gray-500",children:"Event"}),Ve.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.event.title}),Ve.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-center gap-2 text-gray-700",children:[Ve.jsxs("span",{className:"inline-flex items-center",children:[Ve.jsx(p,{className:"h-4 w-4 mr-2"})," ",i.name]}),Ve.jsx("span",{className:"hidden sm:inline text-gray-300",children:"•"}),Ve.jsxs("span",{className:"inline-flex items-center",children:[Ve.jsx(P,{className:"h-4 w-4 mr-2"})," ",i.email]})]})]}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{className:"flex items-start",children:[Ve.jsx(C,{className:"h-5 w-5 text-primary-600 mr-3 mt-0.5"}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm text-gray-600",children:"Date"}),Ve.jsx("div",{className:"font-semibold text-gray-900",children:h.toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]})]}),Ve.jsxs("div",{className:"flex items-start",children:[Ve.jsx(O,{className:"h-5 w-5 text-primary-600 mr-3 mt-0.5"}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm text-gray-600",children:"Time"}),Ve.jsx("div",{className:"font-semibold text-gray-900",children:h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),Ve.jsxs("div",{className:"flex items-start",children:[Ve.jsx(E,{className:"h-5 w-5 text-primary-600 mr-3 mt-0.5"}),Ve.jsxs("div",{children:[Ve.jsx("div",{className:"text-sm text-gray-600",children:"Location"}),Ve.jsx("div",{className:"font-semibold text-gray-900",children:i.event.location})]})]})]}),Ve.jsxs("div",{className:"mt-8 grid grid-cols-2 sm:grid-cols-4 gap-3",children:[Ve.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")},className:"flex items-center justify-center gap-2 px-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:[Ve.jsx($,{className:"h-4 w-4"})," Share"]}),Ve.jsxs("button",{onClick:()=>{window.print()},className:"flex items-center justify-center gap-2 px-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:[Ve.jsx(ge,{className:"h-4 w-4"})," Print"]}),Ve.jsxs("button",{onClick:()=>{const e=new Date(i.event.start_date),t=new Date(e.getTime()+72e5),s=e=>String(e).padStart(2,"0"),a=e=>`${e.getUTCFullYear()}${s(e.getUTCMonth()+1)}${s(e.getUTCDate())}T${s(e.getUTCHours())}${s(e.getUTCMinutes())}00Z`,r=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Evange//Ticket//EN","CALSCALE:GREGORIAN","BEGIN:VEVENT",`DTSTART:${a(e)}`,`DTEND:${a(t)}`,`SUMMARY:${i.event.title}`,`LOCATION:${i.event.location}`,`DESCRIPTION:Your ticket for ${i.event.title}`,"END:VEVENT","END:VCALENDAR"].join("\r\n"),n=new Blob([r],{type:"text/calendar;charset=utf-8"}),l=URL.createObjectURL(n),c=document.createElement("a");c.href=l,c.download=`${i.event.title.replace(/\s+/g,"_")}.ics`,c.click(),URL.revokeObjectURL(l)},className:"flex items-center justify-center gap-2 px-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:[Ve.jsx(C,{className:"h-4 w-4"})," Calendar"]}),Ve.jsx("a",{href:`/events/${i.event.id}`,className:"flex items-center justify-center gap-2 px-3 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 shadow",children:"View Event"})]}),Ve.jsxs("div",{className:"mt-8 bg-primary-50 border border-primary-100 text-primary-800 rounded-xl p-4",children:[Ve.jsx("div",{className:"font-semibold mb-2",children:"Important"}),Ve.jsxs("ul",{className:"text-sm space-y-1",children:[Ve.jsx("li",{children:"• Keep this QR safe and don’t share it."}),Ve.jsx("li",{children:"• Arrive 15 minutes early for check-in."}),Ve.jsx("li",{children:"• Download or screenshot your ticket for offline access."})]})]})]})]})]})})]})}function ur(){const{user:e}=Ps(),{accessToken:t}=Ss(),[a,r]=s.useState([]),[i,n]=s.useState(!0);s.useEffect(()=>{l()},[]);const l=async()=>{var e;try{const s=await fetch("/api/events",{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await s.json();r((null==(e=t.data)?void 0:e.events)||[])}}catch(s){}finally{n(!1)}};return e&&"admin"===e.role?Ve.jsx("div",{className:"min-h-screen bg-gray-50",children:Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Ve.jsxs("div",{className:"mb-8",children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),Ve.jsx("p",{className:"mt-2 text-gray-600",children:"Manage events, staff, and system settings"})]}),Ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-blue-100 rounded-md",children:Ve.jsx(C,{className:"h-6 w-6 text-blue-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Events"}),Ve.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]})}),Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-green-100 rounded-md",children:Ve.jsx(y,{className:"h-6 w-6 text-green-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),Ve.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(e=>new Date(e.start_date)>new Date).length})]})]})}),Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-purple-100 rounded-md",children:Ve.jsx(fe,{className:"h-6 w-6 text-purple-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),Ve.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(e=>{const t=new Date(e.start_date),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length})]})]})}),Ve.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx("div",{className:"p-2 bg-orange-100 rounded-md",children:Ve.jsx(z,{className:"h-6 w-6 text-orange-600"})}),Ve.jsxs("div",{className:"ml-4",children:[Ve.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Status"}),Ve.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Online"})]})]})})]}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow",children:[Ve.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[Ve.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Event Management"}),Ve.jsx("p",{className:"text-sm text-gray-600",children:"Manage events and their staff assignments"})]}),i?Ve.jsx("div",{className:"p-6",children:Ve.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map((e,t)=>Ve.jsx("div",{className:"h-16 bg-gray-200 rounded"},t))})}):0===a.length?Ve.jsxs("div",{className:"p-6 text-center text-gray-500",children:[Ve.jsx(C,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Ve.jsx("p",{children:"No events found."})]}):Ve.jsx("div",{className:"divide-y divide-gray-200",children:a.map(e=>Ve.jsx("div",{className:"p-6",children:Ve.jsxs("div",{className:"flex items-center justify-between",children:[Ve.jsxs("div",{className:"flex-1",children:[Ve.jsx("h4",{className:"text-lg font-medium text-gray-900",children:e.title}),Ve.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:[Ve.jsxs("p",{children:["📅 ",new Date(e.start_date).toLocaleDateString()]}),Ve.jsxs("p",{children:["📍 ",e.location]}),Ve.jsxs("p",{children:["👤 Organizer: ",e.organizer.name]})]})]}),Ve.jsxs("div",{className:"flex space-x-3",children:[Ve.jsx(c,{to:`/events/${e.id}`,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"View Event"}),Ve.jsx(c,{to:`/events/${e.id}/check-in`,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Check-in Dashboard"})]})]})},e.id))})]}),Ve.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Ve.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ve.jsx(y,{className:"h-8 w-8 text-blue-600"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Staff Management"})]}),Ve.jsx("p",{className:"text-gray-600 mb-4",children:"Staff management is available on individual event pages. Navigate to any event to add or manage staff members."}),Ve.jsx("p",{className:"text-sm text-gray-500",children:"💡 Tip: Each event can have its own staff with custom permissions."})]}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Ve.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ve.jsx(fe,{className:"h-8 w-8 text-green-600"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Analytics"})]}),Ve.jsx("p",{className:"text-gray-600 mb-4",children:"View check-in analytics and event performance metrics from individual event dashboards."}),Ve.jsx("p",{className:"text-sm text-gray-500",children:"📊 Real-time check-in statistics available for each event."})]}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Ve.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Ve.jsx(z,{className:"h-8 w-8 text-purple-600"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Settings"})]}),Ve.jsx("p",{className:"text-gray-600 mb-4",children:"Configure system-wide settings, email templates, and QR code generation parameters."}),Ve.jsx("p",{className:"text-sm text-gray-500",children:"⚙️ Advanced settings coming soon."})]})]})]})}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Ve.jsx("p",{className:"text-gray-600",children:"Only administrators can access this page."})]})})}const hr=()=>{const{user:e}=Ps(),t=n(),[a,r]=s.useState([]),[i,l]=s.useState([]),[o,d]=s.useState(!0),[m,x]=s.useState(null),[u,h]=s.useState(""),[p,g]=s.useState(1),[f,b]=s.useState(1),[v,j]=s.useState(!0),[N,w]=s.useState("all"),k=async()=>{try{d(!0),x(null);const e=await Us.getEvents({page:p,limit:12,search:u||void 0,upcoming:v,free:"free"===N||void 0,week:"week"===N||void 0});e.success&&e.data&&(r(e.data.events),b(e.data.pagination.pages))}catch(e){x(e.message||"Failed to fetch events")}finally{d(!1)}};s.useEffect(()=>{k(),(async()=>{if(e)try{const e=await Bs.getUserRegistrations();e.success&&e.data&&l(e.data.registrations)}catch(t){}})()},[p,v,N,e]);const S=e=>{var t;const s=i.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});return!!s&&((null==(t=s.event)?void 0:t.is_paid)?"completed"===s.payment_status:"confirmed"===s.status||null===s.payment_status)},A=e=>{var t;const s=i.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});if(!s)return;if(null==(t=s.event)?void 0:t.is_paid)return"completed"===s.payment_status?s:void 0;return"confirmed"===s.status||null===s.payment_status?s:void 0};return o&&0===a.length?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading events..."})]})}):Ve.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ve.jsx("div",{className:"bg-white border-b border-gray-200",children:Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[Ve.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-6",children:Ve.jsxs("div",{className:"flex-1",children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Discover Events"}),Ve.jsx("p",{className:"text-gray-600",children:"Find amazing events happening around you"})]})}),Ve.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Ve.jsx("div",{className:"flex-1",children:Ve.jsxs("form",{onSubmit:e=>{e.preventDefault(),g(1),k()},className:"relative",children:[Ve.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Ve.jsx("input",{type:"text",placeholder:"Search events...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-20 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500"}),Ve.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-4 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Search"})]})}),Ve.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ve.jsx("button",{onClick:()=>{w("all"),h(""),j(!0),g(1),k()},className:"text-sm px-4 py-2 rounded-lg transition-colors "+("all"===N?"bg-primary-600 text-white":"bg-primary-100 text-gray-700 hover:bg-gray-200"),children:"All Events"}),Ve.jsx("button",{onClick:()=>{w("free"),h(""),j(!0),g(1),k()},className:"text-sm px-4 py-2 rounded-lg transition-colors "+("free"===N?"bg-green-600 text-white":"bg-green-100 text-gray-700 hover:bg-gray-200"),children:"Free Events"}),Ve.jsx("button",{onClick:()=>{w("week"),h(""),j(!0),g(1),k()},className:"text-sm px-4 py-2 rounded-lg transition-colors "+("week"===N?"bg-purple-600 text-white":"bg-purple-100 text-gray-700 hover:bg-gray-200"),children:"This Week"})]})]})]})}),Ve.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m&&Ve.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:Ve.jsx("p",{className:"text-red-800",children:m})}),o||0!==a.length?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(s=>{var a;const r=(e=>{const t=new Date,s=new Date(e.start_date),a=new Date(e.end_date);return a<t?{status:"ended",color:"gray"}:s<=t&&a>=t?{status:"ongoing",color:"blue"}:s>t?{status:"upcoming",color:"green"}:{status:"unknown",color:"gray"}})(s),i=(e=>e.registrations&&Array.isArray(e.registrations)?e.registrations.length>0&&"object"==typeof e.registrations[0]&&"count"in e.registrations[0]?e.registrations[0].count||0:e.registrations.length:0)(s);return Ve.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 overflow-hidden group cursor-pointer",children:[Ve.jsxs("div",{className:"relative h-40 bg-gray-100 overflow-hidden",children:[s.banner_url?Ve.jsx("img",{src:s.banner_url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):Ve.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:Ve.jsx(C,{className:"w-12 h-12 text-white"})}),Ve.jsx("div",{className:"absolute top-3 left-3",children:Ve.jsx("span",{className:"bg-white text-gray-900 px-2 py-1 rounded-md text-sm font-semibold shadow-sm",children:s.is_paid?`$${s.price}`:"FREE"})})]}),Ve.jsxs("div",{className:"p-4",children:[Ve.jsx("div",{className:"text-sm font-medium text-orange-600 mb-2",children:new Date(s.start_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),Ve.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:s.title}),Ve.jsxs("div",{className:"flex items-center text-gray-600 text-sm mb-3",children:[Ve.jsx(E,{className:"w-4 h-4 mr-1 flex-shrink-0"}),Ve.jsx("span",{className:"truncate",children:s.location})]}),Ve.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-4",children:[Ve.jsx(y,{className:"w-4 h-4 mr-1"}),Ve.jsxs("span",{children:[i||0," going"]})]}),Ve.jsxs("div",{className:"space-y-2",children:[Ve.jsx(c,{to:`/events/${s.id}`,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"View Details"}),e&&S(s.id)?Ve.jsxs(c,{to:`/ticket/${null==(a=A(s.id))?void 0:a.id}`,className:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition-colors",children:[Ve.jsx(ie,{className:"w-4 h-4 mr-2"}),"View Ticket"]}):"ended"===r.status?Ve.jsx("button",{disabled:!0,className:"w-full px-4 py-2 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed",children:"Event Ended"}):i&&s.capacity&&i>=s.capacity?Ve.jsx("button",{disabled:!0,className:"w-full px-4 py-2 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed",children:"Event Full"}):e?Ve.jsx("button",{onClick:()=>{return a=s.id,void(e&&t(`/events/${a}/register`));var a},className:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Register Now"}):Ve.jsx(c,{to:"/login",className:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Login to Register"})]})]})]},s.id)})}),f>1&&Ve.jsx("div",{className:"mt-8 flex justify-center",children:Ve.jsxs("nav",{className:"flex items-center bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[Ve.jsx("button",{onClick:()=>g(Math.max(1,p-1)),disabled:1===p,className:"px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border-r border-gray-200",children:"Previous"}),Ve.jsx("div",{className:"flex",children:Array.from({length:f},(e,t)=>t+1).map(e=>Ve.jsx("button",{onClick:()=>g(e),className:`px-4 py-3 text-sm font-medium transition-colors ${p===e?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"} ${e<f?"border-r border-gray-200":""}`,children:e},e))}),Ve.jsx("button",{onClick:()=>g(Math.min(f,p+1)),disabled:p===f,className:"px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border-l border-gray-200",children:"Next"})]})})]}):Ve.jsxs("div",{className:"text-center py-12",children:[Ve.jsx(C,{className:"mx-auto h-12 w-12 text-gray-400"}),Ve.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No events found"}),Ve.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u?"Try adjusting your search terms.":"Be the first to create an event!"}),e&&("organizer"===e.role||"admin"===e.role)&&Ve.jsx("div",{className:"mt-6",children:Ve.jsxs(c,{to:"/events/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[Ve.jsx(U,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})]})]})};function pr(){const{user:e,isLoading:t}=Ps(),[a,r]=s.useState([]),[i,n]=s.useState(null),[l,c]=s.useState(!0);if(t)return Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!e)return Ve.jsx(o,{to:"/login",replace:!0});if(!["organizer","admin"].includes(e.role))return Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Ve.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Ve.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the QR scanner. Only organizers and administrators can use this feature."})]})});s.useEffect(()=>{(async()=>{try{c(!0);const e=await Us.getMyEvents();if(e.success&&e.data){const t=e.data.events.filter(e=>new Date<=new Date(e.end_date)&&(!e.status||"published"===e.status));r(t)}}catch(e){}finally{c(!1)}})()},[]);const d=a.find(e=>e.id===i),m=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return l?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Loading events..."})]})}):Ve.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i?Ve.jsxs("div",{children:[Ve.jsxs("div",{className:"flex items-center mb-6",children:[Ve.jsxs("button",{onClick:()=>n(null),className:"flex items-center text-gray-600 hover:text-gray-900 mr-4",children:[Ve.jsx(V,{className:"h-5 w-5 mr-1"}),"Back to Events"]}),Ve.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[null==d?void 0:d.title," - Check-In"]})]}),Ve.jsx(or,{eventId:i})]}):Ve.jsxs("div",{children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"QR Code Scanner"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:"Select an event to start scanning participant QR codes for check-in."}),0===a.length?Ve.jsxs("div",{className:"text-center py-12",children:[Ve.jsx(C,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Available Events"}),Ve.jsx("p",{className:"text-gray-600",children:"You don't have any active or upcoming events to scan for."})]}):Ve.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(e=>{return Ve.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n(e.id),children:Ve.jsxs("div",{className:"p-6",children:[Ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),Ve.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(C,{className:"h-4 w-4 mr-2"}),(t=e.start_date,new Date(t).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}))," at"," ",m(e.start_date)]}),e.location&&Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(E,{className:"h-4 w-4 mr-2"}),e.location]}),Ve.jsxs("div",{className:"flex items-center",children:[Ve.jsx(y,{className:"h-4 w-4 mr-2"}),"Capacity: ",e.capacity]})]}),Ve.jsx("button",{className:"mt-4 w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Start Scanning"})]})},e.id);var t})})]})})}const gr=({size:e="md",className:t})=>Ve.jsx("div",{className:tr("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[e],t)}),fr={createPaymentIntent:async(e,t,s,a="USD")=>_s.post("/payments/create-intent",{registrationId:e,eventId:t,amount:s,currency:a}),verifyPayment:async e=>_s.post("/payments/verify",e),handlePaymentFailure:async(e,t)=>_s.post("/payments/failure",{paymentId:e,reason:t}),getPaymentDetails:async e=>_s.get(`/payments/${e}`)},br=Pe("pk_test_51RvKItHv57VEdPanLmGAWKKeSbKqfZgPJ34vNE3mBZGrbJZDmSBx3tQqks6GkPrOr2oO7AOX8dnh8AWpONeXXHo500LvfirrLT"),yr=({paymentIntent:e,onSuccess:t,onError:a,onCancel:r})=>{const i=Te(),n=Re(),[l,c]=s.useState(!1);return Ve.jsxs("form",{onSubmit:async s=>{var r,l;if(s.preventDefault(),!i||!n)return;c(!0);const o=n.getElement(Fe);if(!o)return a("Card element not found"),void c(!1);try{const{error:s,paymentIntent:n}=await i.confirmCardPayment(e.clientSecret,{payment_method:{card:o,billing_details:{name:e.participantName,email:e.participantEmail}}});if(s)return a(s.message||"Payment failed"),void c(!1);if("succeeded"===n.status)try{const s=await fr.verifyPayment({paymentId:e.paymentId,paymentIntentId:n.id,paymentMethodId:n.payment_method});s.success&&(null==(r=s.data)?void 0:r.success)?t(e.paymentId):a((null==(l=s.data)?void 0:l.message)||"Payment verification failed")}catch(d){a(sa(d))}}catch(m){a(sa(m))}finally{c(!1)}},className:"space-y-6",children:[Ve.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Ve.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.eventTitle}),Ve.jsxs("p",{className:"text-gray-600",children:["Participant: ",e.participantName]}),Ve.jsxs("p",{className:"text-gray-600",children:["Email: ",e.participantEmail]}),Ve.jsxs("p",{className:"text-xl font-bold mt-2",children:["Amount: ",e.currency.toUpperCase()," ",(e.amount/100).toFixed(2)]})]}),Ve.jsx("div",{className:"p-4 border border-gray-300 rounded-lg",children:Ve.jsx(Fe,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),Ve.jsxs("div",{className:"flex gap-3",children:[Ve.jsx(sr,{type:"submit",disabled:!i||l,className:"flex-1",children:l?Ve.jsxs(Ve.Fragment,{children:[Ve.jsx(gr,{size:"sm"}),"Processing..."]}):`Pay ${e.currency.toUpperCase()} ${(e.amount/100).toFixed(2)}`}),Ve.jsx(sr,{type:"button",variant:"outline",onClick:r,disabled:l,children:"Cancel"})]})]})},vr=({registrationId:e,eventId:t,amount:a,currency:r="USD",onSuccess:i,onError:n,onCancel:l})=>{const[c,o]=s.useState(null),[d,m]=s.useState(!0);if(s.useEffect(()=>{(async()=>{try{const s=await fr.createPaymentIntent(e,t,a,r);s.success&&s.data?o(s.data):n(s.message||"Failed to initialize payment")}catch(s){n(sa(s))}finally{m(!1)}})()},[e,t,a,r,n]),d)return Ve.jsxs("div",{className:"flex items-center justify-center p-8",children:[Ve.jsx(gr,{}),Ve.jsx("span",{className:"ml-2",children:"Initializing payment..."})]});if(!c)return Ve.jsxs("div",{className:"text-center p-8",children:[Ve.jsx("p",{className:"text-red-600 mb-4",children:"Failed to initialize payment"}),Ve.jsx(sr,{onClick:l,variant:"outline",children:"Go Back"})]});const x={clientSecret:c.clientSecret,appearance:{theme:"stripe"}};return Ve.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[Ve.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Complete Payment"}),Ve.jsx(De,{stripe:br,options:x,children:Ve.jsx(yr,{paymentIntent:c,onSuccess:i,onError:n,onCancel:l})})]})};function jr(){const{id:e}=d(),t=l(),a=n(),[r,i]=s.useState(!0),[c,o]=s.useState(null),[m,x]=s.useState(!1),u=t.state;s.useEffect(()=>{if(!u||!u.registration||!e)return o("Invalid payment session. Please try registering again."),void i(!1);i(!1)},[u,e]);return r?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),Ve.jsx("p",{className:"mt-4 text-gray-600",children:"Preparing payment..."})]})}):c||!u?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[Ve.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Error"}),Ve.jsx("p",{className:"text-gray-600 mb-4",children:c||"Invalid payment session. Please try registering again."}),Ve.jsx("button",{onClick:()=>a(`/events/${e}`),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Back to Event"})]})}):m?Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Ve.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[Ve.jsx("div",{className:"text-6xl mb-4",children:"✅"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),Ve.jsx("p",{className:"text-gray-600 mb-4",children:"Your registration is confirmed. Redirecting to your ticket..."}),Ve.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})]})}):Ve.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Ve.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[Ve.jsxs("div",{className:"text-center mb-8",children:[Ve.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Complete Your Registration"}),Ve.jsx("p",{className:"text-gray-600 mt-2",children:u.message})]}),Ve.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[Ve.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),Ve.jsxs("div",{className:"space-y-2",children:[Ve.jsxs("div",{className:"flex justify-between",children:[Ve.jsx("span",{className:"text-gray-600",children:"Event:"}),Ve.jsx("span",{className:"font-medium",children:u.registration.event.title})]}),Ve.jsxs("div",{className:"flex justify-between",children:[Ve.jsx("span",{className:"text-gray-600",children:"Date:"}),Ve.jsx("span",{className:"font-medium",children:new Date(u.registration.event.start_date).toLocaleDateString()})]}),Ve.jsxs("div",{className:"flex justify-between",children:[Ve.jsx("span",{className:"text-gray-600",children:"Location:"}),Ve.jsx("span",{className:"font-medium",children:u.registration.event.location})]}),Ve.jsxs("div",{className:"flex justify-between",children:[Ve.jsx("span",{className:"text-gray-600",children:"Participant:"}),Ve.jsx("span",{className:"font-medium",children:u.registration.name})]})]})]}),Ve.jsx(vr,{registrationId:u.registration.id,eventId:e,amount:u.amount,currency:"USD",onSuccess:e=>{x(!0),yt.success("Payment completed successfully!"),setTimeout(()=>{a(`/ticket/${u.registration.id}`,{state:{message:"Payment completed! Your registration is confirmed."}})},2e3)},onError:e=>{o(e),yt.error("Payment failed: "+e)},onCancel:()=>{yt("Payment cancelled. You can complete it later from your registrations."),a(`/events/${e}`)}}),Ve.jsx("div",{className:"mt-8 text-center",children:Ve.jsx("p",{className:"text-sm text-gray-500",children:"Having trouble with payment? Contact support for assistance."})})]})})}const Nr=()=>{const[e]=m(),[t,a]=s.useState("loading"),[r,i]=s.useState(""),[n,l]=s.useState(!1),[o,d]=s.useState(!1),{user:x,isAuthenticated:u,logout:h}=Ps(),p=e.get("token");s.useEffect(()=>{p&&!o?(d(!0),g(p)):p||(a("error"),i("Invalid verification link. No token provided."))},[p,o]);const g=async e=>{var t,s;try{const r=await fetch(`https://your-backend-domain.com/api/auth/verify-email?token=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await r.json();n.success?(a("success"),i(n.message||"Email verified successfully!")):(null==(t=n.error)?void 0:t.includes("already been used"))?(a("already-verified"),i("Your email has been verified! You can now log in to your account.")):(null==(s=n.error)?void 0:s.includes("expired"))?(a("error"),i("This verification link has expired. Please request a new verification email.")):(a("error"),i(n.error||"Failed to verify email."))}catch(r){a("error"),i("An error occurred while verifying your email. Please try again.")}},f=e=>{const t=u&&x;return Ve.jsxs("div",{className:"text-center",children:[Ve.jsx(S,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:r}),t?Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ve.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"You're currently logged in with an unverified account. Please log out and log back in to access all features."})}),Ve.jsx("button",{onClick:()=>{h(),window.location.href="/login"},className:"btn btn-primary",children:"Log Out & Continue to Login"})]}):Ve.jsx(c,{to:"/login",className:"btn btn-primary",children:"Continue to Login"})]})};return Ve.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Ve.jsx("div",{className:"max-w-md w-full",children:Ve.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8",children:[Ve.jsx("div",{className:"flex justify-center mb-6",children:Ve.jsx(P,{className:"h-12 w-12 text-primary-600"})}),(()=>{switch(t){case"loading":return Ve.jsxs("div",{className:"text-center",children:[Ve.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 mx-auto mb-4"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying Your Email"}),Ve.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your email address..."})]});case"success":return f("Email Verified!");case"already-verified":return f("Already Verified!");case"error":const e=r.includes("expired");return Ve.jsxs("div",{className:"text-center",children:[Ve.jsx(ce,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),Ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Failed"}),Ve.jsx("p",{className:"text-gray-600 mb-6",children:r}),Ve.jsxs("div",{className:"space-y-4",children:[Ve.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[Ve.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Need a new verification link?"}),Ve.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:e?"Your verification link has expired. Enter your email address to get a new one.":"If your verification link has expired or you need a new one, enter your email address below."}),Ve.jsx("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget).get("email");t&&(async e=>{try{l(!0);const t=await fetch("https://your-backend-domain.com/api/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();s.success?i("Verification email sent! Please check your inbox."):i(s.error||"Failed to resend verification email.")}catch(t){i("An error occurred while resending verification email.")}finally{l(!1)}})(t)},children:Ve.jsxs("div",{className:"flex gap-2",children:[Ve.jsx("input",{type:"email",name:"email",placeholder:"Enter your email address",className:"flex-1 px-3 py-2 border border-yellow-300 rounded-md text-sm",required:!0}),Ve.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-yellow-600 text-white rounded-md text-sm hover:bg-yellow-700 disabled:opacity-50 flex items-center gap-2",children:[n&&Ve.jsx(pe,{className:"h-4 w-4 animate-spin"}),"Resend"]})]})})]}),Ve.jsx(c,{to:"/register",className:"inline-block text-primary-600 hover:text-primary-500 text-sm",children:"Create a new account"})]})]});default:return null}})()]})})})};function wr(){const e=Ss(e=>e.validateToken);return s.useEffect(()=>{e()},[e]),Ve.jsx(Ts,{children:Ve.jsxs(x,{children:[Ve.jsx(u,{path:"/",element:Ve.jsx(Fs,{})}),Ve.jsx(u,{path:"/login",element:Ve.jsx($s,{})}),Ve.jsx(u,{path:"/register",element:Ve.jsx(Ms,{})}),Ve.jsx(u,{path:"/verify-email",element:Ve.jsx(Nr,{})}),Ve.jsx(u,{path:"/events",element:Ve.jsx(hr,{})}),Ve.jsx(u,{path:"/dashboard",element:Ve.jsx(Rs,{children:Ve.jsx(Gs,{})})}),Ve.jsx(u,{path:"/events/create",element:Ve.jsx(Rs,{children:Ve.jsx(Xs,{})})}),Ve.jsx(u,{path:"/events/:id",element:Ve.jsx(Rs,{children:Ve.jsx(Zs,{})})}),Ve.jsx(u,{path:"/events/:id/form-builder",element:Ve.jsx(Rs,{requireOrganizer:!0,children:Ve.jsx(da,{})})}),Ve.jsx(u,{path:"/events/:id/registrations",element:Ve.jsx(Rs,{children:Ve.jsx(ua,{})})}),Ve.jsx(u,{path:"/events/:id/attendance",element:Ve.jsx(Rs,{children:Ve.jsx(ha,{})})}),Ve.jsx(u,{path:"/certificates",element:Ve.jsx(Rs,{children:Ve.jsx(ir,{})})}),Ve.jsx(u,{path:"/certificates/:id",element:Ve.jsx(Rs,{children:Ve.jsx(ar,{})})}),Ve.jsx(u,{path:"/events/:id/certificates",element:Ve.jsx(Rs,{children:Ve.jsx(ar,{})})}),Ve.jsx(u,{path:"/certificate/verify",element:Ve.jsx(lr,{})}),Ve.jsx(u,{path:"/admin",element:Ve.jsx(Rs,{requireAdmin:!0,children:Ve.jsx(ur,{})})}),Ve.jsx(u,{path:"/events/:eventId/check-in",element:Ve.jsx(Rs,{children:Ve.jsx(dr,{})})}),Ve.jsx(u,{path:"/scanner",element:Ve.jsx(Rs,{requireOrganizer:!0,allowStaff:!0,children:Ve.jsx(pr,{})})}),Ve.jsx(u,{path:"/ticket/:registrationId",element:Ve.jsx(Rs,{children:Ve.jsx(xr,{})})}),Ve.jsx(u,{path:"/my-registrations",element:Ve.jsx(Rs,{children:Ve.jsx(xa,{})})}),Ve.jsx(u,{path:"/events/:id/register",element:Ve.jsx(ra,{})}),Ve.jsx(u,{path:"/events/:id/payment",element:Ve.jsx(Rs,{children:Ve.jsx(jr,{})})})]})})}const kr=[/bearer\s+[a-zA-Z0-9\-_\.]+/gi,/token["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/password["\']?\s*[:=]\s*["\']?[^"',\s]+/gi,/secret["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/key["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/authorization["\']?\s*[:=]\s*["\']?[^"',\s]+/gi,/refresh_token["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/access_token["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi],Sr=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/gi;function Cr(e){let t=e;return kr.forEach(e=>{t=t.replace(e,e=>`${e.split(/[:=]/)[0]}: [REDACTED]`)}),t=t.replace(Sr,"[EMAIL_REDACTED]"),t}function Er(e,t=0){if(t>10)return"[MAX_DEPTH_REACHED]";if(null==e)return e;if("string"==typeof e)return Cr(e);if("number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map(e=>Er(e,t+1));if("object"==typeof e){const s={};for(const[a,r]of Object.entries(e)){const e=a.toLowerCase();e.includes("token")||e.includes("password")||e.includes("secret")||e.includes("key")||e.includes("authorization")||e.includes("auth")?s[a]="[REDACTED]":s[a]=Er(r,t+1)}return s}return e}!function(){{console.log=()=>{},console.info=()=>{},console.warn=()=>{};const e=console.error;console.error=(...t)=>{const s=t.map(e=>"string"==typeof e?Cr(e):Er(e));e(...s)}}}(),Ge(document.getElementById("root")).render(Ve.jsx(s.StrictMode,{children:Ve.jsxs(h,{children:[Ve.jsx(wr,{}),Ve.jsx(Yt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})}));
