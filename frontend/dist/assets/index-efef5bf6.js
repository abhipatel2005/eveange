var e=Object.defineProperty,t=(t,s,a)=>(((t,s,a)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a})(t,"symbol"!=typeof s?s+"":s,a),a);import{r as s,a,g as r,R as i,u as n,b as l,L as o,N as c,c as d,d as m,e as x,f as u,B as h}from"./vendor-dc77fa10.js";import{U as p,L as g,X as f,M as b,a as y,b as v,Q as j,A as N,C as w,S as k,c as S,Z as C,T as E,d as _,e as A,f as P,g as z,h as D,i as R,j as F,E as T,k as $,l as I,m as L,n as O,o as q,F as M,p as U,q as B,r as V,s as G,t as Y,u as Q,P as W,v as H,w as J,x as X,B as Z,y as K,z as ee,D as te,G as se,H as ae,I as re,J as ie,K as ne,N as le,O as oe,R as ce,V as de,W as me,Y as xe,_ as ue,$ as he,a0 as pe,a1 as ge,a2 as fe,a3 as be,a4 as ye,a5 as ve,a6 as je,a7 as Ne}from"./ui-21e4d5af.js";import{o as we,r as ke,a as Se,b as Ce,s as Ee,c as _e,u as Ae,n as Pe,l as ze,e as De}from"./forms-7333cb69.js";import{_ as Re,k as Fe}from"./qr-dcea3a6e.js";import{l as Te,E as $e,u as Ie,a as Le,C as Oe}from"./stripe-a5dc6117.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var qe={exports:{}},Me={},Ue=s,Be=Symbol.for("react.element"),Ve=Symbol.for("react.fragment"),Ge=Object.prototype.hasOwnProperty,Ye=Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qe={key:!0,ref:!0,__self:!0,__source:!0};function We(e,t,s){var a,r={},i=null,n=null;for(a in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(n=t.ref),t)Ge.call(t,a)&&!Qe.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:Be,type:e,key:i,ref:n,props:r,_owner:Ye.current}}Me.Fragment=Ve,Me.jsx=We,Me.jsxs=We,qe.exports=Me;var He,Je=qe.exports,Xe=a;He=Xe.createRoot,Xe.hydrateRoot;let Ze,Ke,et,tt={data:""},st=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,at=/\/\*[^]*?\*\/|  +/g,rt=/\n+/g,it=(e,t)=>{let s="",a="",r="";for(let i in e){let n=e[i];"@"==i[0]?"i"==i[1]?s=i+" "+n+";":a+="f"==i[1]?it(n,i):i+"{"+it(n,"k"==i[1]?"":t)+"}":"object"==typeof n?a+=it(n,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=n&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=it.p?it.p(i,n):i+":"+n+";")}return s+(t&&r?t+"{"+r+"}":r)+a},nt={},lt=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+lt(e[s]);return t}return e};function ot(e){let t=this||{},s=e.call?e(t.p):e;return((e,t,s,a,r)=>{let i=lt(e),n=nt[i]||(nt[i]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(i));if(!nt[n]){let t=i!==e?e:(e=>{let t,s,a=[{}];for(;t=st.exec(e.replace(at,""));)t[4]?a.shift():t[3]?(s=t[3].replace(rt," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(rt," ").trim();return a[0]})(e);nt[n]=it(r?{["@keyframes "+n]:t}:t,s?"":"."+n)}let l=s&&nt.g?nt.g:null;return s&&(nt.g=nt[n]),o=nt[n],c=t,d=a,(m=l)?c.data=c.data.replace(m,o):-1===c.data.indexOf(o)&&(c.data=d?o+c.data:c.data+o),n;var o,c,d,m})(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let i=t[r];if(i&&i.call){let e=i(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":it(e,""):!1===e?"":e}return e+a+(null==i?"":i)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,(a=t.target,"object"==typeof window?((a?a.querySelector("#_goober"):window._goober)||Object.assign((a||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:a||tt),t.g,t.o,t.k);var a}ot.bind({g:1});let ct=ot.bind({k:1});function dt(e,t){let s=this||{};return function(){let a=arguments;function r(i,n){let l=Object.assign({},i),o=l.className||r.className;s.p=Object.assign({theme:Ke&&Ke()},l),s.o=/ *go\d+/.test(o),l.className=ot.apply(s,a)+(o?" "+o:""),t&&(l.ref=n);let c=e;return e[0]&&(c=l.as||e,delete l.as),et&&c[0]&&et(l),Ze(c,l)}return t?t(r):r}}var mt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,xt=(()=>{let e=0;return()=>(++e).toString()})(),ut=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ht="default",pt=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:a}=t;return pt(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},gt=[],ft={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},bt={},yt=(e,t=ht)=>{bt[t]=pt(bt[t]||ft,e),gt.forEach(([e,s])=>{e===t&&s(bt[t])})},vt=e=>Object.keys(bt).forEach(t=>yt(e,t)),jt=(e=ht)=>t=>{yt(t,e)},Nt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wt=e=>(t,s)=>{let a=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||xt()}))(t,e,s);return jt(a.toasterId||(e=>Object.keys(bt).find(t=>bt[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},kt=(e,t)=>wt("blank")(e,t);kt.error=wt("error"),kt.success=wt("success"),kt.loading=wt("loading"),kt.custom=wt("custom"),kt.dismiss=(e,t)=>{let s={type:3,toastId:e};t?jt(t)(s):vt(s)},kt.dismissAll=e=>kt.dismiss(void 0,e),kt.remove=(e,t)=>{let s={type:4,toastId:e};t?jt(t)(s):vt(s)},kt.removeAll=e=>kt.remove(void 0,e),kt.promise=(e,t,s)=>{let a=kt.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?mt(t.success,e):void 0;return r?kt.success(r,{id:a,...s,...null==s?void 0:s.success}):kt.dismiss(a),e}).catch(e=>{let r=t.error?mt(t.error,e):void 0;r?kt.error(r,{id:a,...s,...null==s?void 0:s.error}):kt.dismiss(a)}),e};var St,Ct,Et,_t,At=(e,t="default")=>{let{toasts:a,pausedAt:r}=((e={},t=ht)=>{let[a,r]=s.useState(bt[t]||ft),i=s.useRef(bt[t]);s.useEffect(()=>(i.current!==bt[t]&&r(bt[t]),gt.push([t,r]),()=>{let e=gt.findIndex(([e])=>e===t);e>-1&&gt.splice(e,1)}),[t]);let n=a.toasts.map(t=>{var s,a,r;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||Nt[t.type],style:{...e.style,...null==(r=e[t.type])?void 0:r.style,...t.style}}});return{...a,toasts:n}})(e,t),i=s.useRef(new Map).current,n=s.useCallback((e,t=1e3)=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),l({type:4,toastId:e})},t);i.set(e,s)},[]);s.useEffect(()=>{if(r)return;let e=Date.now(),s=a.map(s=>{if(s.duration===1/0)return;let a=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(a<0))return setTimeout(()=>kt.dismiss(s.id,t),a);s.visible&&kt.dismiss(s.id)});return()=>{s.forEach(e=>e&&clearTimeout(e))}},[a,r,t]);let l=s.useCallback(jt(t),[t]),o=s.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=s.useCallback((e,t)=>{l({type:1,toast:{id:e,height:t}})},[l]),d=s.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),m=s.useCallback((e,t)=>{let{reverseOrder:s=!1,gutter:r=8,defaultPosition:i}=t||{},n=a.filter(t=>(t.position||i)===(e.position||i)&&t.height),l=n.findIndex(t=>t.id===e.id),o=n.filter((e,t)=>t<l&&e.visible).length;return n.filter(e=>e.visible).slice(...s?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+r,0)},[a]);return s.useEffect(()=>{a.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[a,n]),{toasts:a,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:m}}},Pt=ct`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,zt=ct`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Dt=ct`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Rt=dt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Pt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${zt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Dt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ft=ct`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Tt=dt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Ft} 1s linear infinite;
`,$t=ct`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,It=ct`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Lt=dt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$t} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${It} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ot=dt("div")`
  position: absolute;
`,qt=dt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Mt=ct`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ut=dt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Mt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Bt=({toast:e})=>{let{icon:t,type:a,iconTheme:r}=e;return void 0!==t?"string"==typeof t?s.createElement(Ut,null,t):t:"blank"===a?null:s.createElement(qt,null,s.createElement(Tt,{...r}),"loading"!==a&&s.createElement(Ot,null,"error"===a?s.createElement(Rt,{...r}):s.createElement(Lt,{...r})))},Vt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Gt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Yt=dt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Qt=dt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Wt=s.memo(({toast:e,position:t,style:a,children:r})=>{let i=e.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=ut()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Vt(s),Gt(s)];return{animation:t?`${ct(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ct(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},n=s.createElement(Bt,{toast:e}),l=s.createElement(Qt,{...e.ariaProps},mt(e.message,e));return s.createElement(Yt,{className:e.className,style:{...i,...a,...e.style}},"function"==typeof r?r({icon:n,message:l}):s.createElement(s.Fragment,null,n,l))});St=s.createElement,it.p=Ct,Ze=St,Ke=Et,et=_t;var Ht=({id:e,className:t,style:a,onHeightUpdate:r,children:i})=>{let n=s.useCallback(t=>{if(t){let s=()=>{let s=t.getBoundingClientRect().height;r(e,s)};s(),new MutationObserver(s).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return s.createElement("div",{ref:n,className:t,style:a},i)},Jt=ot`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Xt=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:r,children:i,toasterId:n,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:d}=At(a,n);return s.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(a=>{let n=a.position||t,l=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ut()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...a,...r}})(n,d.calculateOffset(a,{reverseOrder:e,gutter:r,defaultPosition:t}));return s.createElement(Ht,{id:a.id,key:a.id,onHeightUpdate:d.updateHeight,className:a.visible?Jt:"",style:l},"custom"===a.type?mt(a.message,a):i?i(a):s.createElement(Wt,{toast:a,position:n}))}))},Zt=kt;const Kt=e=>{let t;const s=new Set,a=(e,a)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,i={setState:a,getState:r,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{s.clear()}},n=t=e(a,r,i);return i};var es={exports:{}},ts={},ss={exports:{}},as={},rs=s;var is="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ns=rs.useState,ls=rs.useEffect,os=rs.useLayoutEffect,cs=rs.useDebugValue;function ds(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!is(e,s)}catch(a){return!0}}var ms="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=ns({inst:{value:s,getSnapshot:t}}),r=a[0].inst,i=a[1];return os(function(){r.value=s,r.getSnapshot=t,ds(r)&&i({inst:r})},[e,s,t]),ls(function(){return ds(r)&&i({inst:r}),e(function(){ds(r)&&i({inst:r})})},[e]),cs(s),s};as.useSyncExternalStore=void 0!==rs.useSyncExternalStore?rs.useSyncExternalStore:ms,ss.exports=as;var xs=ss.exports,us=s,hs=xs;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},gs=hs.useSyncExternalStore,fs=us.useRef,bs=us.useEffect,ys=us.useMemo,vs=us.useDebugValue;ts.useSyncExternalStoreWithSelector=function(e,t,s,a,r){var i=fs(null);if(null===i.current){var n={hasValue:!1,value:null};i.current=n}else n=i.current;i=ys(function(){function e(e){if(!o){if(o=!0,i=e,e=a(e),void 0!==r&&n.hasValue){var t=n.value;if(r(t,e))return l=t}return l=e}if(t=l,ps(i,e))return t;var s=a(e);return void 0!==r&&r(t,s)?(i=e,t):(i=e,l=s)}var i,l,o=!1,c=void 0===s?null:s;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,s,a,r]);var l=gs(e,i[0],i[1]);return bs(function(){n.hasValue=!0,n.value=l},[l]),vs(l),l},es.exports=ts;const js=r(es.exports),{useDebugValue:Ns}=i,{useSyncExternalStoreWithSelector:ws}=js;const ks=e=>e;const Ss=e=>{const t="function"==typeof e?(e=>e?Kt(e):Kt)(e):e,s=(e,s)=>function(e,t=ks,s){const a=ws(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return Ns(a),a}(t,e,s);return Object.assign(s,t),s},Cs=e=>e?Ss(e):Ss;function Es(e,t){let s;try{s=e()}catch(a){return}return{getItem:e=>{var a;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(a=s.getItem(e))?a:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,a)=>s.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>s.removeItem(e)}}const _s=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then:e=>_s(e)(s),catch(e){return this}}}catch(St){return{then(e){return this},catch:t=>_s(t)(St)}}},As=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(s,a,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1;const l=new Set,o=new Set;let c;try{c=i.getStorage()}catch(g){}if(!c)return e((...e)=>{s(...e)},a,r);const d=_s(i.serialize),m=()=>{const e=i.partialize({...a()});let t;const s=d({state:e,version:i.version}).then(e=>c.setItem(i.name,e)).catch(e=>{t=e});if(t)throw t;return s},x=r.setState;r.setState=(e,t)=>{x(e,t),m()};const u=e((...e)=>{s(...e),m()},a,r);let h;const p=()=>{var e;if(!c)return;n=!1,l.forEach(e=>e(a()));const t=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,a()))||void 0;return _s(c.getItem.bind(c))(i.name).then(e=>{if(e)return i.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version)}}).then(e=>{var t;return h=i.merge(e,null!=(t=a())?t:u),s(h,!0),m()}).then(()=>{null==t||t(h,void 0),n=!0,o.forEach(e=>e(h))}).catch(e=>{null==t||t(void 0,e)})};return r.persist={setOptions:e=>{i={...i,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>n,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},p(),h||u})(e,t):((e,t)=>(s,a,r)=>{let i={storage:Es(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1;const l=new Set,o=new Set;let c=i.storage;if(!c)return e((...e)=>{s(...e)},a,r);const d=()=>{const e=i.partialize({...a()});return c.setItem(i.name,{state:e,version:i.version})},m=r.setState;r.setState=(e,t)=>{m(e,t),d()};const x=e((...e)=>{s(...e),d()},a,r);let u;r.getInitialState=()=>x;const h=()=>{var e,t;if(!c)return;n=!1,l.forEach(e=>{var t;return e(null!=(t=a())?t:x)});const r=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=a())?e:x))||void 0;return _s(c.getItem.bind(c))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate)return[!0,i.migrate(e.state,e.version)]}return[!1,void 0]}).then(e=>{var t;const[r,n]=e;if(u=i.merge(n,null!=(t=a())?t:x),s(u,!0),r)return d()}).then(()=>{null==r||r(u,void 0),u=a(),n=!0,o.forEach(e=>e(u))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{i={...i,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>h(),hasHydrated:()=>n,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},i.skipHydration||h(),u||x})(e,t);const Ps=new class{constructor(){t(this,"cache",new Map)}set(e,t,s=3e5){this.cache.set(e,{data:t,timestamp:Date.now(),ttl:s})}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data:null}invalidate(e){this.cache.delete(e)}invalidatePattern(e){const t=new RegExp(e);for(const s of this.cache.keys())t.test(s)&&this.cache.delete(s)}clear(){this.cache.clear()}};const zs=()=>{Ps.invalidatePattern("^dashboard-")},Ds=Cs()(As((e,t)=>({user:null,accessToken:null,isAuthenticated:!1,isLoading:!1,error:null,rememberMe:!0,setAuth:(t,s,a=!0)=>{e({user:t,accessToken:s,isAuthenticated:!0,error:null,rememberMe:a});const r={state:{user:t,accessToken:s,isAuthenticated:!0,rememberMe:a}};a?(localStorage.setItem("auth-store",JSON.stringify(r)),sessionStorage.removeItem("auth-store")):(sessionStorage.setItem("auth-store",JSON.stringify(r)),localStorage.removeItem("auth-store"))},clearAuth:()=>{e({user:null,accessToken:null,isAuthenticated:!1,error:null,rememberMe:!0}),localStorage.removeItem("auth-store"),sessionStorage.removeItem("auth-store"),Ps.clear()},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},updateUser:s=>{const a=t().user;a&&e({user:{...a,...s}})},validateToken:()=>{const{accessToken:e}=t();return!(!e||!(e=>{if(!e||"string"!=typeof e)return!1;const t=e.split(".");if(3!==t.length)return!1;try{return t.forEach(e=>{if(!e)throw new Error("Empty part");atob(e.replace(/-/g,"+").replace(/_/g,"/"))}),!0}catch{return!1}})(e))||(t().clearAuth(),!1)}}),{name:"auth-store",storage:Es(()=>localStorage),partialize:e=>({user:e.user,accessToken:e.accessToken,isAuthenticated:e.isAuthenticated,rememberMe:e.rememberMe})}));const Rs=new class{constructor(e=10,s=6e4){t(this,"requests",new Map),t(this,"limit"),t(this,"windowMs"),this.limit=e,this.windowMs=s}isAllowed(e){const t=Date.now(),s=(this.requests.get(e)||[]).filter(e=>t-e<this.windowMs);return!(s.length>=this.limit)&&(s.push(t),this.requests.set(e,s),!0)}getRemainingRequests(e){const t=Date.now(),s=(this.requests.get(e)||[]).filter(e=>t-e<this.windowMs);return Math.max(0,this.limit-s.length)}getResetTime(e){const t=this.requests.get(e)||[];return 0===t.length?Date.now():t[0]+this.windowMs}}(20,6e4);class Fs extends Error{constructor(e,t,s){super(s||t.error||"An error occurred"),this.status=e,this.response=t,this.name="ApiError"}}const Ts=new class{constructor(e="https://your-backend-domain.com/api"){t(this,"baseURL"),this.baseURL=e}async request(e,t={}){const s=`${this.baseURL}${e}`,a=`${t.method||"GET"}:${e}`;if(!Rs.isAllowed(a)){const e=Rs.getResetTime(a),t=Math.ceil((e-Date.now())/1e3);throw new Fs(429,{success:!1,error:`Too many requests. Please wait ${t} seconds.`})}const r={headers:{...t.body instanceof FormData?{}:{"Content-Type":"application/json"},...t.headers},credentials:"include",...t},i=this.getStoredToken();i&&(r.headers.Authorization=`Bearer ${i}`);try{0;const e=await fetch(s,r),t=await e.json();if(!e.ok){if(401===e.status&&"TOKEN_EXPIRED"===t.code)throw this.handleTokenExpiration(),new Fs(e.status,{...t,shouldRedirectToLogin:!0});throw new Fs(e.status,t)}return t}catch(n){if(n instanceof Fs)throw n;throw new Fs(0,{success:!1,error:"Network error or server unavailable"})}}getStoredToken(){var e;try{const t=Ds.getState();if(t.accessToken)return t.accessToken;const s=localStorage.getItem("auth-store");if(s){const t=JSON.parse(s);return(null==(e=t.state)?void 0:e.accessToken)||t.accessToken||null}}catch(t){}return null}handleTokenExpiration(){const e=Ds.getState();e.clearAuth(),e.setError("Your session has expired. Please log in again."),window.location.href="/login"}async get(e){return this.request(e,{method:"GET"})}async post(e,t){const s=t instanceof FormData,a={method:"POST"};return a.body=s?t:t?JSON.stringify(t):void 0,this.request(e,a)}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}};class $s{static async login(e){return Ts.post("/auth/login",e)}static async register(e){return Ts.post("/auth/register",e)}static async logout(){return Ts.post("/auth/logout")}static async refreshToken(){return Ts.post("/auth/refresh")}static async getProfile(){return Ts.get("/auth/profile")}static isAuthenticated(){var e;try{const t=localStorage.getItem("auth-store");if(t){return(null==(e=JSON.parse(t).state)?void 0:e.isAuthenticated)||!1}}catch{}return!1}static getCurrentUser(){var e;try{const t=localStorage.getItem("auth-store");if(t){return(null==(e=JSON.parse(t).state)?void 0:e.user)||null}}catch{}return null}static getAccessToken(){var e;try{const t=localStorage.getItem("auth-store");if(t){return(null==(e=JSON.parse(t).state)?void 0:e.accessToken)||null}}catch{}return null}}const Is=()=>{const e=n(),{user:t,isAuthenticated:a,isLoading:r,error:i,setAuth:l,clearAuth:o,setLoading:c,setError:d,updateUser:m}=Ds(),x=s.useCallback(async t=>{try{c(!0),d(null);const s=await $s.login(t);if(s.success&&s.data)return l(s.data.user,s.data.accessToken,t.rememberMe??!0),Zt.success("Login successful!"),e("/dashboard"),!0;throw new Error(s.error||"Login failed")}catch(s){let e="An unexpected error occurred";if(s instanceof Fs)if(401===s.status)e="Invalid email or password. Please check your credentials and try again.";else if(403===s.status){const t=s.response;(null==t?void 0:t.requiresVerification)?(null==t?void 0:t.verificationEmailSent)?(e="Please verify your email address. We've sent a new verification email to your inbox.",Zt.success("New verification email sent! Please check your inbox.")):e="Please verify your email address before logging in. Check your inbox for verification instructions.":e="Your account has been disabled. Please contact support for assistance."}else e=429===s.status?"Too many login attempts. Please wait a few minutes and try again.":500===s.status?"Server error occurred. Please try again in a few moments.":s.response.error||"Login failed. Please check your credentials.";else s instanceof Error&&(e=s.message.includes("network")||s.message.includes("fetch")?"Unable to connect to the server. Please check your internet connection.":s.message||"Login failed. Please try again.");return d(e),Zt.error(e),!1}finally{c(!1)}},[l,c,d,e]),u=s.useCallback(async t=>{var s,a,r,i,n,o;try{c(!0),d(null);const i=await $s.register(t);if(!i.success)throw new Error(i.error||"Registration failed");if(null==(s=i.data)?void 0:s.requiresVerification)return Zt.success("Account created! Please check your email for verification instructions."),e("/login"),!0;if((null==(a=i.data)?void 0:a.user)&&(null==(r=i.data)?void 0:r.accessToken))return l(i.data.user,i.data.accessToken),Zt.success("Account created successfully!"),e("/dashboard"),!0}catch(m){let e="An unexpected error occurred";return m instanceof Fs?e=409===m.status?"An account with this email already exists. Please try logging in instead.":400===m.status?(null==(i=m.response.error)?void 0:i.includes("email"))?"Please provide a valid email address.":(null==(n=m.response.error)?void 0:n.includes("password"))?"Password must be at least 8 characters long.":(null==(o=m.response.error)?void 0:o.includes("name"))?"Please provide your full name.":m.response.error||"Please check your information and try again.":500===m.status?"Server error occurred. Please try again in a few moments.":m.response.error||"Registration failed. Please try again.":m instanceof Error&&(e=m.message.includes("network")||m.message.includes("fetch")?"Unable to connect to the server. Please check your internet connection.":m.message||"Registration failed. Please try again."),d(e),Zt.error(e),!1}finally{c(!1)}},[l,c,d,e]),h=s.useCallback(async()=>{try{c(!0),await $s.logout(),o(),Zt.success("Logged out successfully"),e("/")}catch(t){o(),e("/")}finally{c(!1)}},[o,c,e]),p=s.useCallback(async()=>{try{const e=await $s.refreshToken();if(e.success&&e.data){const t=Ds.getState().user;return t&&l(t,e.data.accessToken),!0}throw new Error("Token refresh failed")}catch(t){return o(),e("/login"),!1}},[l,o,e]),g=s.useCallback(async()=>{try{c(!0);const e=await $s.getProfile();e.success&&e.data?m(e.data.user):o()}catch(e){await p()||o()}finally{c(!1)}},[m,o,p,c]);return{user:t,isAuthenticated:a,isLoading:r,error:i,login:x,register:u,logout:h,refreshToken:p,checkAuthStatus:g,updateUser:m,isOrganizer:"organizer"===(null==t?void 0:t.role)||"admin"===(null==t?void 0:t.role),isAdmin:"admin"===(null==t?void 0:t.role),clearError:()=>d(null)}};function Ls(){const{accessToken:e,isAuthenticated:t}=Ds(),[a,r]=s.useState(null),[i,n]=s.useState(!0),[l,o]=s.useState(null);return s.useEffect(()=>{if(!t||!e)return r(null),void n(!1);(async()=>{try{n(!0);const t=await fetch("/api/users/permissions",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch permissions");const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to fetch permissions");r(s.data),localStorage.setItem("dashboard_has_staff",s.data.hasStaffAssignments?"true":"false"),localStorage.setItem("dashboard_staff_can_cert",s.data.canAccessCertificates?"true":"false")}catch(t){o(t.message),r(null)}finally{n(!1)}})()},[e,t]),{permissions:a,loading:i,error:l}}const Os=({children:e})=>{const t=l(),[s,a]=i.useState(!1),{user:r,isAuthenticated:n,logout:c}=Is(),{permissions:d}=Ls(),[m,x]=i.useState(!1);i.useEffect(()=>{const e=localStorage.getItem("dashboard_has_registrations");x("true"===e);const t=()=>{x("true"===localStorage.getItem("dashboard_has_registrations"))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const u=[{name:"Events",href:"/events",icon:y}],h=[{name:"Dashboard",href:"/dashboard",icon:w}],k="organizer"===(null==r?void 0:r.role)||"admin"===(null==r?void 0:r.role)||(null==d?void 0:d.hasStaffAssignments)||(null==d?void 0:d.canScanQR),S="organizer"===(null==r?void 0:r.role)||"admin"===(null==r?void 0:r.role)||(null==d?void 0:d.canAccessCertificates),C=[...h,...m?[{name:"My Registrations",href:"/my-registrations",icon:v}]:[],...k?[{name:"QR Scanner",href:"/scanner",icon:j}]:[],...S?[{name:"Certificates",href:"/certificates",icon:N}]:[]],E=n?[...u,...C]:u,_=["/login","/register"].includes(t.pathname),A="/"===t.pathname;return _?Je.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):Je.jsxs("div",{className:"min-h-screen bg-white",children:[!A&&Je.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100",children:Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Je.jsxs("div",{className:"flex justify-between h-16",children:[Je.jsxs("div",{className:"flex",children:[Je.jsx("div",{className:"flex-shrink-0 flex items-center",children:Je.jsx(o,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 text-transparent bg-clip-text",children:"eveange"})}),Je.jsx("div",{className:"hidden sm:ml-8 sm:flex sm:space-x-2",children:E.map(e=>{const s=e.icon,a=t.pathname.startsWith(e.href);return u.includes(e)||n&&!A&&C.includes(e)?Je.jsxs(o,{to:e.href,className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all "+(a?"bg-gradient-to-r from-purple-100 to-blue-100 text-purple-700 my-3":"text-gray-600 hover:bg-gray-100 hover:text-gray-900 my-3"),children:[Je.jsx(s,{className:"w-4 h-4 mr-2"}),e.name]},e.name):null})})]}),Je.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center space-x-3",children:n?Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx(o,{to:"/events/create",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold shadow-md transition-all",children:"Create Event"}),Je.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700 px-3 py-2 bg-gray-100 rounded-lg",children:[Je.jsx(p,{className:"w-4 h-4"}),Je.jsx("span",{children:null==r?void 0:r.name})]}),Je.jsx("button",{onClick:c,className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Sign out",children:Je.jsx(g,{className:"w-5 h-5"})})]}):Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx(o,{to:"/login",className:"text-gray-700 hover:text-gray-900 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Sign in"}),Je.jsx(o,{to:"/register",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-2 rounded-lg text-sm font-semibold shadow-md transition-all transform hover:scale-105",children:"Get Started"})]})}),Je.jsx("div",{className:"sm:hidden flex items-center",children:Je.jsx("button",{onClick:()=>a(!s),className:"inline-flex items-center justify-center p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors",children:s?Je.jsx(f,{className:"w-6 h-6"}):Je.jsx(b,{className:"w-6 h-6"})})})]}),s&&Je.jsxs("div",{className:"sm:hidden border-t border-gray-100 pb-3",children:[Je.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1",children:E.map(e=>{const s=e.icon,r=t.pathname.startsWith(e.href);return u.includes(e)||n&&!A&&C.includes(e)?Je.jsxs(o,{to:e.href,className:"flex items-center px-3 py-2 rounded-lg text-base font-medium "+(r?"bg-gradient-to-r from-purple-100 to-blue-100 text-purple-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),onClick:()=>a(!1),children:[Je.jsx(s,{className:"w-5 h-5 mr-3"}),e.name]},e.name):null})}),n?Je.jsxs("div",{className:"pt-4 px-2",children:[Je.jsxs("div",{className:"flex items-center px-3 py-2 mb-3 bg-gray-50 rounded-lg",children:[Je.jsx(p,{className:"w-5 h-5 text-purple-600 mr-2"}),Je.jsx("span",{className:"text-sm font-medium",children:null==r?void 0:r.name})]}),Je.jsx(o,{to:"/events/create",className:"block bg-gradient-to-r from-purple-600 to-blue-600 text-white px-3 py-2 rounded-lg font-semibold text-center mb-2",onClick:()=>a(!1),children:"Create Event"}),Je.jsxs("button",{onClick:()=>{c(),a(!1)},className:"w-full flex items-center justify-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg",children:[Je.jsx(g,{className:"w-4 h-4 mr-2"}),"Sign out"]})]}):Je.jsxs("div",{className:"pt-4 px-2 space-y-2",children:[Je.jsx(o,{to:"/login",className:"block px-3 py-2 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-100 text-center",onClick:()=>a(!1),children:"Sign in"}),Je.jsx(o,{to:"/register",className:"block bg-gradient-to-r from-purple-600 to-blue-600 text-white px-3 py-2 rounded-lg font-semibold text-center",onClick:()=>a(!1),children:"Get Started"})]})]})]})}),Je.jsx("main",{className:A?"":"pt-16",children:e}),Je.jsx("footer",{className:"bg-white border-t mt-auto",children:Je.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:Je.jsx("div",{className:"text-center text-gray-500",children:Je.jsxs("p",{children:["© ",(new Date).getFullYear()," eveange. All rights reserved."]})})})})]})},qs={xs:"h-4 w-4 border-2",sm:"h-8 w-8 border-2",md:"h-12 w-12 border-2",lg:"h-16 w-16 border-2",xl:"h-32 w-32 border-4",full:"h-32 w-32 border-4"},Ms=({size:e="md",className:t="",text:s})=>{const a="full"===e,r=Je.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[Je.jsx("div",{className:`animate-spin rounded-full border-primary-600 ${qs[e]} ${t}`,style:{borderTopColor:"transparent"},role:"status","aria-label":"Loading"}),s&&Je.jsx("p",{className:"text-sm text-gray-600 font-medium",children:s})]});return a?Je.jsx("div",{className:"flex items-center justify-center min-h-64",children:r}):r},Us=({children:e,requireOrganizer:t=!1,requireAdmin:s=!1,allowStaff:a=!1})=>{const{isAuthenticated:r,user:i,isLoading:n}=Is(),{permissions:o,loading:d}=Ls(),m=l();if(n||a&&d)return Je.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Je.jsx(Ms,{size:"sm"})});if(!r)return Je.jsx(c,{to:"/login",state:{from:m},replace:!0});if(s&&"admin"!==(null==i?void 0:i.role))return Je.jsx(c,{to:"/dashboard",replace:!0});if(t){const e=["organizer","admin"].includes((null==i?void 0:i.role)||"");if(a&&!e){if(!((null==o?void 0:o.hasStaffAssignments)||(null==o?void 0:o.canAccessCertificates)||(null==o?void 0:o.canScanQR)))return Je.jsx(c,{to:"/dashboard",replace:!0})}else if(!e)return Je.jsx(c,{to:"/dashboard",replace:!0})}return Je.jsx(Je.Fragment,{children:e})};"undefined"!=typeof window&&["token","accessToken","authToken"].forEach(e=>{const t=localStorage.getItem(e);t&&(t.includes(".")&&3===t.split(".").length||localStorage.removeItem(e))});const Bs=()=>{const e=[{icon:S,title:"Easy Event Creation",description:"Create and manage events with our intuitive event creation wizard."},{icon:y,title:"Flexible Registration",description:"Build custom registration forms with drag-and-drop form builder."},{icon:j,title:"QR Code Attendance",description:"Track attendance with QR code scanning for seamless check-ins."},{icon:N,title:"Digital Certificates",description:"Generate and distribute certificates automatically to attendees."}];return Je.jsxs("div",{className:"bg-white min-h-screen",children:[Je.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-indigo-50 via-purple-50 to-blue-50",children:[Je.jsx("nav",{className:"relative z-10",children:Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Je.jsxs("div",{className:"flex justify-between items-center h-20",children:[Je.jsx(o,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 text-transparent bg-clip-text",children:"eveange"}),Je.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[Je.jsx(o,{to:"/",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Home"}),Je.jsx(o,{to:"/events",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Events"}),Je.jsx("a",{href:"#features",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Features"}),Je.jsx("a",{href:"#pricing",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Pricing"})]}),Je.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[Je.jsx(o,{to:"/login",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Login"}),Je.jsx(o,{to:"/register",className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-2.5 rounded-lg font-semibold transition-all shadow-md",children:"Sign Up"})]}),Je.jsx("button",{className:"md:hidden p-2",children:Je.jsx(b,{className:"w-6 h-6 text-gray-700"})})]})})}),Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-24",children:[Je.jsx("div",{className:"text-center mb-8",children:Je.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium",children:[Je.jsx(k,{className:"w-4 h-4"}),Je.jsx("span",{children:"We've just released a new feature →"})]})}),Je.jsxs("div",{className:"text-center mb-12",children:[Je.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-6",children:["Boost Your"," ",Je.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Events"}),",",Je.jsx("br",{}),"Simplify Your Life"]}),Je.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:"We're here to simplify the intricacies of your event management, providing a user-friendly platform that not only manages your events effortlessly but also enhances your overall efficiency."}),Je.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-16",children:Je.jsx(o,{to:"/register",className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold py-3 px-8 rounded-xl transition-all shadow-lg hover:shadow-xl inline-flex items-center justify-center",children:"Get Started"})})]}),Je.jsx("div",{className:"relative max-w-5xl mx-auto",children:Je.jsxs("div",{className:"bg-white rounded-t-2xl shadow-2xl border border-gray-200",children:[Je.jsx("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-gray-200",children:Je.jsxs("div",{className:"flex gap-2",children:[Je.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),Je.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),Je.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]})}),Je.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-50 to-white",children:[Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Je.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg transform hover:scale-105 transition-transform",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:Je.jsx(S,{className:"w-6 h-6"})}),Je.jsx("div",{className:"text-2xl font-bold",children:"142"})]}),Je.jsx("h3",{className:"font-semibold mb-1",children:"Total Events"}),Je.jsx("p",{className:"text-purple-100 text-sm",children:"Active campaigns"})]}),Je.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg transform hover:scale-105 transition-transform",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:Je.jsx(y,{className:"w-6 h-6"})}),Je.jsx("div",{className:"text-2xl font-bold",children:"2.4K"})]}),Je.jsx("h3",{className:"font-semibold mb-1",children:"Registrations"}),Je.jsx("p",{className:"text-blue-100 text-sm",children:"This month"})]}),Je.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl p-6 text-white shadow-lg transform hover:scale-105 transition-transform",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:Je.jsx(N,{className:"w-6 h-6"})}),Je.jsx("div",{className:"text-2xl font-bold",children:"1.8K"})]}),Je.jsx("h3",{className:"font-semibold mb-1",children:"Certificates"}),Je.jsx("p",{className:"text-indigo-100 text-sm",children:"Generated"})]})]}),Je.jsxs("div",{className:"mt-6 bg-white rounded-xl p-6 shadow-md",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("h3",{className:"font-semibold text-gray-900",children:"Today's Schedule"}),Je.jsx(S,{className:"w-5 h-5 text-gray-400"})]}),Je.jsxs("div",{className:"space-y-3",children:[Je.jsxs("div",{className:"flex items-center gap-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[Je.jsx("div",{className:"flex-shrink-0",children:Je.jsxs("div",{className:"flex -space-x-2",children:[Je.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 border-2 border-white"}),Je.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 border-2 border-white"}),Je.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 border-2 border-white"})]})}),Je.jsxs("div",{className:"flex-1",children:[Je.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Tech Conference 2024"}),Je.jsx("p",{className:"text-xs text-gray-500",children:"10:00 AM - 2:00 PM"})]}),Je.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-500 text-white text-xs rounded-full",children:[Je.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),Je.jsx("span",{children:"Live"})]})]}),Je.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[Je.jsx("div",{className:"flex-shrink-0",children:Je.jsxs("div",{className:"flex -space-x-2",children:[Je.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-500 border-2 border-white"}),Je.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-500 border-2 border-white"})]})}),Je.jsxs("div",{className:"flex-1",children:[Je.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Workshop Series"}),Je.jsx("p",{className:"text-xs text-gray-500",children:"3:00 PM - 5:00 PM"})]}),Je.jsx("div",{className:"text-xs text-gray-500",children:"Upcoming"})]})]})]})]})]})})]}),Je.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden",children:[Je.jsx("div",{className:"absolute top-20 right-10 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),Je.jsx("div",{className:"absolute bottom-20 left-10 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse",style:{animationDelay:"2s"}})]})]}),Je.jsx("section",{id:"features",className:"py-20 bg-white",children:Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Je.jsxs("div",{className:"text-center mb-16",children:[Je.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium mb-4",children:[Je.jsx(C,{className:"w-4 h-4"}),Je.jsx("span",{children:"Powerful Features"})]}),Je.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Everything you need to manage events"}),Je.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"From creation to certification, we've got every aspect of event management covered."})]}),Je.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((e,t)=>{const s=e.icon;return Je.jsxs("div",{className:"group bg-white border-2 border-gray-200 rounded-2xl p-6 hover:border-purple-400 hover:shadow-xl transition-all duration-300",children:[Je.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-blue-100 w-14 h-14 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:Je.jsx(s,{className:"w-7 h-7 text-purple-600"})}),Je.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),Je.jsx("p",{className:"text-gray-600",children:e.description})]},t)})})]})}),Je.jsx("section",{id:"pricing",className:"py-20 bg-gradient-to-br from-purple-50 to-blue-50",children:Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Je.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[Je.jsxs("div",{children:[Je.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium mb-6",children:[Je.jsx(E,{className:"w-4 h-4"}),Je.jsx("span",{children:"Why eveange?"})]}),Je.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:["Everything you need.",Je.jsx("br",{}),Je.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Nothing you don't."})]}),Je.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Our platform is designed to streamline every aspect of event management, from initial planning to post-event certificate distribution."}),Je.jsx("div",{className:"space-y-4",children:["Create unlimited events","Custom registration forms","Real-time attendance tracking","Automated certificate generation","Payment integration","Analytics dashboard"].map((e,t)=>Je.jsxs("div",{className:"flex items-start group",children:[Je.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-green-100 flex items-center justify-center mr-3 mt-0.5 group-hover:scale-110 transition-transform",children:Je.jsx(_,{className:"w-4 h-4 text-green-600"})}),Je.jsx("span",{className:"text-gray-700 font-medium",children:e})]},t))})]}),Je.jsx("div",{className:"relative",children:Je.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-gray-200",children:[Je.jsxs("div",{className:"absolute -top-4 -right-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-2 rounded-full text-sm font-semibold shadow-lg",children:[Je.jsx(E,{className:"w-4 h-4 inline mr-1"}),"Popular Choice"]}),Je.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to get started?"}),Je.jsx("p",{className:"text-gray-600 mb-6",children:"Join thousands of event organizers who trust eveange to manage their events professionally."}),Je.jsx(o,{to:"/register",className:"btn bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white w-full text-center block py-4 rounded-xl font-semibold shadow-lg transform hover:scale-105 transition-all",children:"Start Your Free Trial"}),Je.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"No credit card required • Free forever plan"})]})})]})})}),Je.jsxs("section",{className:"relative bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-600 text-white py-20 overflow-hidden",children:[Je.jsx("div",{className:"absolute inset-0 opacity-10",children:Je.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})}),Je.jsxs("div",{className:"relative max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[Je.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Ready to transform your event management?"}),Je.jsx("p",{className:"text-xl mb-8 text-purple-100 max-w-2xl mx-auto",children:"Start creating amazing events today with our comprehensive platform. No setup fees, no hidden costs."}),Je.jsxs(o,{to:"/register",className:"inline-flex items-center gap-2 bg-white text-purple-600 hover:bg-gray-100 font-semibold py-4 px-10 rounded-xl transition-all shadow-xl transform hover:scale-105",children:["Get Started Now",Je.jsx(A,{className:"w-5 h-5"})]})]}),Je.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -mb-32 -ml-32"}),Je.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -mt-32 -mr-32"})]})]})};var Vs=function(e,t){for(var s={};e.length;){var a=e[0],r=a.code,i=a.message,n=a.path.join(".");if(!s[n])if("unionErrors"in a){var l=a.unionErrors[0].errors[0];s[n]={message:l.message,type:l.code}}else s[n]={message:i,type:r};if("unionErrors"in a&&a.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var o=s[n].types,c=o&&o[a.code];s[n]=Se(n,t,s,r,c?[].concat(c,a.message):a.message)}e.shift()}return s},Gs=function(e,t,s){return void 0===s&&(s={}),function(a,r,i){try{return Promise.resolve(function(r,n){try{var l=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](a,t)).then(function(e){return i.shouldUseNativeValidation&&we({},i),{errors:{},values:s.raw?a:e}})}catch(Et){return n(Et)}return l&&l.then?l.then(void 0,n):l}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:ke(Vs(e.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};var t;throw e}))}catch(Et){return Promise.reject(Et)}}};const Ys=Ce({email:Ee().email("Invalid email address"),password:Ee().min(1,"Password is required"),rememberMe:_e().optional().default(!1)}),Qs=()=>{const{login:e,isLoading:t,error:s,isAuthenticated:a}=Is(),{register:r,handleSubmit:i,formState:{errors:n,isSubmitting:l}}=Ae({resolver:Gs(Ys),defaultValues:{rememberMe:!0}});if(a)return Je.jsx(c,{to:"/dashboard",replace:!0});return Je.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Je.jsxs("div",{className:"max-w-md w-full space-y-8",children:[Je.jsxs("div",{children:[Je.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),Je.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",Je.jsx(o,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"create a new account"})]})]}),s&&Je.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:s}),Je.jsxs("form",{className:"mt-8 space-y-6",onSubmit:i(async t=>{await e(t)}),children:[Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),Je.jsx("input",{...r("email"),type:"email",className:"input",placeholder:"Enter your email"}),n.email&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),Je.jsx("input",{...r("password"),type:"password",className:"input",placeholder:"Enter your password"}),n.password&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password.message})]})]}),Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("input",{...r("rememberMe"),id:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),Je.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),Je.jsx("div",{className:"text-sm",children:Je.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),Je.jsx("div",{children:Je.jsx("button",{type:"submit",disabled:l||t,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:l||t?"Signing in...":"Sign in"})})]})]})})},Ws=Ce({name:Ee().min(1,"Name is required"),email:Ee().email("Invalid email address"),password:Ee().min(8,"Password must be at least 8 characters"),confirmPassword:Ee().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Hs=()=>{const{register:e,isLoading:t,error:s,isAuthenticated:a}=Is(),{register:r,handleSubmit:i,formState:{errors:n,isSubmitting:l}}=Ae({resolver:Gs(Ws)});if(a)return Je.jsx(c,{to:"/dashboard",replace:!0});return Je.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Je.jsxs("div",{className:"max-w-md w-full space-y-8",children:[Je.jsxs("div",{children:[Je.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),Je.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",Je.jsx(o,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})]}),s&&Je.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:s}),Je.jsxs("form",{className:"mt-8 space-y-6",onSubmit:i(async t=>{const{confirmPassword:s,...a}=t,r={...a,role:"participant"};await e(r)}),children:[Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),Je.jsx("input",{...r("name"),type:"text",autoComplete:"name",className:"input",placeholder:"Enter your full name"}),n.name&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.name.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),Je.jsx("input",{...r("email"),type:"email",autoComplete:"email",className:"input",placeholder:"Enter your email"}),n.email&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),Je.jsx("input",{...r("password"),type:"password",autoComplete:"new-password",className:"input",placeholder:"Create a password (min. 8 characters)"}),n.password&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),Je.jsx("input",{...r("confirmPassword"),type:"password",autoComplete:"new-password",className:"input",placeholder:"Confirm your password"}),n.confirmPassword&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.confirmPassword.message})]})]}),Je.jsx("div",{children:Je.jsx("button",{type:"submit",disabled:l||t,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:l||t?"Creating Account...":"Create Account"})})]})]})})},Js={createEvent:async e=>Ts.post("/events",e),async getEvents(e){const t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.visibility)&&t.append("visibility",e.visibility),(null==e?void 0:e.categoryId)&&t.append("categoryId",e.categoryId),(null==e?void 0:e.organizerId)&&t.append("organizerId",e.organizerId),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.upcoming)&&t.append("upcoming",e.upcoming.toString()),(null==e?void 0:e.free)&&t.append("free",e.free.toString()),(null==e?void 0:e.week)&&t.append("week",e.week.toString());const s=t.toString()?`/events?${t.toString()}`:"/events";return Ts.get(s)},getEventById:async e=>Ts.get(`/events/${e}`),updateEvent:async(e,t)=>Ts.put(`/events/${e}`,t),deleteEvent:async e=>Ts.delete(`/events/${e}`),async getMyEvents(e){const t=new URLSearchParams;(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());const s=t.toString()?`/events/my/events?${t.toString()}`:"/events/my/events";return Ts.get(s)}},Xs={async getAssignedEvents(e){const t=new URLSearchParams;(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());const s=t.toString()?`/staff/assigned-events?${t.toString()}`:"/staff/assigned-events";return Ts.get(s)}},Zs={registerForEvent:async(e,t)=>Ts.post(`/registrations/events/${e}/register`,t),getEventRegistrations:async e=>Ts.get(`/registrations/events/${e}/registrations`),checkRegistrationStatus:async e=>Ts.get(`/registrations/events/${e}/registration-status`),async getUserRegistrations(e){const t=new URLSearchParams;(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());const s=t.toString()?`/registrations/my-registrations?${t.toString()}`:"/registrations/my-registrations";return Ts.get(s)},cancelRegistration:async e=>Ts.put(`/registrations/${e}/cancel`)},Ks=(e,t)=>e?e.length<=t?e:e.substring(0,t).trim()+"...":"",ea=(e,t)=>!!e&&e.length>t,ta=()=>{const{accessToken:e,isAuthenticated:t,clearAuth:a}=Ds(),r=n(),{data:i,loading:l}=function(e,t,a=[],r){const[i,n]=s.useState(null),[l,o]=s.useState(!0),[c,d]=s.useState(null),m=s.useCallback(async()=>{try{o(!0),d(null);const s=Ps.get(e);if(s)return n(s),o(!1),s;const a=await t();return Ps.set(e,a,r),n(a),a}catch(s){throw d(s.message||"An error occurred"),s}finally{o(!1)}},[e,t,r]);s.useEffect(()=>{m()},[m,...a]);const x=s.useCallback(()=>{Ps.invalidate(e)},[e]);return{data:i,loading:l,error:c,refetch:s.useCallback(()=>(Ps.invalidate(e),m()),[e,m]),invalidate:x}}(`dashboard-${null==e?void 0:e.slice(-10)}`,async()=>{var s,i,n;if(!t||!e)throw a(),r("/login"),new Error("Not authenticated");const[l,o]=await Promise.all([Js.getMyEvents({limit:5}),Zs.getUserRegistrations({limit:5})]),c=(null==(s=l.data)?void 0:s.events)||[],d=(null==(i=o.data)?void 0:i.registrations)||[];let m=[],x=!1;try{const e=await Xs.getAssignedEvents({limit:5});Array.isArray(null==(n=e.data)?void 0:n.events)?m=e.data.events:Array.isArray(e.events)&&(m=e.events),x=m.some(e=>{var t,s;return(null==(t=e.permissions)?void 0:t.can_view_stats)||(null==(s=e.permissions)?void 0:s.can_create_certificate)})}catch(u){}return localStorage.setItem("dashboard_has_organized",(c.length>0).toString()),localStorage.setItem("dashboard_has_registrations",(d.length>0).toString()),localStorage.setItem("dashboard_has_staff",(m.length>0).toString()),localStorage.setItem("dashboard_staff_can_cert",x.toString()),{events:c,registrations:d,staffEvents:m}},[t,e],3e5),c=(null==i?void 0:i.events)||[],d=(null==i?void 0:i.registrations)||[],m=(null==i?void 0:i.staffEvents)||[];s.useEffect(()=>{t&&e||(a(),r("/login"))},[t,e,a,r]);const x=c.length,u=m.length,h=d.length;return Je.jsxs("div",{className:"container mx-auto py-8 px-4",children:[Je.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[Je.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 text-center",children:[Je.jsx("div",{className:"text-3xl font-bold text-purple-700",children:l?"...":x}),Je.jsx("div",{className:"text-gray-500 mt-2",children:"Events Organized"})]}),Je.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 text-center",children:[Je.jsx("div",{className:"text-3xl font-bold text-blue-700",children:l?"...":u}),Je.jsx("div",{className:"text-gray-500 mt-2",children:"Staff Assignments"})]}),Je.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 text-center",children:[Je.jsx("div",{className:"text-3xl font-bold text-green-700",children:l?"...":h}),Je.jsx("div",{className:"text-gray-500 mt-2",children:"Events Participated"})]})]}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Je.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("h2",{className:"font-semibold text-lg text-purple-700",children:"Organizer For"}),c.length>=5&&Je.jsx(o,{to:"/my-events/organizer",className:"text-sm text-purple-600 hover:text-purple-700 font-medium hover:underline",children:"View All"})]}),l?Je.jsx("div",{children:"Loading..."}):Je.jsxs("ul",{className:"space-y-2",children:[0===c.length&&Je.jsx("li",{className:"text-gray-400 text-sm",children:"No events organized."}),c.map(e=>Je.jsx(o,{to:`/events/${e.id}`,className:"font-medium text-purple-600 hover:underline",children:Je.jsxs("li",{className:"flex flex-col bg-purple-50 rounded-xl p-3 mb-2",children:[Je.jsx("span",{className:"truncate font-semibold mb-2",title:ea(e.title,50)?e.title:void 0,children:Ks(e.title,50)}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1 relative group",children:[Je.jsx(P,{className:"w-3 h-3 mr-1 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(e.location,40)}),ea(e.location,40)&&Je.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:e.location})]}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Je.jsx(S,{className:"w-3 h-3 mr-1 flex-shrink-0"}),new Date(e.start_date).toLocaleDateString()]})]})},e.id))]})]}),Je.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("h2",{className:"font-semibold text-lg text-blue-700",children:"Staff For"}),m.length>=5&&Je.jsx(o,{to:"/my-events/staff",className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"View All"})]}),l?Je.jsx("div",{children:"Loading..."}):0===m.length?Je.jsx("ul",{className:"space-y-2",children:Je.jsx("li",{className:"text-gray-400 text-sm",children:"No staff assignments."})}):Je.jsx("ul",{className:"space-y-2",children:m.map(e=>Je.jsx(o,{to:`/events/${e.id}/check-in`,className:"font-medium text-primary-600 hover:underline",children:Je.jsxs("li",{className:"flex flex-col bg-blue-50 rounded-xl mb-2 p-3",children:[Je.jsx("span",{className:"truncate font-semibold mb-2",title:ea(e.title,50)?e.title:void 0,children:Ks(e.title,50)}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1 relative group",children:[Je.jsx(P,{className:"w-3 h-3 mr-1 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(e.location,40)}),ea(e.location,40)&&Je.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:e.location})]}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Je.jsx(S,{className:"w-3 h-3 mr-1 flex-shrink-0"}),new Date(e.start_date).toLocaleDateString()]})]})},e.id))})]}),Je.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("h2",{className:"font-semibold text-lg text-green-700",children:"Participating In"}),d.length>=5&&Je.jsx(o,{to:"/my-events/participant",className:"text-sm text-green-600 hover:text-green-700 font-medium hover:underline",children:"View All"})]}),l?Je.jsx("div",{children:"Loading..."}):Je.jsxs("ul",{className:"space-y-2",children:[0===d.length&&Je.jsx("li",{className:"text-gray-400 text-sm",children:"No event registrations."}),d.map(e=>e.event&&Je.jsx(o,{to:`/events/${e.event.id}`,className:"font-medium text-green-600 hover:underline",children:Je.jsxs("li",{className:"flex flex-col bg-green-50 p-3 mb-2 rounded-xl",children:[Je.jsx("span",{className:"truncate font-semibold mb-2",title:ea(e.event.title,50)?e.event.title:void 0,children:Ks(e.event.title,50)}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1 relative group",children:[Je.jsx(P,{className:"w-3 h-3 mr-1 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(e.event.location,40)}),ea(e.event.location,40)&&Je.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:e.event.location})]}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Je.jsx(S,{className:"w-3 h-3 mr-1 flex-shrink-0"}),new Date(e.event.start_date).toLocaleDateString()]})]})},e.id))]})]})]})]})};class sa{static async upgradeToOrganizer(e){return Ts.post("/users/upgrade-to-organizer",e)}static async getProfile(){return Ts.get("/users/profile")}}const aa=({value:e,onChange:t,placeholder:a="Search for a location...",className:r=""})=>{const[i,n]=s.useState((null==e?void 0:e.address)||""),[l,o]=s.useState([]),[c,d]=s.useState(!1),[m,x]=s.useState(!1),[u,h]=s.useState(e||null),[p,g]=s.useState(null),[b,y]=s.useState(""),v=s.useRef(),j=s.useRef(null),N=s.useRef(null);s.useEffect(()=>{(null==e?void 0:e.address)!==i&&(n((null==e?void 0:e.address)||""),h(e||null))},[e]);return s.useEffect(()=>{const e=e=>{const t=e.target;j.current&&!j.current.contains(t)&&N.current&&!N.current.contains(t)&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),s.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),Je.jsxs("div",{className:`relative ${r}`,children:[Je.jsxs("div",{className:"relative",children:[Je.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Je.jsx(P,{className:"h-4 w-4 text-gray-400"})}),Je.jsx("input",{ref:j,type:"text",value:i,onChange:e=>{const t=e.target.value;n(t),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{(async e=>{var t,s;if(!e.trim()||e.length<3)o([]);else{d(!0),g(null);try{const a=await fetch(`https://your-backend-domain.com/api/maps/search?query=${encodeURIComponent(e)}&region=IND`);if(!a.ok){const e=await a.json().catch(()=>({}));return void(500===a.status&&(null==(t=e.error)?void 0:t.includes("API key"))?g("Location API not properly configured on server. Please contact administrator."):g("Failed to search locations. Please try again."))}const r=await a.json();r.success&&(null==(s=r.data)?void 0:s.results)&&Array.isArray(r.data.results)?(y(r.provider||"unknown"),o(r.data.results.slice(0,5)),x(!0)):o([])}catch(a){g("Network error. Please check your connection."),o([])}finally{d(!1)}}})(t)},300)},placeholder:a,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onFocus:()=>{l.length>0&&x(!0)}}),i&&Je.jsx("button",{type:"button",onClick:()=>{h(null),n(""),o([]),x(!1),g(null),t({address:"",latitude:0,longitude:0})},className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-gray-600",children:Je.jsx(f,{className:"h-4 w-4 text-gray-400"})}),c&&Je.jsx("div",{className:"absolute inset-y-0 right-8 flex items-center",children:Je.jsx(Ms,{size:"xs"})})]}),p&&Je.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:p}),u&&u.address&&Je.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:Je.jsxs("div",{className:"flex items-start space-x-2",children:[Je.jsx(P,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),Je.jsxs("div",{className:"flex-1",children:[Je.jsx("p",{className:"text-sm font-medium text-green-800",children:"Selected Location:"}),Je.jsx("p",{className:"text-sm text-green-700",children:u.address}),Je.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Coordinates: ",u.latitude.toFixed(6),","," ",u.longitude.toFixed(6)]})]})]})}),m&&l.length>0&&Je.jsxs("div",{ref:N,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[b&&Je.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:Je.jsxs("p",{className:"text-xs text-gray-500",children:["Results from"," ","olamaps"===b?"Ola Maps 🚗 ✅":"mapmyindia"===b?"MapMyIndia 🇮🇳":"Unknown Provider","olamaps"===b&&" • 500K free/month • Verified"]})}),l.map((e,s)=>Je.jsx("button",{type:"button",onMouseDown:s=>{s.preventDefault(),s.stopPropagation(),(e=>{var s,a,r,i;const l={address:e.formatted_address||e.name,latitude:(null==(a=null==(s=e.geometry)?void 0:s.location)?void 0:a.lat)||0,longitude:(null==(i=null==(r=e.geometry)?void 0:r.location)?void 0:i.lng)||0,placeId:e.place_id};n(l.address),h(l),setTimeout(()=>{x(!1),o([])},10),g(null),t(l)})(e)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0",children:Je.jsxs("div",{className:"flex items-start space-x-2",children:[Je.jsx(P,{className:"h-4 w-4 text-gray-400 mt-0.5 flex-shrink-0"}),Je.jsxs("div",{className:"flex-1 min-w-0",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),Je.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.formatted_address})]})]})},e.place_id||s))]}),m&&0===l.length&&i.length>=3&&!c&&!p&&Je.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4",children:Je.jsxs("div",{className:"text-center text-gray-500",children:[Je.jsx(z,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),Je.jsxs("p",{className:"text-sm",children:['No locations found for "',i,'"']}),Je.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try a different search term"})]})})]})},ra=Ce({organizationName:Ee().min(1,"Organization name is required"),phoneNumber:Ee().optional(),description:Ee().optional()}),ia=({isOpen:e,onClose:t,onSuccess:a})=>{const[r,i]=s.useState(!1),{updateUser:n}=Is(),{register:l,handleSubmit:o,formState:{errors:c},reset:d}=Ae({resolver:Gs(ra)}),m=()=>{r||(d(),t())};return e?Je.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Je.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[Je.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Become an Event Organizer"}),Je.jsx("button",{onClick:m,disabled:r,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:Je.jsx(f,{className:"h-6 w-6"})})]}),Je.jsxs("div",{className:"p-6",children:[Je.jsx("p",{className:"text-gray-600 mb-6",children:"To create events, you need to upgrade your account to an organizer. Please provide some additional information about your organization."}),Je.jsxs("form",{onSubmit:o(async e=>{try{i(!0);const t={organizationName:e.organizationName,phoneNumber:e.phoneNumber||void 0},s=await sa.upgradeToOrganizer(t);if(!s.success||!s.data)throw new Error(s.error||"Failed to upgrade to organizer");{const e=s.data.user,t=e,r={...e,organizationName:e.organizationName||t.organization_name||"",phoneNumber:e.phoneNumber||t.phone_number||""};n(r),Zt.success("Successfully upgraded to organizer!"),d(),a()}}catch(t){Zt.error(t instanceof Error?t.message:"Failed to upgrade to organizer. Please try again.")}finally{i(!1)}}),className:"space-y-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name *"}),Je.jsx("input",{...l("organizationName"),type:"text",id:"organizationName",className:"input",placeholder:"Enter your organization name",disabled:r}),c.organizationName&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.organizationName.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number (Optional)"}),Je.jsx("input",{...l("phoneNumber"),type:"tel",id:"phoneNumber",className:"input",placeholder:"Enter your phone number",disabled:r}),c.phoneNumber&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.phoneNumber.message})]}),Je.jsxs("div",{className:"flex gap-3 pt-4",children:[Je.jsx("button",{type:"button",onClick:m,disabled:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),Je.jsx("button",{type:"submit",disabled:r,className:"flex-1 btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Upgrading...":"Upgrade Account"})]})]})]})]})}):null};function na(e){var t,s;return"string"==typeof e?e:e instanceof Error?e.message:(null==(s=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:s.error)?e.response.data.error:(null==e?void 0:e.error)?e.error:(null==e?void 0:e.message)?e.message:(null==e?void 0:e.errors)&&Array.isArray(e.errors)?e.errors.map(e=>e.message||e).join(", "):"An unexpected error occurred"}function la(e,t){const s=t||function(e){const t=na(e).toLowerCase();return t.includes("network")||t.includes("fetch")?"Network error. Please check your internet connection and try again.":t.includes("timeout")||t.includes("timed out")?"Request timed out. Please try again in a moment.":t.includes("upload")||t.includes("file")?t.includes("size")||t.includes("large")?"File is too large. Please upload a smaller file.":t.includes("format")||t.includes("type")?"Invalid file format. Please upload a valid file.":"Upload failed. Please check your file and try again.":t.includes("unauthorized")||t.includes("authentication")||t.includes("token")?"Session expired. Please log in again.":t.includes("forbidden")||t.includes("permission")?"You don't have permission to perform this action.":t.includes("validation")||t.includes("invalid")?na(e):t.includes("500")||t.includes("server error")?"Server error. Please try again in a few moments.":t.includes("database")||t.includes("query")?"Database error. Please try again later.":na(e)}(e);Zt.error(s,{duration:5e3,icon:"❌"})}function oa(e){Zt.success(e,{duration:4e3,icon:"✅"})}function ca(e="Processing..."){return Zt.loading(e)}function da(e){Zt.dismiss(e)}const ma=Ce({title:Ee().min(1,"Title is required"),description:Ee().min(1,"Description is required"),startDate:Ee().min(1,"Start date is required"),endDate:Ee().min(1,"End date is required"),location:Ee().min(1,"Location is required"),latitude:Pe().optional(),longitude:Pe().optional(),capacity:Pe().min(1,"Capacity must be at least 1"),bannerUrl:Ee().url("Must be a valid URL").optional().or(ze("")),visibility:De(["public","private","invite-only"]),registrationDeadline:Ee().optional(),isPaid:_e(),price:Pe().min(0,"Price must be 0 or greater").optional()}),xa=()=>{const e=n(),{user:t,updateUser:a}=Is(),r=!(null==t?void 0:t.organizationName)||!(null==t?void 0:t.phoneNumber),[i,l]=s.useState(!1),[o,c]=s.useState(!1),[d,m]=s.useState(void 0);s.useEffect(()=>{c(!(!t||!r))},[t,r]);const{register:x,handleSubmit:u,watch:h,setValue:p,formState:{errors:g}}=Ae({resolver:Gs(ma),defaultValues:{visibility:"public",isPaid:!1,capacity:50}}),f=h("isPaid");return Je.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Event"}),Je.jsx("button",{type:"button",onClick:()=>e(-1),className:"text-gray-600 hover:text-gray-900",children:"← Back"})]}),!o&&!r&&Je.jsxs("form",{onSubmit:u(async t=>{let s;try{const a=new Date(t.startDate);if(new Date(t.endDate)<=a)return void la("End date must be after start date");if(t.registrationDeadline){if(new Date(t.registrationDeadline)>=a)return void la("Registration deadline must be before the event start date")}l(!0),s=ca("Creating event...");const r={title:t.title,description:t.description,startDate:t.startDate,endDate:t.endDate,location:t.location,latitude:t.latitude,longitude:t.longitude,capacity:t.capacity,bannerUrl:t.bannerUrl||void 0,visibility:t.visibility,registrationDeadline:t.registrationDeadline||void 0,isPaid:t.isPaid,price:t.isPaid?t.price:void 0},i=await Js.createEvent(r);i.success&&i.data?(da(s),oa("Event created successfully!"),zs(),e(`/events/${i.data.event.id}`)):(da(s),la(i.error||"Failed to create event"))}catch(a){s&&da(s),la(a)}finally{l(!1)}}),className:"card space-y-6",children:[Je.jsxs("div",{className:"form-section",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Information"}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"title",className:"form-label",children:"Event Title *"}),Je.jsx("input",{...x("title"),type:"text",id:"title",className:"input "+(g.title?"border-red-500":""),placeholder:"Enter event title"}),g.title&&Je.jsx("p",{className:"form-error",children:g.title.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"description",className:"form-label",children:"Description *"}),Je.jsx("textarea",{...x("description"),id:"description",rows:4,className:"input "+(g.description?"border-red-500":""),placeholder:"Describe your event"}),g.description&&Je.jsx("p",{className:"form-error",children:g.description.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"location",className:"form-label",children:"Event Location *"}),Je.jsx(aa,{value:d,onChange:e=>{m(e),p("location",e.address),p("latitude",e.latitude),p("longitude",e.longitude)},placeholder:"Search for event location...",className:"mt-1"}),g.location&&Je.jsx("p",{className:"form-error",children:g.location.message}),Je.jsx("input",{type:"hidden",...x("location")}),Je.jsx("input",{type:"hidden",...x("latitude",{valueAsNumber:!0})}),Je.jsx("input",{type:"hidden",...x("longitude",{valueAsNumber:!0})})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"bannerUrl",className:"form-label",children:"Banner Image URL"}),Je.jsx("input",{...x("bannerUrl"),type:"url",id:"bannerUrl",className:"input "+(g.bannerUrl?"border-red-500":""),placeholder:"https://example.com/banner.jpg"}),g.bannerUrl&&Je.jsx("p",{className:"form-error",children:g.bannerUrl.message})]})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Date & Time"}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date & Time *"}),Je.jsx("input",{...x("startDate"),type:"datetime-local",id:"startDate",className:"input "+(g.startDate?"border-red-500":"")}),g.startDate&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.startDate.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date & Time *"}),Je.jsx("input",{...x("endDate"),type:"datetime-local",id:"endDate",className:"input "+(g.endDate?"border-red-500":"")}),g.endDate&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.endDate.message})]})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"registrationDeadline",className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Deadline"}),Je.jsx("input",{...x("registrationDeadline"),type:"datetime-local",id:"registrationDeadline",className:"input"}),Je.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional: Set a deadline for registrations"})]})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Event Settings"}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Capacity *"}),Je.jsx("input",{...x("capacity",{valueAsNumber:!0}),type:"number",id:"capacity",min:"1",className:"input "+(g.capacity?"border-red-500":"")}),g.capacity&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.capacity.message})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"visibility",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Visibility *"}),Je.jsxs("select",{...x("visibility"),id:"visibility",className:"input",children:[Je.jsx("option",{value:"public",children:"Public"}),Je.jsx("option",{value:"private",children:"Private"}),Je.jsx("option",{value:"invite-only",children:"Invite Only"})]})]})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("input",{...x("isPaid"),type:"checkbox",id:"isPaid",className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),Je.jsx("label",{htmlFor:"isPaid",className:"ml-2 text-sm font-medium text-gray-700",children:"This is a paid event"})]}),f&&Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ticket Price *"}),Je.jsxs("div",{className:"relative",children:[Je.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),Je.jsx("input",{...x("price",{valueAsNumber:!0}),type:"number",id:"price",min:"0",step:"0.5",className:"input pl-8 "+(g.price?"border-red-500":""),placeholder:"0.00"})]}),g.price&&Je.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.price.message})]})]})]}),Je.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[Je.jsx("button",{type:"button",onClick:()=>e(-1),className:"btn btn-secondary",disabled:i,children:"Cancel"}),Je.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(Ms,{size:"xs",className:"border-white mr-2"}),"Creating..."]}):"Create Event"})]})]}),Je.jsx(ia,{isOpen:o,onClose:()=>c(!1),onSuccess:async()=>{try{const e=await sa.getProfile();e.success&&e.data&&a(e.data.user)}catch(e){}finally{c(!1)}}})]})};function ua({eventId:e}){const{accessToken:t}=Ds(),[a,r]=s.useState([]),[i,n]=s.useState(!0),[l,o]=s.useState(null),[c,d]=s.useState(!1),[m,x]=s.useState(!1),[u,h]=s.useState(!1),[p,g]=s.useState(null),[f,b]=s.useState({email:"",name:"",permissions:{can_check_in:!0,can_view_stats:!0,can_create_certificate:!1}});s.useEffect(()=>{y(),v()},[e]),s.useEffect(()=>{const e=e=>{p&&!e.target.closest(".relative")&&g(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[p]);const y=async()=>{try{o(null);const s=await fetch(`/api/checkin/events/${e}/staff`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const e=await s.json();r(Array.isArray(e.staff)?e.staff:[])}else r([]),403===s.status?o("You don't have permission to view staff for this event. Only event organizers and administrators can access staff management."):404===s.status?o("Event not found. Please check if the event still exists and refresh the page."):401===s.status?o("Your session has expired. Please log in again to view staff information."):o("Unable to load staff information. Please try refreshing the page.")}catch(s){r([]),o("Unable to connect to the server. Please check your internet connection and try again.")}finally{n(!1)}},v=async()=>{try{h(!0);const e=await fetch("/api/email/status",{headers:{Authorization:`Bearer ${t}`}});if(e.ok){const t=await e.json();x(t.hasGmailPermission)}}catch(e){}finally{h(!1)}},j=async s=>{if(confirm("Are you sure you want to remove this staff member?"))try{const a=await fetch(`/api/checkin/events/${e}/staff/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(a.ok)await y(),alert("Staff member removed successfully");else{const e=await a.json();let t="Failed to remove staff member";t=403===a.status?"You don't have permission to remove staff members from this event. Only event organizers and administrators can manage staff.":404===a.status?"Staff member not found. They may have already been removed or the event information is outdated.":400===a.status?"Cannot remove this staff member. They may be currently checked in or have active sessions.":e.error||"An unexpected error occurred while removing the staff member.",alert(t)}}catch(a){alert("Unable to connect to the server. Please check your internet connection and try again.")}};return i?Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"animate-pulse",children:[Je.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),Je.jsxs("div",{className:"space-y-3",children:[Je.jsx("div",{className:"h-4 bg-gray-200 rounded"}),Je.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})}):Je.jsxs("div",{className:"bg-white rounded-lg shadow",children:[Je.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{children:[Je.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Event Staff Management"}),Je.jsx("p",{className:"text-sm text-gray-600",children:"Manage staff access for check-in and event management"})]}),Je.jsxs("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[Je.jsx(D,{className:"h-4 w-4"}),Je.jsx("span",{children:"Add Staff"})]})]})}),!m&&Je.jsx("div",{className:"px-6 py-4 bg-amber-50 border-b border-amber-200",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx(R,{className:"h-5 w-5 text-amber-600"}),Je.jsxs("div",{children:[Je.jsx("h4",{className:"text-sm font-medium text-amber-800",children:"Gmail Permission Required"}),Je.jsx("p",{className:"text-sm text-amber-700",children:"Grant Gmail access to automatically send staff credentials from your email account"})]})]}),Je.jsx("button",{onClick:async()=>{try{const e=await fetch("/api/email/authorize",{headers:{Authorization:`Bearer ${t}`}});if(e.ok){const t=await e.json();window.location.href=t.authUrl}}catch(e){}},disabled:u,className:"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 disabled:opacity-50",children:u?"Checking...":"Grant Permission"})]})}),m&&Je.jsx("div",{className:"px-6 py-3 bg-green-50 border-b border-green-200",children:Je.jsxs("div",{className:"flex items-center space-x-2",children:[Je.jsx(R,{className:"h-4 w-4 text-green-600"}),Je.jsx("span",{className:"text-sm text-green-800",children:"✓ Gmail permission granted - Staff emails will be sent from your account"})]})}),c&&Je.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:Je.jsxs("form",{onSubmit:async s=>{var a,r,i;s.preventDefault();try{const s=[];f.permissions.can_check_in&&s.push("check-in"),f.permissions.can_view_stats&&s.push("view-stats"),f.permissions.can_create_certificate&&s.push("create-certificate");const n={email:f.email,name:f.name,permissions:s},l=await fetch(`/api/checkin/events/${e}/staff`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(n)});if(l.ok)await y(),b({email:"",name:"",permissions:{can_check_in:!0,can_view_stats:!0,can_create_certificate:!1}}),d(!1),alert("Staff member added successfully! Login credentials will be sent via email.");else{const e=await l.json();let t="Failed to add staff member";t=400===l.status?(null==(a=e.error)?void 0:a.includes("already exists"))||(null==(r=e.error)?void 0:r.includes("duplicate"))?"This person is already a staff member for this event.":(null==(i=e.error)?void 0:i.includes("validation"))||e.details?"Please check that the email address and name are valid and try again.":e.error||"Invalid staff information provided.":403===l.status?"You don't have permission to add staff members to this event. Only event organizers and administrators can manage staff.":404===l.status?"Event not found. Please refresh the page and try again.":500===l.status?"Server error occurred while adding staff member. Please try again in a few moments.":e.error||"An unexpected error occurred while adding the staff member.",alert(t)}}catch(n){alert("Unable to connect to the server. Please check your internet connection and try again.")}},className:"space-y-4",children:[Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),Je.jsx("input",{type:"email",required:!0,value:f.email,onChange:e=>b({...f,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"staff@example.com"})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),Je.jsx("input",{type:"text",required:!0,value:f.name,onChange:e=>b({...f,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"})]})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),Je.jsxs("div",{className:"space-y-2",children:[Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"checkbox",checked:f.permissions.can_check_in,onChange:e=>b({...f,permissions:{...f.permissions,can_check_in:e.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),Je.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Can check-in participants"})]}),Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"checkbox",checked:f.permissions.can_view_stats,onChange:e=>b({...f,permissions:{...f.permissions,can_view_stats:e.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),Je.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Can view check-in statistics"})]}),Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"checkbox",checked:f.permissions.can_create_certificate,onChange:e=>b({...f,permissions:{...f.permissions,can_create_certificate:e.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),Je.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Can manage certificates"})]})]})]}),Je.jsxs("div",{className:"flex space-x-3",children:[Je.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Staff Member"}),Je.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"})]})]})}),Je.jsx("div",{className:"divide-y divide-gray-200",children:i?Je.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:Je.jsx("p",{children:"Loading staff..."})}):l?Je.jsxs("div",{className:"px-6 py-8 text-center",children:[Je.jsxs("div",{className:"text-red-600 mb-4",children:[Je.jsx(F,{className:"h-12 w-12 text-red-300 mx-auto mb-4"}),Je.jsx("p",{className:"font-medium",children:l})]}),Je.jsx("button",{onClick:()=>{o(null),y()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Try Again"})]}):0===a.length?Je.jsxs("div",{className:"px-6 py-8 text-center text-gray-500",children:[Je.jsx(F,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Je.jsx("p",{children:"No staff members assigned to this event."}),Je.jsx("p",{className:"text-sm",children:"Add staff members to help with check-in and event management."})]}):a.map(t=>{var s,a,r,i,n,l,o;return Je.jsx("div",{className:"px-6 py-4",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsx("div",{className:"flex-1",children:Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx("div",{className:"flex-shrink-0",children:Je.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:Je.jsx("span",{className:"text-blue-600 font-medium text-sm",children:(null==(a=null==(s=t.user)?void 0:s.name)?void 0:a.charAt(0).toUpperCase())||"?"})})}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm font-medium text-gray-900",children:(null==(r=t.user)?void 0:r.name)||"Unknown User"}),Je.jsx("p",{className:"text-sm text-gray-600",children:(null==(i=t.user)?void 0:i.email)||"No email"}),Je.jsxs("p",{className:"text-xs text-gray-500",children:["Added"," ",new Date(t.assigned_at).toLocaleDateString()," by"," ",(null==(n=t.assigned_by_user)?void 0:n.name)||"Unknown"]})]})]})}),Je.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[Je.jsxs("div",{className:"flex space-x-2",children:[t.permissions.can_check_in&&Je.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Check-in"}),t.permissions.can_view_stats&&Je.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Je.jsx(T,{className:"h-3 w-3 mr-1"}),"Stats"]}),t.permissions.can_create_certificate?Je.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Certificates"}):null]}),Je.jsx("div",{className:"text-xs text-gray-500",children:(null==(l=t.user)?void 0:l.last_login_at)?Je.jsxs(Je.Fragment,{children:["Last login:"," ",new Date(t.user.last_login_at).toLocaleDateString()]}):"Never logged in"}),Je.jsxs("div",{className:"flex space-x-2",children:[Je.jsx("button",{onClick:()=>{var s,a;const r=encodeURIComponent(`Event Staff Access - ${e}`),i=encodeURIComponent(`Hi ${(null==(s=t.user)?void 0:s.name)||"Staff Member"},\n\nYou have been granted staff access for this event. Please check your email for login credentials.\n\nBest regards`);window.open(`mailto:${(null==(a=t.user)?void 0:a.email)||""}?subject=${r}&body=${i}`)},className:"text-blue-600 hover:text-blue-700",title:"Send email",children:Je.jsx(R,{className:"h-4 w-4"})}),Je.jsx("button",{onClick:()=>{var e;return j((null==(e=t.user)?void 0:e.id)||t.id)},className:"text-red-600 hover:text-red-700",title:"Remove staff",children:Je.jsx($,{className:"h-4 w-4"})})]})]}),Je.jsxs("div",{className:"md:hidden relative",children:[Je.jsx("button",{onClick:()=>g(p===t.id?null:t.id),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:Je.jsx(I,{className:"h-4 w-4"})}),p===t.id&&Je.jsx("div",{className:"absolute right-0 top-full mt-1 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:Je.jsxs("div",{className:"p-3 space-y-3",children:[Je.jsxs("div",{children:[Je.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Permissions:"}),Je.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.permissions.can_check_in&&Je.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Check-in"}),t.permissions.can_view_stats&&Je.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Je.jsx(T,{className:"h-3 w-3 mr-1"}),"Stats"]}),t.permissions.can_create_certificate?Je.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Certificates"}):null]})]}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Last Login:"}),Je.jsx("p",{className:"text-xs text-gray-500",children:(null==(o=t.user)?void 0:o.last_login_at)?new Date(t.user.last_login_at).toLocaleDateString():"Never logged in"})]}),Je.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-gray-100",children:[Je.jsxs("button",{onClick:()=>{var s,a;const r=encodeURIComponent(`Event Staff Access - ${e}`),i=encodeURIComponent(`Hi ${(null==(s=t.user)?void 0:s.name)||"Staff Member"},\n\nYou have been granted staff access for this event. Please check your email for login credentials.\n\nBest regards`);window.open(`mailto:${(null==(a=t.user)?void 0:a.email)||""}?subject=${r}&body=${i}`),g(null)},className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md",children:[Je.jsx(R,{className:"h-4 w-4"}),Je.jsx("span",{children:"Email"})]}),Je.jsxs("button",{onClick:()=>{var e;j((null==(e=t.user)?void 0:e.id)||t.id),g(null)},className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md",children:[Je.jsx($,{className:"h-4 w-4"}),Je.jsx("span",{children:"Remove"})]})]})]})})]})]})},t.id)})}),Je.jsx("div",{className:"px-6 py-4 bg-blue-50 border-t border-blue-200",children:Je.jsxs("div",{className:"flex items-start space-x-3",children:[Je.jsx(F,{className:"h-5 w-5 text-blue-600 mt-0.5"}),Je.jsxs("div",{className:"text-sm text-blue-800",children:[Je.jsx("p",{className:"font-medium mb-1",children:"Staff Access Information:"}),Je.jsxs("ul",{className:"space-y-1",children:[Je.jsx("li",{children:"• Staff members receive login credentials via email"}),Je.jsx("li",{children:"• They can access the check-in system with their assigned permissions"}),Je.jsx("li",{children:"• Staff accounts are created automatically if they don't exist"}),Je.jsx("li",{children:"• You can modify or revoke access at any time"})]})]})]})})]})}function ha({eventId:e,eventTitle:t,onClose:a}){const[r,i]=s.useState(!1),[n,l]=s.useState(!1),o=`${window.location.origin}/events/${e}`,c=encodeURIComponent(o),d=encodeURIComponent(t),m=[{name:"Facebook",icon:M,color:"bg-blue-600 hover:bg-blue-700",url:`https://www.facebook.com/sharer/sharer.php?u=${c}`},{name:"Twitter",icon:U,color:"bg-sky-500 hover:bg-sky-600",url:`https://twitter.com/intent/tweet?url=${c}&text=${d}`},{name:"LinkedIn",icon:B,color:"bg-blue-700 hover:bg-blue-800",url:`https://www.linkedin.com/sharing/share-offsite/?url=${c}`},{name:"WhatsApp",icon:V,color:"bg-green-500 hover:bg-green-600",url:`https://wa.me/?text=${d}%20${c}`},{name:"Email",icon:R,color:"bg-gray-600 hover:bg-gray-700",url:`mailto:?subject=${d}&body=Check%20out%20this%20event:%20${c}`}];return Je.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Je.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[Je.jsx("div",{className:"p-6 border-b border-gray-200",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:Je.jsx(L,{className:"h-5 w-5 text-blue-600"})}),Je.jsxs("div",{children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Share Event"}),Je.jsx("p",{className:"text-sm text-gray-600 truncate max-w-xs",children:t})]})]}),Je.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:Je.jsx(f,{className:"h-5 w-5"})})]})}),Je.jsxs("div",{className:"p-6 space-y-6",children:[Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Event Link"}),Je.jsxs("div",{className:"flex items-center gap-2",children:[Je.jsx("input",{type:"text",value:o,readOnly:!0,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),Je.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){}},className:"px-4 py-3 rounded-lg font-medium transition-all flex items-center gap-2 "+(r?"bg-green-500 text-white":"bg-blue-600 text-white hover:bg-blue-700"),children:r?Je.jsxs(Je.Fragment,{children:[Je.jsx(O,{className:"h-4 w-4"}),Je.jsx("span",{className:"hidden sm:inline",children:"Copied"})]}):Je.jsxs(Je.Fragment,{children:[Je.jsx(q,{className:"h-4 w-4"}),Je.jsx("span",{className:"hidden sm:inline",children:"Copy"})]})})]})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Share on Social Media"}),Je.jsx("div",{className:"grid grid-cols-5 gap-3",children:m.map(e=>Je.jsxs("button",{onClick:()=>{return t=e.url,void window.open(t,"_blank","width=600,height=400");var t},className:`${e.color} text-white p-3 rounded-lg transition-all flex flex-col items-center justify-center gap-1 group hover:scale-105`,title:`Share on ${e.name}`,children:[Je.jsx(e.icon,{className:"h-5 w-5"}),Je.jsx("span",{className:"text-xs hidden sm:block",children:e.name})]},e.name))})]}),Je.jsxs("div",{children:[Je.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"QR Code"}),Je.jsxs("button",{onClick:()=>l(!n),className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[Je.jsx(j,{className:"h-4 w-4"}),n?"Hide":"Show"," QR Code"]})]}),n&&Je.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 flex flex-col items-center",children:[Je.jsx("div",{className:"bg-white p-4 rounded-lg",children:Je.jsx(Re,{value:o,size:200})}),Je.jsx("p",{className:"text-xs text-gray-600 mt-4 text-center",children:"Scan this QR code to open the event page"})]})]}),Je.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Je.jsxs("p",{className:"text-sm text-blue-800",children:[Je.jsx("span",{className:"font-medium",children:"💡 Tip:"})," Share this link with anyone who might be interested in attending this event."]})})]})]})})}const pa=()=>{var e,t,a,r;const{id:i}=d(),l=n(),{user:c,accessToken:m}=Ds(),[x,u]=s.useState(null),[h,p]=s.useState([]),[g,f]=s.useState(!0),[b,v]=s.useState(null),[j,w]=s.useState("about"),[k,C]=s.useState(null),[E,_]=s.useState(!1);s.useEffect(()=>{(async()=>{var e,t,s,a;if(!i)return v("Event ID is required"),void f(!1);try{f(!0);const r=await Js.getEventById(i);r.success&&r.data?u(r.data.event):(null==(e=r.error)?void 0:e.includes("not found"))||(null==(t=r.error)?void 0:t.includes("404"))?v("This event could not be found. It may have been deleted or the link is incorrect."):(null==(s=r.error)?void 0:s.includes("permission"))||(null==(a=r.error)?void 0:a.includes("access"))?v("You don't have permission to view this event. It may be private or restricted."):v(r.error||"Event not found")}catch(r){if(r instanceof Error&&"response"in r){const e=r;404===e.status?v("This event could not be found."):403===e.status?v("You don't have permission to view this event."):401===e.status?v("Please log in to view this event."):v("An unexpected error occurred while loading the event.")}else v("Unable to connect to the server.")}finally{f(!1)}})(),(async()=>{if(c)try{const e=await Zs.getUserRegistrations();e.success&&e.data&&p(e.data.registrations)}catch(e){}})(),(async()=>{if(c&&i&&m)try{const e=await fetch(`/api/events/${i}/user-role`,{headers:{Authorization:`Bearer ${m}`}});if(e.ok){const t=await e.json();t.success&&t.data&&C(t.data.role)}}catch(e){}})()},[i,c,m]);const A=()=>{_(!0)};if(g)return Je.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading event..."})});if(b||!x)return Je.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Je.jsxs("div",{className:"text-center max-w-md px-4",children:[Je.jsx("p",{className:"text-red-600 mb-4",children:b}),Je.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[Je.jsx(G,{className:"w-4 h-4"}),Je.jsx("span",{children:"Go Back"})]})]})});const z="organizer"===k,R=new Date(x.start_date),F=new Date(x.end_date),T=R>new Date,$=new Date>=R&&new Date<=F,I=(null==(e=x.registrations)?void 0:e.length)||0,O=(e=>{var t;const s=h.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});return!!s&&((null==(t=s.event)?void 0:t.is_paid)?"completed"===s.payment_status:"confirmed"===s.status||null===s.payment_status)})(x.id),q=(e=>{var t;const s=h.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});if(!s)return;if(null==(t=s.event)?void 0:t.is_paid)return"completed"===s.payment_status?s:void 0;return"confirmed"===s.status||null===s.payment_status?s:void 0})(x.id),M=[{name:"Company Name",tier:"platinum",logo:null},{name:"Company Name",tier:"gold",logo:null},{name:"Company Name",tier:"gold",logo:null},{name:"Company Name",tier:"silver",logo:null},{name:"Company Name",tier:"silver",logo:null},{name:"Company Name",tier:"silver",logo:null}];return Je.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Je.jsxs("div",{className:"relative bg-gradient-to-br from-primary-600 to-primary-800",children:[x.banner_url?Je.jsxs("div",{className:"relative h-[500px]",children:[Je.jsx("img",{src:x.banner_url,alt:x.title,className:"w-full h-full object-cover"}),Je.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),Je.jsx("div",{className:"absolute top-6 right-6 z-20",children:Je.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-gray-900 rounded-lg hover:bg-white transition-all shadow-lg",children:[Je.jsx(L,{className:"w-4 h-4"}),Je.jsx("span",{className:"font-medium",children:"Share"})]})})]}):Je.jsx("div",{className:"relative h-[500px] bg-gradient-to-br from-primary-600 to-primary-800",children:Je.jsx("div",{className:"absolute top-6 right-6 z-20",children:Je.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm text-gray-900 rounded-lg hover:bg-white transition-all shadow-lg",children:[Je.jsx(L,{className:"w-4 h-4"}),Je.jsx("span",{className:"font-medium",children:"Share"})]})})}),Je.jsx("div",{className:"absolute inset-0 flex items-end",children:Je.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:Je.jsxs("div",{className:"max-w-4xl",children:[Je.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Je.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center gap-2 text-white/80 hover:text-white transition-colors",children:[Je.jsx(G,{className:"w-4 h-4"}),Je.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),Je.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${$?"bg-green-500":T?"bg-blue-500":"bg-gray-500"} text-white shadow-lg`,children:$?"Live Now":T?"Upcoming":"Past Event"}),x.is_paid&&Je.jsxs("span",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-yellow-500 text-white shadow-lg",children:["$",x.price]})]}),Je.jsx("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight",children:x.title}),Je.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-white/90",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(S,{className:"w-5 h-5 mr-3 flex-shrink-0"}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm opacity-80",children:"Date"}),Je.jsx("div",{className:"font-semibold",children:R.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),Je.jsxs("div",{className:"flex items-start group relative",children:[Je.jsx(P,{className:"w-5 h-5 mr-3 flex-shrink-0"}),Je.jsxs("div",{className:"flex-1 min-w-0",children:[Je.jsx("div",{className:"text-sm opacity-80",children:"Location"}),Je.jsx("div",{className:"font-semibold break-words",children:Ks(x.location,100)}),ea(x.location,100)&&Je.jsx("div",{className:"absolute left-0 top-full mt-1 hidden group-hover:block z-10 w-max max-w-md bg-gray-900 text-white text-sm rounded py-2 px-3 shadow-lg",children:x.location})]})]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(y,{className:"w-5 h-5 mr-3 flex-shrink-0"}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm opacity-80",children:"Attendees"}),Je.jsxs("div",{className:"font-semibold",children:[I," / ",x.capacity]})]})]})]})]})})})]}),Je.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40 shadow-md",children:Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[Je.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[Je.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(Y,{className:"w-4 h-4 mr-2"}),R.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(y,{className:"w-4 h-4 mr-2"}),I," Registered"]})]}),Je.jsx("div",{className:"flex items-center gap-3",children:O&&q?Je.jsxs(Je.Fragment,{children:[Je.jsxs("div",{className:"flex items-center text-green-600 font-medium",children:[Je.jsx(Q,{className:"w-5 h-5 mr-2"}),"You're Registered"]}),Je.jsx(o,{to:`/ticket/${q.id}`,className:"px-4 py-2 bg-white text-primary-600 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors font-medium shadow-sm",children:"Ticket"})]}):T?Je.jsx(o,{to:`/events/${x.id}/register`,className:"px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-lg",children:"Register Now"}):Je.jsx("div",{className:"text-gray-500 font-medium",children:"Registration Closed"})})]}),Je.jsx("nav",{className:"mt-6 flex gap-8 overflow-x-auto border-t border-gray-200 pt-2",children:["about","speakers","schedule","sponsors"].map(e=>Je.jsx("button",{onClick:()=>w(e),className:"py-3 px-2 border-b-2 font-medium text-sm transition-colors whitespace-nowrap "+(j===e?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})}),z&&Je.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-purple-50 border-b border-primary-100",children:Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:Je.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[Je.jsx("h3",{className:"text-sm font-semibold text-primary-900",children:"Quick Management"}),Je.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Je.jsxs(o,{to:`/events/${x.id}/registrations`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Je.jsx(D,{className:"w-4 h-4"}),Je.jsx("span",{children:"Registrations"})]}),Je.jsxs(o,{to:`/events/${x.id}/attendance`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Je.jsx(Q,{className:"w-4 h-4"}),Je.jsx("span",{children:"Attendance"})]}),Je.jsxs(o,{to:`/events/${x.id}/certificates`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Je.jsx(N,{className:"w-4 h-4"}),Je.jsx("span",{children:"Certificates"})]}),Je.jsxs(o,{to:`/events/${x.id}/form-builder?type=registration`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Je.jsx(W,{className:"w-4 h-4"}),Je.jsx("span",{children:"Registration Form"})]}),Je.jsxs(o,{to:`/events/${x.id}/form-builder?type=feedback`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Je.jsx(W,{className:"w-4 h-4"}),Je.jsx("span",{children:"Feedback Form"})]}),Je.jsxs(o,{to:`/events/${x.id}/feedback-responses`,className:"flex items-center gap-2 px-4 py-2 bg-white text-primary-700 rounded-lg hover:bg-primary-50 transition-colors text-sm font-medium shadow-sm border border-primary-200",children:[Je.jsx(H,{className:"w-4 h-4"}),Je.jsx("span",{children:"View Feedback"})]})]})]})})}),Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:["about"===j&&Je.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[Je.jsxs("div",{className:"lg:col-span-2",children:[Je.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"About this Event"}),Je.jsxs("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",children:[Je.jsx("p",{children:x.description}),Je.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"What to Expect"}),Je.jsxs("ul",{className:"space-y-3",children:[Je.jsxs("li",{className:"flex items-start",children:[Je.jsx(Q,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Je.jsx("span",{children:"Engaging presentations from industry experts"})]}),Je.jsxs("li",{className:"flex items-start",children:[Je.jsx(Q,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Je.jsx("span",{children:"Networking opportunities with fellow attendees"})]}),Je.jsxs("li",{className:"flex items-start",children:[Je.jsx(Q,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Je.jsx("span",{children:"Hands-on workshops and interactive sessions"})]}),Je.jsxs("li",{className:"flex items-start",children:[Je.jsx(Q,{className:"w-5 h-5 mr-3 text-primary-600 mt-1 flex-shrink-0"}),Je.jsx("span",{children:"Access to exclusive event materials and resources"})]})]})]})]}),Je.jsx("div",{className:"space-y-6",children:Je.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[Je.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Event Details"}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Organizer"}),Je.jsx("div",{className:"font-semibold text-gray-900",children:(null==(t=x.organizer)?void 0:t.name)||"N/A"}),(null==(a=x.organizer)?void 0:a.organization_name)&&Je.jsx("div",{className:"text-sm text-gray-600",children:x.organizer.organization_name})]}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Category"}),Je.jsx("div",{className:"font-semibold text-gray-900",children:(null==(r=x.category)?void 0:r.name)||"General"})]}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Event Duration"}),Je.jsxs("div",{className:"font-semibold text-gray-900",children:[R.toLocaleDateString()," -"," ",F.toLocaleDateString()]})]}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Registration Deadline"}),Je.jsx("div",{className:"font-semibold text-gray-900",children:x.registration_deadline?new Date(x.registration_deadline).toLocaleDateString():"Until event starts"})]}),Je.jsxs("button",{onClick:()=>{const e=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(x.location)}`;window.open(e,"_blank")},className:"w-full flex items-center justify-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[Je.jsx(P,{className:"w-4 h-4 mr-2"}),"View on Google Maps"]})]})]})})]}),"speakers"===j&&Je.jsxs("div",{children:[Je.jsxs("div",{className:"text-center mb-12",children:[Je.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Featured Speakers"}),Je.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Learn from industry leaders and experts in their fields"})]}),Je.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{name:"Speaker Name",role:"Coming Soon",company:"TBA"},{name:"Speaker Name",role:"Coming Soon",company:"TBA"},{name:"Speaker Name",role:"Coming Soon",company:"TBA"},{name:"Speaker Name",role:"Coming Soon",company:"TBA"}].map((e,t)=>Je.jsxs("div",{className:"text-center group",children:[Je.jsxs("div",{className:"relative mb-6 overflow-hidden rounded-2xl",children:[Je.jsx("div",{className:"aspect-square bg-gradient-to-br from-primary-100 to-purple-100 flex items-center justify-center",children:Je.jsx(J,{className:"w-16 h-16 text-primary-400"})}),Je.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary-900/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),Je.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:e.name}),Je.jsx("p",{className:"text-gray-600 mb-1",children:e.role}),Je.jsx("p",{className:"text-sm text-gray-500",children:e.company})]},t))}),Je.jsx("div",{className:"mt-12 bg-primary-50 rounded-2xl p-8 text-center border border-primary-100",children:Je.jsx("p",{className:"text-gray-700",children:"Speaker information will be available soon. Check back for updates!"})})]}),"schedule"===j&&Je.jsxs("div",{children:[Je.jsxs("div",{className:"text-center mb-12",children:[Je.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Event Schedule"}),Je.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Full day agenda with sessions, workshops, and networking breaks"})]}),Je.jsxs("div",{className:"max-w-4xl mx-auto",children:[Je.jsx("div",{className:"space-y-4",children:[{time:"09:00 AM",title:"Registration & Welcome Coffee",type:"break"},{time:"10:00 AM",title:"Opening Keynote",type:"keynote",speaker:"TBA"},{time:"11:30 AM",title:"Panel Discussion",type:"panel",speaker:"Multiple Speakers"},{time:"12:30 PM",title:"Lunch & Networking",type:"break"},{time:"02:00 PM",title:"Workshop Sessions",type:"workshop",speaker:"TBA"},{time:"04:00 PM",title:"Closing Remarks",type:"keynote",speaker:"TBA"}].map((e,t)=>Je.jsxs("div",{className:"flex gap-6 p-6 rounded-2xl border transition-all "+("break"===e.type?"bg-gray-50 border-gray-200":"bg-white border-primary-200 hover:border-primary-300 shadow-sm hover:shadow"),children:[Je.jsx("div",{className:"flex-shrink-0 w-24 text-right",children:Je.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e.time})}),Je.jsx("div",{className:"flex-shrink-0",children:"break"===e.type?Je.jsx(X,{className:"w-6 h-6 text-gray-400"}):Je.jsx(J,{className:"w-6 h-6 text-primary-600"})}),Je.jsxs("div",{className:"flex-grow",children:[Je.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:e.title}),e.speaker&&Je.jsx("p",{className:"text-gray-600",children:e.speaker})]})]},t))}),Je.jsx("div",{className:"mt-12 bg-primary-50 rounded-2xl p-8 text-center border border-primary-100",children:Je.jsx("p",{className:"text-gray-700",children:"Detailed schedule will be announced closer to the event date"})})]})]}),"sponsors"===j&&Je.jsxs("div",{children:[Je.jsxs("div",{className:"text-center mb-12",children:[Je.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Event Sponsors"}),Je.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Thank you to our sponsors who make this event possible"})]}),Je.jsxs("div",{className:"mb-12",children:[Je.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Platinum Sponsors"}),Je.jsx("div",{className:"grid md:grid-cols-1 gap-8 max-w-2xl mx-auto",children:M.filter(e=>"platinum"===e.tier).map((e,t)=>Je.jsxs("div",{className:"bg-white border-2 border-primary-200 rounded-2xl p-12 text-center shadow-sm",children:[Je.jsx("div",{className:"h-32 flex items-center justify-center",children:Je.jsx(Z,{className:"w-20 h-20 text-primary-400"})}),Je.jsx("p",{className:"mt-4 text-xl font-bold text-gray-900",children:e.name})]},t))})]}),Je.jsxs("div",{className:"mb-12",children:[Je.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Gold Sponsors"}),Je.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:M.filter(e=>"gold"===e.tier).map((e,t)=>Je.jsxs("div",{className:"bg-white border border-gray-300 rounded-2xl p-8 text-center shadow-sm",children:[Je.jsx("div",{className:"h-24 flex items-center justify-center",children:Je.jsx(Z,{className:"w-16 h-16 text-gray-400"})}),Je.jsx("p",{className:"mt-4 text-lg font-bold text-gray-900",children:e.name})]},t))})]}),Je.jsxs("div",{children:[Je.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Silver Sponsors"}),Je.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:M.filter(e=>"silver"===e.tier).map((e,t)=>Je.jsxs("div",{className:"bg-white border border-gray-300 rounded-xl p-6 text-center",children:[Je.jsx("div",{className:"h-20 flex items-center justify-center",children:Je.jsx(Z,{className:"w-12 h-12 text-gray-400"})}),Je.jsx("p",{className:"mt-3 font-semibold text-gray-900",children:e.name})]},t))})]}),Je.jsx("div",{className:"mt-12 bg-primary-50 rounded-2xl p-8 text-center border border-primary-100",children:Je.jsx("p",{className:"text-gray-700",children:"Interested in sponsoring this event? Contact the organizer for opportunities."})})]})]}),z&&Je.jsx("div",{className:"border-t border-gray-200 bg-white",children:Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:Je.jsx(ua,{eventId:x.id})})}),E&&Je.jsx(ha,{eventId:x.id,eventTitle:x.title,onClose:()=>_(!1)})]})},ga={getFormTemplates:async()=>Ts.get("/forms/templates"),createForm:async(e,t)=>Ts.post(`/forms/events/${e}/form`,t),async getForm(e,t){const s=t?`?type=${t}`:"";return Ts.get(`/forms/events/${e}/form${s}`)},updateForm:async(e,t,s)=>Ts.put(`/forms/events/${e}/form/${t}`,s),deleteForm:async(e,t)=>Ts.delete(`/forms/events/${e}/form/${t}`)};const fa={action:"register for the event",fallbackMessage:"Registration failed. Please try again."};function ba(e,t={}){const s=function(e,t={}){var s;const{action:a,fallbackMessage:r}=t,i=r||(a?`Failed to ${a}`:"An unexpected error occurred");if(e instanceof Error&&"response"in e){const t=e,r=t.status,n=(null==(s=t.response)?void 0:s.error)||"";switch(r){case 400:return n.includes("validation")||n.includes("invalid")?"Please check your information and try again.":n.includes("deadline")?"The deadline for this action has passed.":n.includes("capacity")||n.includes("full")?"This action cannot be completed due to capacity limitations.":n.includes("already")?"This action has already been completed.":n||"Invalid request. Please check your information.";case 401:return"Your session has expired. Please log in again.";case 403:return n.includes("organizer")?"As an organizer, you cannot perform this action on your own event.":n.includes("permission")||n.includes("access")?"You don't have permission to perform this action.":n.includes("invitation")||n.includes("private")?"This is a private resource that requires special access.":n||"Access denied. You don't have permission for this action.";case 404:return(null==a?void 0:a.includes("event"))?"The event could not be found. It may have been deleted or the link is incorrect.":(null==a?void 0:a.includes("user"))||(null==a?void 0:a.includes("staff"))?"The user could not be found. They may have been removed or the information is outdated.":n||"The requested resource could not be found.";case 409:return n.includes("already registered")?"You have already registered for this event.":n.includes("already exists")?"This item already exists. Please use a different name or identifier.":n||"This action conflicts with existing data.";case 429:return n.includes("Rate limit")?n:"Too many requests. Please wait a moment and try again.";case 500:case 502:case 503:return"Server error occurred. Please try again in a few moments.";default:return n||i}}return e instanceof Error?e.message.includes("network")||e.message.includes("fetch")||e.message.includes("connection")?"Unable to connect to the server. Please check your internet connection and try again.":e.message.includes("timeout")?"The request timed out. Please try again.":e.message||i:"string"==typeof e?e:i}(e,t);return t.showToast,s}function ya(e){return e instanceof Error?e.message:"string"==typeof e?e:e&&"object"==typeof e&&"message"in e?String(e.message):"An unexpected error occurred"}function va({form:e,onDataChange:t,initialData:a={}}){const[r,i]=s.useState(0),[n,l]=s.useState(a);s.useEffect(()=>{t(n)},[n,t]);const o=(e,t)=>{l(s=>({...s,[e]:t}))},c=e=>{var t,s,a,r,i;const l=n[e.id]||"";switch(e.type){case"text":case"email":case"phone":case"url":return Je.jsx("input",{type:"email"===e.type?"email":"url"===e.type?"url":"text",value:l,onChange:t=>o(e.id,t.target.value),placeholder:e.placeholder,required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"number":return Je.jsx("input",{type:"number",value:l,onChange:t=>o(e.id,t.target.value),placeholder:e.placeholder,required:e.required,min:null==(t=e.validation)?void 0:t.min,max:null==(s=e.validation)?void 0:s.max,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"date":return Je.jsx("input",{type:"date",value:l,onChange:t=>o(e.id,t.target.value),required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"textarea":return Je.jsx("textarea",{value:l,onChange:t=>o(e.id,t.target.value),placeholder:e.placeholder,required:e.required,rows:4,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});case"select":return Je.jsxs("select",{value:l,onChange:t=>o(e.id,t.target.value),required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[Je.jsx("option",{value:"",children:"Select an option"}),null==(a=e.options)?void 0:a.map(e=>Je.jsx("option",{value:e,children:e},e))]});case"radio":return Je.jsx("div",{className:"space-y-2",children:null==(r=e.options)?void 0:r.map(t=>Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"radio",name:e.id,value:t,checked:l===t,onChange:t=>o(e.id,t.target.value),required:e.required,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500"}),Je.jsx("span",{className:"text-sm text-gray-700",children:t})]},t))});case"checkbox":return Je.jsx("div",{className:"space-y-2",children:null==(i=e.options)?void 0:i.map(t=>Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"checkbox",value:t,checked:Array.isArray(l)&&l.includes(t),onChange:s=>{const a=Array.isArray(l)?l:[];s.target.checked?o(e.id,[...a,t]):o(e.id,a.filter(e=>e!==t))},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500"}),Je.jsx("span",{className:"text-sm text-gray-700",children:t})]},t))});case"file":return Je.jsx("input",{type:"file",onChange:t=>{var s;const a=null==(s=t.target.files)?void 0:s[0];o(e.id,a)},required:e.required,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"});default:return null}},d=()=>!e.is_multi_step||!e.steps||e.steps[r].fields.map(t=>e.fields.find(e=>e.id===t)).filter(e=>void 0!==e).every(e=>{if(!e.required)return!0;const t=n[e.id];return"checkbox"===e.type?Array.isArray(t)&&t.length>0:void 0!==t&&""!==t&&null!==t}),m=()=>{e.is_multi_step&&e.steps&&r<e.steps.length-1&&d()&&i(r+1)},x=()=>{r>0&&i(r-1)};if(e.is_multi_step&&e.steps){const t=e.steps[r],s=t.fields.map(t=>e.fields.find(e=>e.id===t)).filter(e=>void 0!==e);return Je.jsxs("div",{children:[Je.jsxs("div",{className:"mb-6",children:[Je.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-2",children:[Je.jsxs("span",{children:["Step ",r+1," of ",e.steps.length]}),Je.jsxs("span",{children:[Math.round((r+1)/e.steps.length*100),"% Complete"]})]}),Je.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Je.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:(r+1)/e.steps.length*100+"%"}})})]}),Je.jsxs("div",{className:"mb-6",children:[Je.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),t.description&&Je.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),Je.jsx("div",{className:"space-y-4",children:s.map(e=>Je.jsxs("div",{children:[Je.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&Je.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c(e)]},e.id))})]}),Je.jsxs("div",{className:"flex justify-between",children:[Je.jsxs("button",{type:"button",onClick:x,disabled:0===r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[Je.jsx(K,{className:"h-4 w-4 mr-1"}),"Previous"]}),r<e.steps.length-1?Je.jsxs("button",{type:"button",onClick:m,disabled:!d(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:["Next",Je.jsx(ee,{className:"h-4 w-4 ml-1"})]}):Je.jsx("span",{className:"text-sm text-gray-600",children:"Ready to submit"})]})]})}return Je.jsx("div",{className:"space-y-4",children:e.fields.map(e=>Je.jsxs("div",{children:[Je.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&Je.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c(e)]},e.id))})}const ja=()=>{const{id:e}=d(),t=n(),{user:a}=Ds(),[r,i]=s.useState(null),[l,o]=s.useState(null),[c,m]=s.useState(!0),[x,u]=s.useState(!1),[h,p]=s.useState(!1),[g,f]=s.useState({});s.useEffect(()=>{(async()=>{var t;if(!e)return la("Event ID is required"),void m(!1);try{m(!0);const r=await Js.getEventById(e);if(!r.success||!r.data)return la(r.error||"Event not found"),void m(!1);i(r.data.event);try{const t=new URLSearchParams(window.location.search).get("type")||void 0,s=await ga.getForm(e,t);s.success&&s.data&&o(s.data.form)}catch(s){}if(a&&f(e=>({...e,email:a.email,firstName:a.name.split(" ")[0]||"",lastName:a.name.split(" ").slice(1).join(" ")||""})),a){const s=await Zs.checkRegistrationStatus(e);s.success&&(null==(t=s.data)?void 0:t.isRegistered)&&p(!0)}}catch(r){la(r)}finally{m(!1)}})()},[e,a]);if(c)return Je.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Je.jsx("div",{className:"text-center py-8",children:Je.jsx(Ms,{size:"md",text:"Loading registration form..."})})});if(!r)return Je.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx("p",{className:"text-gray-600 mb-4",children:"Event not found"}),Je.jsx("button",{onClick:()=>t(-1),className:"text-primary-600 hover:text-primary-700 font-medium",children:"← Go Back"})]})});if(!a)return Je.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Login Required"}),Je.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to register for events."}),Je.jsxs("div",{className:"space-x-4",children:[Je.jsx("button",{onClick:()=>t("/login"),className:"btn btn-primary",children:"Login"}),Je.jsx("button",{onClick:()=>t("/register"),className:"btn btn-secondary",children:"Create Account"})]})]})});const b="feedback"===(null==l?void 0:l.form_type);if(h&&!b)return Je.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:Je.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Je.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),Je.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Already Registered"}),Je.jsx("p",{className:"text-gray-600 mb-6",children:"You are already registered for this event."}),Je.jsx("button",{onClick:()=>t(`/events/${r.id}`),className:"btn btn-primary",children:"View Event Details"})]})});const y=new Date(r.start_date),v=r.registration_deadline?new Date(r.registration_deadline):null,j=v&&new Date>v,N=new Date>y;return b||!j&&!N?Je.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"mb-8",children:[Je.jsxs("button",{onClick:()=>t(`/events/${r.id}`),className:"text-gray-600 hover:text-gray-900 flex items-center mb-4",children:[Je.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Je.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Event"]}),Je.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:b?"Share Your Feedback":"Register for Event"}),Je.jsx("h2",{className:"text-xl text-gray-700 mb-4",children:r.title}),Je.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Je.jsxs("div",{className:"flex items-center text-sm text-gray-600 space-x-4",children:[Je.jsxs("span",{className:"flex items-center",children:[Je.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Je.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-2m-8 0V7"})}),y.toLocaleDateString()," at"," ",y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),Je.jsxs("span",{className:"flex items-center",children:[Je.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[Je.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Je.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.location]})]}),r.is_paid&&Je.jsxs("div",{className:"mt-2",children:[Je.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["$",r.price]}),Je.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"per ticket"})]})]})]}),Je.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),!r||!e||!a)return;const i="feedback"===(null==l?void 0:l.form_type);let n;try{u(!0),n=ca(i?"Submitting feedback...":"Registering for event...");const s=await Zs.registerForEvent(e,{formData:g});if(s.success&&s.data)if(da(n),zs(),!i&&s.data.requiresPayment)oa("Registration successful! Redirecting to payment..."),t(`/events/${e}/payment`,{state:{registration:s.data.registration,amount:s.data.amount,message:s.message}});else{const s=i?"Thank you for your feedback!":"Successfully registered for the event!";oa(s),t(`/events/${e}`,{state:{message:s}})}else da(n),la(s.error||"Failed to "+(i?"submit feedback":"register for event"))}catch(o){n&&da(n);la(ba(o,fa))}finally{u(!1)}},className:"space-y-6",children:[l?Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[Je.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:l.title}),l.description&&Je.jsx("p",{className:"text-gray-600 mb-6",children:l.description}),Je.jsx(va,{form:l,onDataChange:f,initialData:g})]}):Je.jsx(Na,{event:r,formData:g,handleInputChange:(e,t)=>{f(s=>({...s,[e]:t}))}}),Je.jsx("div",{className:"flex justify-end",children:Je.jsx("button",{type:"submit",disabled:x,className:"px-6 py-3 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:x?Je.jsxs(Je.Fragment,{children:[Je.jsx(Ms,{size:"xs",className:"border-white mr-2"}),b?"Submitting...":"Registering..."]}):Je.jsx(Je.Fragment,{children:b?"Submit Feedback":"Register for Event"})})})]})]}):Je.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Registration Closed"}),Je.jsx("p",{className:"text-gray-600 mb-6",children:N?"This event has already started.":"The registration deadline has passed."}),Je.jsx("button",{onClick:()=>t(`/events/${r.id}`),className:"btn btn-secondary",children:"View Event Details"})]})})},Na=({event:e,formData:t,handleInputChange:s})=>Je.jsxs("div",{className:"card space-y-6",children:[Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),Je.jsx("input",{type:"text",id:"firstName",value:t.firstName||"",onChange:e=>s("firstName",e.target.value),className:"input",placeholder:"Enter your first name",required:!0})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),Je.jsx("input",{type:"text",id:"lastName",value:t.lastName||"",onChange:e=>s("lastName",e.target.value),className:"input",placeholder:"Enter your last name",required:!0})]})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),Je.jsx("input",{type:"email",id:"email",value:t.email||"",onChange:e=>s("email",e.target.value),className:"input",placeholder:"Enter your email address",required:!0})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),Je.jsx("input",{type:"tel",id:"phone",value:t.phone||"",onChange:e=>s("phone",e.target.value),className:"input",placeholder:"Enter your phone number",required:!0})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"organization",className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization (Optional)"}),Je.jsx("input",{type:"text",id:"organization",value:t.organization||"",onChange:e=>s("organization",e.target.value),className:"input",placeholder:"Enter your organization"})]})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"dietary",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dietary Requirements (Optional)"}),Je.jsx("textarea",{id:"dietary",rows:3,value:t.dietary||"",onChange:e=>s("dietary",e.target.value),className:"input",placeholder:"Please list any dietary requirements or food allergies"})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"accessibility",className:"block text-sm font-medium text-gray-700 mb-1",children:"Accessibility Requirements (Optional)"}),Je.jsx("textarea",{id:"accessibility",rows:3,value:t.accessibility||"",onChange:e=>s("accessibility",e.target.value),className:"input",placeholder:"Please describe any accessibility requirements"})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"comments",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Comments (Optional)"}),Je.jsx("textarea",{id:"comments",rows:3,value:t.comments||"",onChange:e=>s("comments",e.target.value),className:"input",placeholder:"Any additional comments or questions"})]})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Emergency Contact (Optional)"}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"emergencyContact",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),Je.jsx("input",{type:"text",id:"emergencyContact",value:t.emergencyContact||"",onChange:e=>s("emergencyContact",e.target.value),className:"input",placeholder:"Emergency contact name"})]}),Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"emergencyPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),Je.jsx("input",{type:"tel",id:"emergencyPhone",value:t.emergencyPhone||"",onChange:e=>s("emergencyPhone",e.target.value),className:"input",placeholder:"Emergency contact phone"})]})]})]}),Je.jsx("div",{className:"border-t pt-6",children:Je.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Je.jsxs("p",{className:"text-sm text-gray-700",children:["By registering for this event, you agree to provide accurate information and comply with the event terms and conditions.",e.is_paid&&Je.jsxs("span",{className:"font-medium",children:[" ","Payment will be required to complete your registration."]})]})})})]});function wa({label:e="Back",onClick:t,className:s=""}){const a=n();return Je.jsxs("button",{onClick:()=>{t?t():a(-1)},className:`inline-flex items-center text-gray-700 hover:text-primary-600 transition-colors ${s}`,children:[Je.jsx(G,{className:"w-5 h-5 mr-2"}),Je.jsx("span",{className:"font-medium",children:e})]})}const ka=Cs((e,t)=>({events:[],selectedEvent:null,isLoading:!1,error:null,loadEvents:async()=>{try{e({isLoading:!0,error:null});const t=await Js.getEvents();t.success&&t.data?e({events:t.data.events}):e({error:t.error||"Failed to load events"})}catch(t){e({error:"Error loading events"})}finally{e({isLoading:!1})}},loadEvent:async s=>{try{e({isLoading:!0,error:null});const a=await Js.getEventById(s);if(a.success&&a.data){e({selectedEvent:a.data.event});const{events:r}=t(),i=r.map(e=>e.id===s?a.data.event:e);e({events:i})}else e({error:a.error||"Failed to load event"})}catch(a){e({error:"Error loading event"})}finally{e({isLoading:!1})}},setSelectedEvent:t=>{e({selectedEvent:t})},createEvent:async t=>{try{e({isLoading:!0,error:null});const s=await Js.createEvent(t);if(s.success&&s.data){const t=s.data.event;return e(e=>({events:[...e.events,t],selectedEvent:t})),t}return e({error:s.error||"Failed to create event"}),null}catch(s){return e({error:"Error creating event"}),null}finally{e({isLoading:!1})}},updateEvent:async(t,s)=>{try{e({isLoading:!0,error:null});const a=await Js.updateEvent(t,s);if(a.success&&a.data){const s=a.data.event;return e(e=>{var a;return{events:e.events.map(e=>e.id===t?s:e),selectedEvent:(null==(a=e.selectedEvent)?void 0:a.id)===t?s:e.selectedEvent}}),s}return e({error:a.error||"Failed to update event"}),null}catch(a){return e({error:"Error updating event"}),null}finally{e({isLoading:!1})}},deleteEvent:async t=>{try{e({isLoading:!0,error:null});const s=await Js.deleteEvent(t);return s.success?(e(e=>{var s;return{events:e.events.filter(e=>e.id!==t),selectedEvent:(null==(s=e.selectedEvent)?void 0:s.id)===t?null:e.selectedEvent}}),!0):(e({error:s.error||"Failed to delete event"}),!1)}catch(s){return e({error:"Error deleting event"}),!1}finally{e({isLoading:!1})}}})),Sa=Cs((e,t)=>({form:null,templates:[],activeFieldId:null,isMultiStep:!1,currentStep:0,isLoading:!1,isSaving:!1,setForm:t=>e({form:t}),setTemplates:t=>e({templates:t}),setActiveFieldId:t=>e({activeFieldId:t}),setIsMultiStep:t=>e({isMultiStep:t}),setCurrentStep:t=>e({currentStep:t}),addField:(s,a)=>{const{form:r,isMultiStep:i}=t();if(!r)return;const n=[...r.fields,s];let l=r.steps||[];i&&"number"==typeof a&&l[a]&&(l=l.map((e,t)=>t===a?{...e,fields:[...e.fields,s.id]}:e)),e({form:{...r,fields:n,steps:l.length>0?l:void 0}})},updateField:(s,a)=>{const{form:r}=t();if(!r)return;const i=r.fields.map(e=>e.id===s?{...e,...a}:e);e({form:{...r,fields:i}})},removeField:s=>{const{form:a}=t();if(!a)return;const r=a.fields.filter(e=>e.id!==s);let i=a.steps||[];i.length>0&&(i=i.map(e=>({...e,fields:e.fields.filter(e=>e!==s)}))),e({form:{...a,fields:r,steps:i.length>0?i:void 0},activeFieldId:null})},reorderFields:(s,a)=>{const{form:r}=t();if(!r)return;const i=[...r.fields],[n]=i.splice(s,1);i.splice(a,0,n),e({form:{...r,fields:i}})},addStep:s=>{const{form:a}=t();if(!a)return;const r=[...a.steps||[],s];e({form:{...a,is_multi_step:!0,steps:r},isMultiStep:!0})},updateStep:(s,a)=>{const{form:r}=t();if(!r||!r.steps)return;const i=r.steps.map((e,t)=>t===s?{...e,...a}:e);e({form:{...r,steps:i}})},removeStep:s=>{const{form:a}=t();if(!a||!a.steps)return;const r=a.steps.filter((e,t)=>t!==s);e({form:{...a,steps:r.length>0?r:void 0,is_multi_step:r.length>0},isMultiStep:r.length>0,currentStep:Math.min(t().currentStep,r.length-1)})},reorderSteps:(s,a)=>{const{form:r}=t();if(!r||!r.steps)return;const i=[...r.steps],[n]=i.splice(s,1);i.splice(a,0,n),e({form:{...r,steps:i}})},applyTemplate:s=>{const{form:a}=t();if(!a)return;const r={...a,fields:[...s.fields],is_multi_step:!1,steps:void 0};e({form:r,isMultiStep:!1,currentStep:0,activeFieldId:null})},loadFormTemplates:async()=>{try{e({isLoading:!0});const t=await ga.getFormTemplates();t.success&&t.data&&e({templates:t.data.templates})}catch(t){}finally{e({isLoading:!1})}},loadForm:async(t,s)=>{try{e({isLoading:!0});const a=await ga.getForm(t,s);if(a.success&&a.data){const t=a.data.form;e({form:t,isMultiStep:t.is_multi_step,currentStep:0})}else e({form:null})}catch(a){e({form:null})}finally{e({isLoading:!1})}},saveForm:async s=>{const{form:a}=t();if(a)try{e({isSaving:!0});const t=await ga.updateForm(s,a.id,{title:a.title,description:a.description,form_type:a.form_type,fields:a.fields,is_multi_step:a.is_multi_step,steps:a.steps});t.success&&t.data&&e({form:t.data.form})}catch(r){}finally{e({isSaving:!1})}},createForm:async(t,s,a,r)=>{try{e({isSaving:!0});const i=await ga.createForm(t,{title:s,description:a,fields:[],is_multi_step:!1,form_type:r});i.success&&i.data&&e({form:i.data.form,isMultiStep:i.data.form.is_multi_step,currentStep:0})}catch(i){}finally{e({isSaving:!1})}},deleteForm:async(t,s)=>{try{e({isLoading:!0});(await ga.deleteForm(t,s)).success&&e({form:null,activeFieldId:null,isMultiStep:!1,currentStep:0})}catch(a){}finally{e({isLoading:!1})}},loadRegistrationForm:async(e,s="registration")=>t().loadForm(e,s),saveRegistrationForm:async e=>t().saveForm(e),createRegistrationForm:async(e,s,a="",r="registration")=>t().createForm(e,s,a,r),deleteRegistrationForm:async(e,s)=>t().deleteForm(e,s)}));function Ca({templates:e,onClose:t,onSelect:s}){return Je.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Je.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[Je.jsxs("div",{className:"p-6 border-b",children:[Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Choose a Template"}),Je.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600",children:Je.jsx(f,{className:"h-5 w-5"})})]}),Je.jsx("p",{className:"text-gray-600 mt-1",children:"Start with a pre-built template and customize it to fit your event's needs. All templates can be fully edited after selection."})]}),Je.jsxs("div",{className:"p-6",children:[Je.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{const t=(e=>{switch(e){case"basic":default:return te;case"detailed":return y;case"conference":return se}})(e.id),a=(e=>{switch(e){case"basic":return"text-blue-600";case"detailed":return"text-green-600";case"conference":return"text-purple-600";default:return"text-gray-600"}})(e.id);return Je.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-gray-300 hover:shadow-sm cursor-pointer transition-all",onClick:()=>s(e),children:[Je.jsxs("div",{className:"flex items-center mb-4",children:[Je.jsx("div",{className:"p-2 rounded-md bg-gray-100",children:Je.jsx(t,{className:`h-6 w-6 ${a}`})}),Je.jsx("div",{className:"ml-3",children:Je.jsx("h3",{className:"font-medium text-gray-900",children:e.name})})]}),Je.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),Je.jsxs("div",{className:"space-y-2",children:[Je.jsxs("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:["Includes ",e.fields.length," fields:"]}),Je.jsxs("div",{className:"space-y-1",children:[e.fields.slice(0,4).map((e,t)=>Je.jsxs("div",{className:"text-xs text-gray-600 flex items-center",children:[Je.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full mr-2"}),e.label]},t)),e.fields.length>4&&Je.jsxs("div",{className:"text-xs text-gray-500 pl-4",children:["+",e.fields.length-4," more fields"]})]})]}),Je.jsx("div",{className:"mt-4 pt-4 border-t",children:Je.jsx("button",{onClick:()=>s(e),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:"Use This Template"})})]},e.id)})}),0===e.length&&Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx(te,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Je.jsx("p",{className:"text-gray-600",children:"No templates available"})]})]}),Je.jsx("div",{className:"p-6 border-t bg-gray-50",children:Je.jsxs("div",{className:"flex justify-between items-center",children:[Je.jsx("p",{className:"text-sm text-gray-600",children:"You can customize any template after selection"}),Je.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"})]})})]})})}function Ea({form:e,eventId:t,onClose:a}){const[r,i]=s.useState(null),[n,l]=s.useState(!1),o="feedback"===e.form_type,c=o?"Feedback":"Registration",d=o?"feedback":"register",m=window.location.origin,x=o?`${m}/events/${t}/register?type=feedback`:`${m}/events/${t}/register`,u=`${x}&embed=true`,h=async(e,t)=>{try{await navigator.clipboard.writeText(e),i(t),setTimeout(()=>i(null),2e3)}catch(s){}},p=()=>`<iframe \n  src="${u}" \n  width="100%" \n  height="600" \n  frameborder="0" \n  style="border: none; border-radius: 8px;">\n</iframe>`;return Je.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Je.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[Je.jsx("div",{className:"p-6 border-b",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx(L,{className:"h-6 w-6 text-blue-600"}),Je.jsxs("div",{children:[Je.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Share ",c," Form"]}),Je.jsx("p",{className:"text-sm text-gray-600",children:e.title})]})]}),Je.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600",children:Je.jsx(f,{className:"h-5 w-5"})})]})}),Je.jsxs("div",{className:"p-6 space-y-6",children:[Je.jsxs("div",{children:[Je.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:[c," Link"]}),Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx("input",{type:"text",value:x,readOnly:!0,className:"flex-1 p-3 border border-gray-300 rounded-md bg-gray-50 text-gray-700"}),Je.jsx("button",{onClick:()=>h(x,"url"),className:"px-4 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 flex items-center space-x-2",children:"url"===r?Je.jsxs(Je.Fragment,{children:[Je.jsx(O,{className:"h-4 w-4 text-green-600"}),Je.jsx("span",{children:"Copied!"})]}):Je.jsxs(Je.Fragment,{children:[Je.jsx(q,{className:"h-4 w-4"}),Je.jsx("span",{children:"Copy"})]})}),Je.jsxs("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 flex items-center space-x-2",children:[Je.jsx(ae,{className:"h-4 w-4"}),Je.jsx("span",{children:"Preview"})]})]}),Je.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Share this link with participants to ",d," for your event"]})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"QR Code"}),Je.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[Je.jsxs("div",{className:"flex items-center justify-between p-4",children:[Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx("div",{className:"p-2 bg-gray-100 rounded-md",children:Je.jsx(j,{className:"h-6 w-6 text-gray-600"})}),Je.jsxs("div",{children:[Je.jsx("p",{className:"font-medium text-gray-900",children:"QR Code for Easy Access"}),Je.jsxs("p",{className:"text-sm text-gray-600",children:["Let participants scan to ",d," quickly"]})]})]}),Je.jsx("button",{onClick:()=>l(!n),className:"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100",children:n?"Hide QR Code":"Generate QR Code"})]}),n&&Je.jsx("div",{className:"border-t border-gray-200 p-6 bg-white",children:Je.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[Je.jsx("div",{className:"qr-code-container bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:Je.jsx(Re,{value:x,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 200 200"})}),Je.jsxs("div",{className:"text-center",children:[Je.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1",children:["Scan to ",o?"Give Feedback":"Register"]}),Je.jsxs("p",{className:"text-xs text-gray-600 max-w-sm mx-auto",children:["Point your camera at this QR code to quickly access the",d," form"]})]}),Je.jsxs("div",{className:"flex space-x-2",children:[Je.jsx("button",{onClick:()=>{const t=document.querySelector(".qr-code-container"),s=null==t?void 0:t.querySelector("svg");if(s)try{const t=(new XMLSerializer).serializeToString(s),a=document.createElement("canvas"),r=a.getContext("2d"),i=new Image;a.width=200,a.height=200,i.onload=()=>{r&&(r.fillStyle="white",r.fillRect(0,0,200,200),r.drawImage(i,0,0));const t=document.createElement("a");t.download=`${e.title.replace(/\s+/g,"-")}-qr-code.png`,t.href=a.toDataURL("image/png"),t.click()},i.src="data:image/svg+xml;base64,"+btoa(t)}catch(a){alert("Failed to download QR code. Please try again.")}else alert("QR code not found. Please generate the QR code first.")},className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Download QR Code"}),Je.jsx("button",{onClick:()=>h(x,"qr-url"),className:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 flex items-center space-x-1",children:"qr-url"===r?Je.jsxs(Je.Fragment,{children:[Je.jsx(O,{className:"h-4 w-4 text-green-600"}),Je.jsx("span",{children:"Copied!"})]}):Je.jsxs(Je.Fragment,{children:[Je.jsx(q,{className:"h-4 w-4"}),Je.jsx("span",{children:"Copy URL"})]})})]})]})})]})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"Embed Code"}),Je.jsxs("div",{className:"space-y-3",children:[Je.jsx("textarea",{value:p(),readOnly:!0,rows:6,className:"w-full p-3 border border-gray-300 rounded-md bg-gray-50 text-sm text-gray-700 font-mono"}),Je.jsxs("div",{className:"flex justify-between items-center",children:[Je.jsx("p",{className:"text-sm text-gray-600",children:"Embed this form directly on your website"}),Je.jsx("button",{onClick:()=>h(p(),"embed"),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 flex items-center space-x-2",children:"embed"===r?Je.jsxs(Je.Fragment,{children:[Je.jsx(O,{className:"h-4 w-4 text-green-600"}),Je.jsx("span",{children:"Copied!"})]}):Je.jsxs(Je.Fragment,{children:[Je.jsx(q,{className:"h-4 w-4"}),Je.jsx("span",{children:"Copy Code"})]})})]})]})]}),Je.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Je.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Form Statistics"}),Je.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Je.jsxs("div",{children:[Je.jsxs("p",{className:"text-gray-600",children:["Total ",o?"Responses":"Registrations"]}),Je.jsx("p",{className:"font-semibold text-gray-900",children:"0"})]}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-gray-600",children:"Form Views"}),Je.jsx("p",{className:"font-semibold text-gray-900",children:"0"})]})]})]})]}),Je.jsx("div",{className:"p-6 border-t bg-gray-50",children:Je.jsx("div",{className:"flex justify-end",children:Je.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})})]})})}const _a=[{id:"feedback-basic",name:"Basic Event Feedback",description:"Simple feedback form with overall rating and comments",fields:[{id:"overall-rating",type:"select",label:"Overall Event Rating (1-5)",placeholder:"Select rating",required:!0,options:["5","4","3","2","1"]},{id:"what-liked",type:"textarea",label:"What did you like most?",placeholder:"Share what you enjoyed...",required:!0},{id:"what-improve",type:"textarea",label:"What could we improve?",placeholder:"Share your suggestions...",required:!1},{id:"would-recommend",type:"select",label:"Would you recommend this event?",required:!0,options:["yes","maybe","no"]},{id:"additional-comments",type:"textarea",label:"Additional Comments",placeholder:"Any other feedback...",required:!1}]},{id:"feedback-detailed",name:"Detailed Event Feedback",description:"Comprehensive feedback across aspects",fields:[{id:"content-quality",type:"select",label:"Content Quality (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"speaker-rating",type:"select",label:"Speaker Rating (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"venue-rating",type:"select",label:"Venue & Facilities (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"organization-rating",type:"select",label:"Organization (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"value-for-money",type:"select",label:"Value for Money (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"highlights",type:"textarea",label:"Event Highlights",placeholder:"Best parts of the event",required:!0},{id:"improvements",type:"textarea",label:"Suggestions",placeholder:"How can we improve?",required:!1},{id:"future-topics",type:"textarea",label:"Future Topics",placeholder:"Topics for future events",required:!1}]},{id:"feedback-nps",name:"NPS + Feedback",description:"Net Promoter Score with feedback",fields:[{id:"nps-score",type:"select",label:"NPS Score (0-10)",placeholder:"Select score",required:!0,options:["10","9","8","7","6","5","4","3","2","1","0"]},{id:"nps-reason",type:"textarea",label:"Reason for Score",placeholder:"Please explain your rating...",required:!0},{id:"overall-experience",type:"select",label:"Overall Experience (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"met-expectations",type:"select",label:"Met Expectations?",required:!0,options:["exceeded","met","below"]},{id:"additional-feedback",type:"textarea",label:"Any additional feedback?",placeholder:"Share any other thoughts or suggestions...",required:!1}]},{id:"feedback-session",name:"Session Feedback",description:"Feedback form for individual sessions or workshops",fields:[{id:"session-name",type:"text",label:"Session/Workshop Name",placeholder:"Which session are you providing feedback for?",required:!0},{id:"session-rating",type:"select",label:"Overall Session Rating (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"content-relevance",type:"select",label:"Content Relevance",required:!0,options:["very-relevant","relevant","somewhat-relevant","not-relevant"]},{id:"presenter-effectiveness",type:"select",label:"Presenter Effectiveness (1-5)",required:!0,options:["5","4","3","2","1"]},{id:"key-takeaways",type:"textarea",label:"Key Takeaways",placeholder:"What were your main learnings?",required:!0},{id:"session-improvements",type:"textarea",label:"How could this session be improved?",placeholder:"Share your suggestions...",required:!1}]}],Aa=[{id:"basic-registration",name:"Basic Registration",description:"Simple registration with essential contact information",fields:[{id:"full-name",type:"text",label:"Full Name",placeholder:"Enter your full name",required:!0},{id:"email",type:"email",label:"Email Address",placeholder:"your@email.com",required:!0},{id:"phone",type:"phone",label:"Phone Number",placeholder:"+1 (555) 000-0000",required:!0}]},{id:"professional-registration",name:"Professional Event",description:"Registration for professional events and conferences",fields:[{id:"full-name",type:"text",label:"Full Name",placeholder:"Enter your full name",required:!0},{id:"email",type:"email",label:"Email Address",placeholder:"your@email.com",required:!0},{id:"phone",type:"phone",label:"Phone Number",placeholder:"+1 (555) 000-0000",required:!0},{id:"organization",type:"text",label:"Organization/Company",placeholder:"Your company name",required:!0},{id:"job-title",type:"text",label:"Job Title",placeholder:"Your position",required:!1},{id:"dietary-restrictions",type:"select",label:"Dietary Restrictions",placeholder:"Select if applicable",required:!1,options:["none","vegetarian","vegan","halal","kosher","gluten-free","other"]}]}];function Pa(){const{id:e}=d(),t=n(),[a]=m(),r=a.get("type")||"registration",[i,l]=s.useState(!1),[o,c]=s.useState(!1),[x,u]=s.useState(!1),[h,p]=s.useState(null),{events:g,selectedEvent:b,loadEvent:y,isLoading:v}=ka(),{form:j,activeFieldId:N,isMultiStep:w,currentStep:k,isLoading:S,isSaving:C,setActiveFieldId:E,setIsMultiStep:_,setCurrentStep:A,addField:P,updateField:z,removeField:D,reorderFields:R,addStep:F,removeStep:I,applyTemplate:O,loadFormTemplates:q,loadRegistrationForm:M,saveRegistrationForm:U,createRegistrationForm:B,deleteRegistrationForm:V}=Sa(),G=g.find(t=>t.id===e)||b,Y="feedback"===r?_a:Aa;s.useEffect(()=>{e&&(y(e),q(),M(e,r))},[e,r]);const Q=e=>{const t=`field_${Date.now()}`,s={id:t,type:e,label:`New ${e} field`,required:!1},a=w&&(null==j?void 0:j.steps)?k:void 0;P(s,a),E(t)},H=[{type:"text",label:"Text Input",icon:te},{type:"email",label:"Email",icon:te},{type:"phone",label:"Phone",icon:te},{type:"textarea",label:"Text Area",icon:te},{type:"select",label:"Dropdown",icon:te},{type:"radio",label:"Radio Buttons",icon:te},{type:"checkbox",label:"Checkboxes",icon:te},{type:"file",label:"File Upload",icon:te},{type:"date",label:"Date Picker",icon:te},{type:"number",label:"Number",icon:te},{type:"url",label:"URL",icon:te}];return S||v?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading form builder..."})}):G||v||S?Je.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Je.jsx("div",{className:"bg-white border-b",children:Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Je.jsxs("div",{className:"flex items-center justify-between h-16",children:[Je.jsxs("div",{className:"flex items-center space-x-4",children:[Je.jsx(wa,{onClick:()=>t("/dashboard"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",label:""}),Je.jsxs("div",{children:[Je.jsxs("h1",{className:"text-xl font-semibold text-gray-900",children:["registration"===r?"Registration":"Feedback"," ","Form Builder"]}),Je.jsx("p",{className:"text-sm text-gray-600",children:null==G?void 0:G.title})]})]}),Je.jsxs("div",{className:"flex items-center space-x-3",children:[!i&&Je.jsxs(Je.Fragment,{children:[Je.jsx("button",{onClick:()=>c(!0),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Use Template"}),Je.jsxs("button",{onClick:()=>{if(j){if(w){if(j.steps)for(let e=j.steps.length-1;e>=0;e--)I(e)}else{const e={title:"Step 1",description:"Please fill out the following information",fields:j.fields.map(e=>e.id)};F(e)}_(!w),A(0)}},className:"px-3 py-2 text-sm font-medium rounded-md "+(w?"text-blue-700 bg-blue-100 border border-blue-300":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:[Je.jsx(re,{className:"h-4 w-4 inline mr-1"}),"Multi-Step"]})]}),Je.jsxs("button",{onClick:()=>l(!i),className:"px-3 py-2 text-sm font-medium rounded-md "+(i?"text-blue-700 bg-blue-100 border border-blue-300":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:[Je.jsx(T,{className:"h-4 w-4 inline mr-1"}),i?"Edit":"Preview"]}),j&&Je.jsxs(Je.Fragment,{children:[Je.jsxs("button",{onClick:()=>u(!0),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[Je.jsx(L,{className:"h-4 w-4 inline mr-1"}),"Share"]}),Je.jsx("button",{onClick:async()=>{e&&j&&await U(e)},disabled:C,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:C?Je.jsxs(Je.Fragment,{children:[Je.jsx(Ms,{size:"xs",className:"border-white inline mr-1"}),"Saving..."]}):Je.jsxs(Je.Fragment,{children:[Je.jsx(ie,{className:"h-4 w-4 inline mr-1"}),"Save"]})}),Je.jsx("button",{onClick:async()=>{e&&j&&window.confirm("Are you sure you want to delete this form? This action cannot be undone.")&&await V(e,j.id)},className:"px-3 py-2 text-sm font-medium text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50",children:Je.jsx($,{className:"h-4 w-4"})})]})]})]})})}),Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:j?i?Je.jsx("div",{className:"max-w-2xl mx-auto",children:Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[Je.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:j.title}),j.description&&Je.jsx("p",{className:"text-gray-600 mb-6",children:j.description}),Je.jsxs("div",{className:"space-y-6",children:[j.fields.map(e=>{var t;return Je.jsxs("div",{children:[Je.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&Je.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"textarea"===e.type?Je.jsx("textarea",{placeholder:e.placeholder,className:"w-full p-3 border border-gray-300 rounded-md",rows:3}):"select"===e.type?Je.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-md",children:[Je.jsx("option",{value:"",children:e.placeholder||"Select an option"}),null==(t=e.options)?void 0:t.map((e,t)=>Je.jsx("option",{value:e,children:e},t))]}):"radio"===e.type&&e.options?Je.jsx("div",{className:"space-y-2",children:e.options.map((t,s)=>Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"radio",name:e.id,value:t,className:"mr-2"}),Je.jsx("span",{className:"text-sm",children:t})]},s))}):"checkbox"===e.type&&e.options?Je.jsx("div",{className:"space-y-2",children:e.options.map((e,t)=>Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"checkbox",value:e,className:"mr-2"}),Je.jsx("span",{className:"text-sm",children:e})]},t))}):Je.jsx("input",{type:"email"===e.type?"email":"number"===e.type?"number":"url"===e.type?"url":"date"===e.type?"date":"text",placeholder:e.placeholder,className:"w-full p-3 border border-gray-300 rounded-md"})]},e.id)}),Je.jsx("div",{className:"pt-4",children:Je.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700",children:"Submit Registration"})})]})]})}):Je.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[Je.jsx("div",{className:"lg:col-span-1",children:Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[Je.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Add Fields"}),Je.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Click on any field type to add it to your form"}),Je.jsx("div",{className:"space-y-2",children:H.map(({type:e,label:t,icon:s})=>Je.jsxs("button",{onClick:()=>Q(e),className:"w-full flex items-center space-x-3 p-3 text-left text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-200 rounded-md border border-transparent transition-all duration-200 group",title:`Add ${t} field`,children:[Je.jsx(s,{className:"h-4 w-4 group-hover:text-blue-600"}),Je.jsx("span",{className:"font-medium",children:t}),Je.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:Je.jsx(W,{className:"h-3 w-3 text-blue-600"})})]},e))}),w&&Je.jsxs("div",{className:"mt-6 pt-6 border-t",children:[Je.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Steps"}),Je.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Organize your form into multiple steps"}),Je.jsxs("button",{onClick:()=>{var e;const t=((null==(e=null==j?void 0:j.steps)?void 0:e.length)||0)+1;F({title:`Step ${t}`,description:"Please fill out the following information",fields:[]})},className:"w-full flex items-center justify-center space-x-2 p-3 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-md border border-blue-200 hover:border-blue-300 transition-all duration-200",children:[Je.jsx(W,{className:"h-4 w-4"}),Je.jsx("span",{children:"Add New Step"})]})]}),Je.jsxs("div",{className:"mt-6 pt-6 border-t",children:[Je.jsx("h4",{className:"font-medium text-gray-800 mb-2 text-sm",children:"💡 Quick Tips"}),Je.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[Je.jsx("p",{children:"• Click on any field to edit its settings"}),Je.jsx("p",{children:"• Use Preview to test your form"}),Je.jsx("p",{children:"• Toggle Multi-Step for complex forms"}),Je.jsx("p",{children:"• Use templates for quick setup"})]})]})]})}),Je.jsx("div",{className:"lg:col-span-2",children:Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[Je.jsxs("div",{className:"p-6 border-b",children:[Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{children:[Je.jsx("h2",{className:"text-lg font-medium text-gray-900",children:j.title}),j.description&&Je.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.description})]}),Je.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:Je.jsx(ne,{className:"h-5 w-5"})})]}),w&&j.steps&&j.steps.length>0&&Je.jsx("div",{className:"mt-4 flex space-x-2",children:j.steps.map((e,t)=>Je.jsx("button",{onClick:()=>A(t),className:"px-3 py-2 text-sm rounded-md "+(k===t?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"),children:e.title},t))})]}),Je.jsx("div",{className:"p-6",children:0===j.fields.length?Je.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[Je.jsx(te,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start Building Your Form"}),Je.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Create a custom registration form by adding fields from the sidebar, or get started quickly with a pre-built template."}),Je.jsxs("div",{className:"flex justify-center space-x-4",children:[Je.jsx("button",{onClick:()=>c(!0),className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Use Template"}),Je.jsx("button",{onClick:()=>Q("text"),className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Add First Field"})]})]}):Je.jsx("div",{className:"space-y-3 pl-8 relative",children:j.fields.filter(e=>{if(!w||!j.steps)return!0;const t=j.steps[k];return null==t?void 0:t.fields.includes(e.id)}).map((e,t)=>{var s;return Je.jsxs("div",{className:"group relative",children:[Je.jsx("div",{className:"absolute -left-8 top-3 text-xs text-gray-400 font-medium bg-gray-100 rounded-full w-5 h-5 flex items-center justify-center",children:t+1}),Je.jsxs("div",{className:"p-4 border rounded-lg cursor-pointer transition-all duration-200 "+(N===e.id?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300 hover:shadow-sm"),onClick:()=>E(e.id),children:[Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex-1",children:[Je.jsxs("div",{className:"flex items-center gap-2",children:[Je.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.label,e.required&&Je.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),Je.jsx("span",{className:"px-2 py-1 text-xs text-gray-500 bg-gray-100 rounded-full capitalize",children:e.type})]}),e.placeholder&&Je.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Placeholder: ",e.placeholder]})]}),Je.jsxs("div",{className:"flex items-center gap-1",children:[t>0&&Je.jsx("button",{onClick:e=>{e.stopPropagation(),R(t,t-1)},className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Move up",children:Je.jsx(le,{className:"h-4 w-4"})}),t<j.fields.filter(e=>{if(!w||!j.steps)return!0;const t=j.steps[k];return null==t?void 0:t.fields.includes(e.id)}).length-1&&Je.jsx("button",{onClick:e=>{e.stopPropagation(),R(t,t+1)},className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Move down",children:Je.jsx(oe,{className:"h-4 w-4"})}),Je.jsx("button",{onClick:t=>{t.stopPropagation(),D(e.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete field",children:Je.jsx($,{className:"h-4 w-4"})})]})]}),Je.jsx("div",{className:"mt-3 opacity-80",children:"textarea"===e.type?Je.jsx("textarea",{placeholder:e.placeholder,className:"w-full p-2 text-sm border border-gray-300 rounded-md bg-gray-50",rows:2,disabled:!0}):"select"===e.type?Je.jsxs("select",{className:"w-full p-2 text-sm border border-gray-300 rounded-md bg-gray-50",disabled:!0,children:[Je.jsx("option",{children:e.placeholder||"Select an option"}),null==(s=e.options)?void 0:s.slice(0,3).map((e,t)=>Je.jsx("option",{children:e},t)),e.options&&e.options.length>3&&Je.jsxs("option",{children:["... and ",e.options.length-3," ","more"]})]}):"radio"===e.type&&e.options?Je.jsxs("div",{className:"space-y-1",children:[e.options.slice(0,3).map((e,t)=>Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"radio",className:"mr-2",disabled:!0}),Je.jsx("span",{className:"text-sm text-gray-600",children:e})]},t)),e.options.length>3&&Je.jsxs("p",{className:"text-xs text-gray-500 pl-5",children:["... and ",e.options.length-3," more options"]})]}):"checkbox"===e.type&&e.options?Je.jsxs("div",{className:"space-y-1",children:[e.options.slice(0,3).map((e,t)=>Je.jsxs("label",{className:"flex items-center",children:[Je.jsx("input",{type:"checkbox",className:"mr-2",disabled:!0}),Je.jsx("span",{className:"text-sm text-gray-600",children:e})]},t)),e.options.length>3&&Je.jsxs("p",{className:"text-xs text-gray-500 pl-5",children:["... and ",e.options.length-3," more options"]})]}):Je.jsx("input",{type:"email"===e.type?"email":"number"===e.type?"number":"url"===e.type?"url":"date"===e.type?"date":"text",placeholder:e.placeholder,className:"w-full p-2 text-sm border border-gray-300 rounded-md bg-gray-50",disabled:!0})})]}),Je.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:Je.jsx("div",{className:"flex justify-center mt-2",children:Je.jsxs("button",{onClick:()=>{const e={id:`field_${Date.now()}`,type:"text",label:"New Field",placeholder:"Enter value",required:!1,options:[]};P(e),E(e.id)},className:"flex items-center gap-1 px-3 py-1 text-xs text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-full border border-blue-200 transition-colors",children:[Je.jsx(W,{className:"h-3 w-3"}),"Add Field Below"]})})})]},e.id)})})})]})}),Je.jsx("div",{className:"lg:col-span-1",children:N&&(()=>{const e=j.fields.find(e=>e.id===N);return e?Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 sticky top-24 max-h-[80vh] overflow-y-auto",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("h3",{className:"font-medium text-gray-900",children:"Edit Field"}),Je.jsx("button",{onClick:()=>E(null),className:"p-1 text-gray-400 hover:text-gray-600",children:Je.jsx(f,{className:"h-4 w-4"})})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label"}),Je.jsx("input",{type:"text",value:e.label,onChange:e=>z(N,{label:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md"})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placeholder"}),Je.jsx("input",{type:"text",value:e.placeholder||"",onChange:e=>z(N,{placeholder:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md"})]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("input",{type:"checkbox",checked:e.required,onChange:e=>z(N,{required:e.target.checked}),className:"mr-2"}),Je.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Required field"})]}),("select"===e.type||"radio"===e.type||"checkbox"===e.type)&&Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),Je.jsxs("div",{className:"space-y-2",children:[(e.options||[]).map((t,s)=>Je.jsxs("div",{className:"flex items-center gap-2",children:[Je.jsx("input",{type:"text",value:t,onChange:t=>{const a=[...e.options||[]];a[s]=t.target.value,z(N,{options:a})},className:"flex-1 p-2 border border-gray-300 rounded-md"}),Je.jsx("button",{type:"button",className:"text-red-500 px-2 py-1 rounded hover:bg-red-50",onClick:()=>{const t=[...e.options||[]];t.splice(s,1),z(N,{options:t})},title:"Remove option",children:Je.jsx($,{className:"h-4 w-4"})})]},s)),Je.jsx("button",{type:"button",className:"w-full mt-2 py-2 text-sm text-blue-600 bg-blue-50 hover:bg-blue-100 rounded border border-blue-200",onClick:()=>{const t=[...e.options||[],""];z(N,{options:t})},children:"Add Option"})]})]})]})]}):null})()})]}):Je.jsxs("div",{className:"text-center py-12",children:[Je.jsx(te,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Je.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:["No ","registration"===r?"Registration":"Feedback"," ","Form"]}),Je.jsxs("p",{className:"text-gray-600 mb-6",children:["Create a"," ","registration"===r?"registration":"feedback"," form for"," ","registration"===r?"participants to register for":"attendees to provide feedback on"," ","your event."]}),Je.jsx("button",{onClick:async()=>{if(!e)return;const t="registration"===r,s=`${(null==G?void 0:G.title)||"Event"} ${t?"Registration":"Feedback"} Form`,a=`${t?"Registration":"Feedback"} form for ${(null==G?void 0:G.title)||"this event"}`;await B(e,s,a,r)},disabled:C,className:"px-6 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:C?Je.jsxs(Je.Fragment,{children:[Je.jsx(Ms,{size:"xs",className:"border-white inline mr-2"}),"Creating..."]}):Je.jsxs(Je.Fragment,{children:[Je.jsx(W,{className:"h-4 w-4 inline mr-2"}),"Create"," ","registration"===r?"Registration":"Feedback"," ","Form"]})})]})}),o&&Je.jsx(Ca,{templates:Y,onClose:()=>c(!1),onSelect:e=>{O(e),c(!1),p(`Template "${e.name}" applied successfully! You can now edit the fields.`),setTimeout(()=>p(null),4e3)}}),j&&x&&Je.jsx(Ea,{form:j,eventId:e,onClose:()=>u(!1)}),h&&Je.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:Je.jsxs("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm",children:[Je.jsx("div",{className:"flex-shrink-0",children:Je.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:Je.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),Je.jsx("p",{className:"text-sm font-medium",children:h}),Je.jsx("button",{onClick:()=>p(null),className:"flex-shrink-0 text-green-200 hover:text-white",children:Je.jsx(f,{className:"h-4 w-4"})})]})})]}):Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center",children:[Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event not found"}),Je.jsxs("p",{className:"text-gray-600 mb-4",children:["Event ID: ",e," | Events loaded: ",g.length]}),Je.jsx("button",{onClick:()=>t("/dashboard"),className:"text-blue-600 hover:text-blue-800",children:"Return to Dashboard"})]})})}const za=e=>{const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},Da=()=>{const[e,t]=s.useState([]),[a,r]=s.useState(!0),[i,n]=s.useState(null),l=async()=>{var e;try{r(!0),n(null);const s=await Zs.getUserRegistrations();t((null==(e=s.data)?void 0:e.registrations)||[])}catch(s){n("string"==typeof s?s:"An error occurred")}finally{r(!1)}};s.useEffect(()=>{l()},[]);const c=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case null:return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},m=e=>{var t;return"cancelled"!==e.status&&((null==(t=e.event)?void 0:t.is_paid)?"completed"===e.payment_status:"confirmed"===e.status||null===e.payment_status)};return a?Je.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading your registrations..."})}):i?Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Je.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Je.jsxs("div",{className:"flex",children:[Je.jsx(ce,{className:"h-5 w-5 text-red-400"}),Je.jsxs("div",{className:"ml-3",children:[Je.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading registrations"}),Je.jsx("p",{className:"mt-1 text-sm text-red-700",children:i||"An error occurred"}),Je.jsx("button",{onClick:()=>l(),className:"mt-2 text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded",children:"Try again"})]})]})})}):Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"mb-8",children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Registrations"}),Je.jsx("p",{className:"text-gray-600",children:"View and manage your event registrations"})]}),e&&0!==e.length?Je.jsx("div",{className:"space-y-6",children:e.map(e=>{const t=e.event;return t?Je.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:Je.jsx("div",{className:"p-6",children:Je.jsxs("div",{className:"flex items-start justify-between",children:[Je.jsxs("div",{className:"flex-1 min-w-0",children:[Je.jsxs("div",{className:"flex items-center mb-2 flex-wrap gap-2",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900 group relative cursor-help",title:ea(t.title,60)?t.title:void 0,children:Ks(t.title,60)}),Je.jsxs("div",{className:"flex space-x-2 flex-shrink-0",children:[Je.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(e.status)}`,children:e.status}),t.is_paid&&e.payment_status&&Je.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d(e.payment_status)}`,children:[Je.jsx(de,{className:"w-3 h-3 mr-1"}),e.payment_status.replace("_"," ")]}),!t.is_paid&&Je.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Free Event"})]})]}),Je.jsxs("div",{className:"mb-4 group relative",children:[Je.jsx("p",{className:"text-gray-600 line-clamp-2",children:t.description}),t.description&&t.description.length>150&&Je.jsx("span",{className:"text-primary-600 text-sm cursor-pointer hover:underline",children:"Read more"})]}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm text-gray-500",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(S,{className:"h-4 w-4 mr-2 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:za(t.start_date)})]}),Je.jsxs("div",{className:"flex items-center group relative",children:[Je.jsx(P,{className:"h-4 w-4 mr-2 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(t.location,40)}),ea(t.location,40)&&Je.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:t.location})]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(Y,{className:"h-4 w-4 mr-2 flex-shrink-0"}),Je.jsxs("span",{className:"truncate",children:["Registered ",za(e.created_at)]})]})]}),t.is_paid&&t.price&&Je.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Event Price: $",t.price]})]}),Je.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[m(e)&&Je.jsxs(o,{to:`/ticket/${e.id}`,className:"inline-flex items-center px-3 py-2 border border-green-300 shadow-sm text-sm leading-4 font-medium rounded-md text-green-700 bg-white hover:bg-green-50",children:[Je.jsx(me,{className:"h-4 w-4 mr-2"}),"View Ticket"]}),t.is_paid&&"pending"===e.payment_status&&Je.jsxs(o,{to:`/events/${t.id}/payment`,state:{registration:e,amount:t.price||0,message:"Complete your payment to confirm registration"},className:"inline-flex items-center px-3 py-2 border border-blue-300 shadow-sm text-sm leading-4 font-medium rounded-md text-blue-700 bg-white hover:bg-blue-50",children:[Je.jsx(de,{className:"h-4 w-4 mr-2"}),"Complete Payment"]}),Je.jsxs(o,{to:`/events/${t.id}`,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[Je.jsx(ae,{className:"h-4 w-4 mr-2"}),"View Event"]}),"cancelled"!==e.status&&!m(e)&&Je.jsxs("button",{onClick:()=>(async e=>{var t;if(window.confirm("Are you sure you want to cancel your registration for this event?"))try{await Zs.cancelRegistration(e),l()}catch(s){let e="Failed to cancel registration. Please try again.";if(s instanceof Error&&"response"in s){const a=s;e=400===a.status?"Cannot cancel registration for this event. It may have already started or the cancellation deadline has passed.":404===a.status?"Registration not found. It may have already been cancelled.":403===a.status?"You don't have permission to cancel this registration.":(null==(t=a.response)?void 0:t.error)||"Failed to cancel registration. Please try again."}alert(e)}})(e.id),className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50",children:[Je.jsx($,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})},e.id):null})}):Je.jsxs("div",{className:"text-center py-12",children:[Je.jsx(S,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No registrations yet"}),Je.jsx("p",{className:"text-gray-500 mb-6",children:"You haven't registered for any events yet."}),Je.jsx(o,{to:"/events",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700",children:"Browse Events"})]})]})},Ra=()=>{const{role:e}=d(),t=n(),{accessToken:a,isAuthenticated:r,clearAuth:i}=Ds(),[l,c]=s.useState([]),[m,x]=s.useState([]),[u,h]=s.useState([]),[p,g]=s.useState(!0);s.useEffect(()=>{if(!r||!a)return i(),void t("/login");f()},[e,r,a]);const f=async()=>{var t,s,a;try{if(g(!0),"organizer"===e){const e=await Js.getMyEvents();c((null==(t=e.data)?void 0:t.events)||[])}else if("staff"===e){const e=(null==(s=(await Xs.getAssignedEvents()).data)?void 0:s.events)||[];x(Array.isArray(e)?e:[])}else if("participant"===e){const e=await Zs.getUserRegistrations();h((null==(a=e.data)?void 0:a.registrations)||[])}}catch(r){}finally{g(!1)}},{title:b,bgColor:y,textColor:v,linkColor:j}=(()=>{switch(e){case"organizer":return{title:"Events I Organize",color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-700",linkColor:"text-purple-600"};case"staff":return{title:"My Staff Assignments",color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-700",linkColor:"text-blue-600"};case"participant":return{title:"Events I'm Participating In",color:"green",bgColor:"bg-green-50",textColor:"text-green-700",linkColor:"text-green-600"};default:return{title:"My Events",color:"gray",bgColor:"bg-gray-50",textColor:"text-gray-700",linkColor:"text-gray-600"}}})(),N=()=>"organizer"===e?l.length:"staff"===e?m.length:"participant"===e?u.length:0;return p?Je.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading events..."})}):Je.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Je.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[Je.jsxs("div",{className:"mb-6",children:[Je.jsxs("button",{onClick:()=>t("/dashboard"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[Je.jsx(G,{className:"w-4 h-4"}),Je.jsx("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]}),Je.jsx("h1",{className:`text-3xl font-bold ${v}`,children:b}),Je.jsxs("p",{className:"text-gray-600 mt-2",children:[N()," ",1===N()?"event":"events"," found"]})]}),Je.jsx("div",{className:"bg-white rounded-2xl shadow-md p-6",children:0===N()?Je.jsxs("div",{className:"text-center py-12",children:[Je.jsx("p",{className:"text-gray-500 text-lg",children:"No events found"}),Je.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["organizer"===e&&"You haven't organized any events yet","staff"===e&&"You haven't been assigned to any events","participant"===e&&"You haven't registered for any events"]})]}):Je.jsx("ul",{className:"space-y-2",children:"organizer"===e?l.map(e=>Je.jsx(o,{to:`/events/${e.id}`,className:`font-medium ${j} hover:underline`,children:Je.jsxs("li",{className:`flex flex-col ${y} rounded-xl p-4 mb-3 hover:shadow-md transition-shadow`,children:[Je.jsx("span",{className:"truncate font-semibold mb-2",title:ea(e.title,80)?e.title:void 0,children:Ks(e.title,80)}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1 relative group",children:[Je.jsx(P,{className:"w-3 h-3 mr-1 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(e.location,60)}),ea(e.location,60)&&Je.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:e.location})]}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Je.jsx(S,{className:"w-3 h-3 mr-1 flex-shrink-0"}),new Date(e.start_date).toLocaleDateString()," -"," ",new Date(e.end_date).toLocaleDateString()]})]})},e.id)):"staff"===e?m.map(e=>Je.jsx(o,{to:`/events/${e.id}/check-in`,className:`font-medium ${j} hover:underline`,children:Je.jsxs("li",{className:`flex flex-col ${y} rounded-xl p-4 mb-3 hover:shadow-md transition-shadow`,children:[Je.jsx("span",{className:"truncate font-semibold mb-2",title:ea(e.title,80)?e.title:void 0,children:Ks(e.title,80)}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1 relative group",children:[Je.jsx(P,{className:"w-3 h-3 mr-1 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(e.location,60)}),ea(e.location,60)&&Je.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:e.location})]}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Je.jsx(S,{className:"w-3 h-3 mr-1 flex-shrink-0"}),new Date(e.start_date).toLocaleDateString()]})]})},e.id)):"participant"===e?u.map(e=>e.event&&Je.jsx(o,{to:`/events/${e.event.id}`,className:`font-medium ${j} hover:underline`,children:Je.jsxs("li",{className:`flex flex-col ${y} rounded-xl p-4 mb-3 hover:shadow-md transition-shadow`,children:[Je.jsx("span",{className:"truncate font-semibold mb-2",title:ea(e.event.title,80)?e.event.title:void 0,children:Ks(e.event.title,80)}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1 relative group",children:[Je.jsx(P,{className:"w-3 h-3 mr-1 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(e.event.location,60)}),ea(e.event.location,60)&&Je.jsx("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:e.event.location})]}),Je.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Je.jsx(S,{className:"w-3 h-3 mr-1 flex-shrink-0"}),new Date(e.event.start_date).toLocaleDateString()]})]})},e.id)):null})})]})})},Fa=()=>{const{id:e}=d(),t=n(),[a,r]=s.useState(null),[i,l]=s.useState([]),[o,c]=s.useState(!0),[m,x]=s.useState(null),[u,h]=s.useState("all"),[p,g]=s.useState(null);s.useEffect(()=>{(async()=>{if(!e)return x("Event ID is required"),void c(!1);try{c(!0),x(null);const[t,s]=await Promise.all([Js.getEventById(e),Zs.getEventRegistrations(e)]);if(!t.success||!t.data)return void x(t.error||"Event not found");r(t.data.event),s.success&&s.data?l(s.data.registrations):x(s.error||"Failed to load registrations")}catch(t){x("Failed to load data")}finally{c(!1)}})()},[e]);const b=e=>{switch(e){case"confirmed":return Je.jsx(_,{className:"h-5 w-5 text-green-500"});case"pending":return Je.jsx(Y,{className:"h-5 w-5 text-yellow-500"});case"cancelled":return Je.jsx(he,{className:"h-5 w-5 text-red-500"});default:return Je.jsx(Y,{className:"h-5 w-5 text-gray-500"})}},v=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=i.filter(e=>"all"===u||e.status===u);return o?Je.jsx(Ms,{size:"full",text:"Loading registrations..."}):m?Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Je.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:Je.jsxs("div",{className:"text-red-800",children:[Je.jsx("h3",{className:"text-lg font-medium",children:"Error"}),Je.jsx("p",{className:"mt-1",children:m}),Je.jsx("button",{onClick:()=>t(-1),className:"mt-3 text-sm bg-red-100 hover:bg-red-200 px-3 py-1 rounded",children:"Go Back"})]})})}):a?Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"mb-8",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx(wa,{onClick:()=>t(`/events/${e}`),label:"Back to Event"}),Je.jsxs("button",{onClick:()=>{if(!i.length)return;const e=[["Name","Email","Phone","Status","Registration Date"].join(","),...j.map(e=>{const t=e.user;return[(null==t?void 0:t.name)||"N/A",(null==t?void 0:t.email)||"N/A",(null==t?void 0:t.phone_number)||"N/A",e.status,za(e.created_at)].join(",")})].join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`${(null==a?void 0:a.title)||"event"}-registrations.csv`,r.click(),window.URL.revokeObjectURL(s)},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:!j.length,children:[Je.jsx(xe,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),Je.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Event Registrations"}),Je.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:Je.jsx("div",{className:"flex items-start justify-between",children:Je.jsxs("div",{className:"flex-1",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:a.title}),Je.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(S,{className:"h-4 w-4 mr-2"}),za(a.start_date)]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(P,{className:"h-4 w-4 mr-2"}),a.location]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(y,{className:"h-4 w-4 mr-2"}),i.length," / ",a.capacity," registered"]})]})]})})})]}),Je.jsx("div",{className:"border-b border-gray-200 mb-6",children:Je.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"All Registrations"},{key:"confirmed",label:"Confirmed"},{key:"pending",label:"Pending"},{key:"cancelled",label:"Cancelled"}].map(e=>{return Je.jsxs("button",{onClick:()=>h(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm "+(u===e.key?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label," (",(t=e.key,"all"===t?i.length:i.filter(e=>e.status===t).length),")"]},e.key);var t})})}),0===j.length?Je.jsxs("div",{className:"text-center py-12",children:[Je.jsx(y,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No registrations found"}),Je.jsx("p",{className:"text-gray-500",children:"all"===u?"No one has registered for this event yet.":`No ${u} registrations for this event.`})]}):Je.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:Je.jsx("ul",{className:"divide-y divide-gray-200",children:j.map(e=>{var t,s,a;return Je.jsx("li",{className:"px-6 py-4",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[Je.jsx("div",{className:"flex-shrink-0",children:b(e.status)}),Je.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name||(null==(t=e.user)?void 0:t.name)||"Unknown User"}),Je.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(e.status)}`,children:e.status})]}),Je.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(R,{className:"h-4 w-4 mr-1"}),e.email||(null==(s=e.user)?void 0:s.email)||"No email"]}),(null==(a=e.user)?void 0:a.phone_number)&&Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(ue,{className:"h-4 w-4 mr-1"}),e.user.phone_number]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(S,{className:"h-4 w-4 mr-1"}),"Registered ",za(e.created_at)]})]})]})]}),Je.jsx("div",{className:"flex items-center space-x-2",children:e.responses&&Object.keys(e.responses).length>0&&Je.jsx("button",{onClick:()=>{g({name:e.name,responses:e.responses||{}})},className:"inline-flex items-center p-2 border border-gray-300 rounded-md text-gray-400 hover:text-gray-500 hover:border-blue-500 hover:text-blue-500 transition-colors",title:"View Form Data",children:Je.jsx(te,{className:"h-4 w-4"})})})]})},e.id)})})}),p&&Je.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:Je.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[Je.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:Je.jsx(te,{className:"h-6 w-6 text-blue-600"})}),Je.jsxs("div",{children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Registration Form Data"}),Je.jsx("p",{className:"text-sm text-gray-600",children:p.name})]})]}),Je.jsx("button",{onClick:()=>g(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:Je.jsx(f,{className:"h-5 w-5"})})]}),Je.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Je.jsx("div",{className:"space-y-4",children:Object.entries(p.responses).map(([e,t])=>Je.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),Je.jsx("div",{className:"text-gray-900",children:"object"==typeof t&&null!==t?Je.jsx("pre",{className:"text-sm bg-white p-3 rounded border border-gray-200 overflow-x-auto",children:JSON.stringify(t,null,2)}):Array.isArray(t)?Je.jsx("div",{className:"space-y-1",children:t.map((e,t)=>Je.jsx("div",{className:"text-sm bg-white px-3 py-2 rounded border border-gray-200",children:String(e)},t))}):Je.jsx("p",{className:"text-sm bg-white px-3 py-2 rounded border border-gray-200",children:String(t)})})]},e))})}),Je.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end",children:Je.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 transition-colors",children:"Close"})})]})})]}):null},Ta=()=>{const{id:e}=d(),t=n(),{accessToken:a}=Ds(),[r,i]=s.useState(null),[l,o]=s.useState({total_registrations:0,total_check_ins:0,check_in_rate:"0"}),[c,m]=s.useState([]),[x,u]=s.useState(!0),[h,p]=s.useState(null),[g,f]=s.useState("");s.useEffect(()=>{(async()=>{if(!e)return p("Event ID is required"),void u(!1);try{u(!0),p(null);const t=await Js.getEventById(e);if(!t.success||!t.data)return p(t.error||"Event not found"),void u(!1);i(t.data.event);const s="https://your-backend-domain.com/api",r=await fetch(`${s}/checkin/events/${e}/stats?all=true`,{headers:{Authorization:`Bearer ${a}`}});if(!r.ok)throw new Error("Failed to fetch attendance data");const n=await r.json();o(n.stats),m(n.recent_check_ins||[])}catch(t){p("Failed to load attendance data")}finally{u(!1)}})()},[e,a]);const b=c.filter(e=>e.registration.name.toLowerCase().includes(g.toLowerCase())||e.registration.email.toLowerCase().includes(g.toLowerCase()));return x?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading attendance data..."})}):h||!r?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx("div",{className:"text-center",children:Je.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[Je.jsx("h3",{className:"text-lg font-medium text-red-900",children:"Error"}),Je.jsx("p",{className:"mt-1 text-red-700",children:h}),Je.jsx("button",{onClick:()=>t(-1),className:"mt-3 text-sm bg-red-100 hover:bg-red-200 px-3 py-1 rounded",children:"Go Back"})]})})}):Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"mb-8",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsxs("button",{onClick:()=>t(`/events/${e}`),className:"flex items-center text-gray-600 hover:text-gray-900",children:[Je.jsx(G,{className:"h-5 w-5 mr-2"}),"Back to Event"]}),Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsxs("button",{onClick:()=>t(`/events/${e}/checkin`),className:"inline-flex items-center px-4 py-2 border border-primary-600 rounded-md shadow-sm text-sm font-medium text-primary-600 bg-white hover:bg-primary-50",children:[Je.jsx(j,{className:"h-4 w-4 mr-2"}),"Scan QR Code"]}),Je.jsxs("button",{onClick:()=>{if(!c.length)return;const e=c.map(e=>[e.registration.name,e.registration.email,new Date(e.checked_in_at).toLocaleString(),e.location||"N/A",e.checked_in_by_user.name]),t=[["Name","Email","Check-in Time","Location","Checked In By"].join(","),...e.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),s=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=`${(null==r?void 0:r.title)||"event"}-attendance-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a)},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",disabled:!c.length,children:[Je.jsx(xe,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),Je.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Attendance Tracking"}),Je.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:Je.jsx("div",{className:"flex items-start justify-between",children:Je.jsxs("div",{className:"flex-1",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:r.title}),Je.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(S,{className:"h-4 w-4 mr-2"}),za(r.start_date)]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(P,{className:"h-4 w-4 mr-2"}),r.location]})]})]})})})]}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-blue-100 rounded-md",children:Je.jsx(y,{className:"h-6 w-6 text-blue-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Registrations"}),Je.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_registrations})]})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-green-100 rounded-md",children:Je.jsx(v,{className:"h-6 w-6 text-green-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Check-ins"}),Je.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_check_ins})]})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-purple-100 rounded-md",children:Je.jsx(E,{className:"h-6 w-6 text-purple-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Check-in Rate"}),Je.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[l.check_in_rate,"%"]})]})]})})]}),Je.jsx("div",{className:"mb-6",children:Je.jsxs("div",{className:"relative",children:[Je.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Je.jsx(z,{className:"h-5 w-5 text-gray-400"})}),Je.jsx("input",{type:"text",placeholder:"Search by name or email...",value:g,onChange:e=>f(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})}),0===b.length?Je.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[Je.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:g?"No matching records found":"No check-ins yet"}),Je.jsx("p",{className:"text-gray-500",children:g?"Try adjusting your search terms":"Participants will appear here once they check in"})]}):Je.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[Je.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:Je.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Check-in Records (",b.length,")"]})}),Je.jsx("ul",{className:"divide-y divide-gray-200",children:b.map(e=>Je.jsx("li",{className:"px-6 py-4",children:Je.jsx("div",{className:"flex items-center justify-between",children:Je.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[Je.jsx("div",{className:"flex-shrink-0",children:Je.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:Je.jsx(v,{className:"h-6 w-6 text-green-600"})})}),Je.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.registration.name}),Je.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Checked In"})]}),Je.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[Je.jsx("div",{className:"flex items-center",children:Je.jsx("span",{children:e.registration.email})}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(Y,{className:"h-4 w-4 mr-1"}),new Date(e.checked_in_at).toLocaleString()]}),e.location&&Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(P,{className:"h-4 w-4 mr-1"}),e.location]})]}),Je.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:["Checked in by: ",e.checked_in_by_user.name]})]})]})})},e.id))})]})]})};function $a(e){var t,s,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(s=$a(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function Ia(){for(var e,t,s=0,a="";s<arguments.length;)(e=arguments[s++])&&(t=La(e))&&(a&&(a+=" "),a+=t);return a}function La(e){if("string"==typeof e)return e;for(var t,s="",a=0;a<e.length;a++)e[a]&&(t=La(e[a]))&&(s&&(s+=" "),s+=t);return s}function Oa(e){var t=function(e){var t=e.theme,s=e.prefix,a={nextPart:new Map,validators:[]},r=function(e,t){if(!t)return e;return e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){var s=e[0],a=e[1];return[t+s,a]})):e})]})}(Object.entries(e.classGroups),s);return r.forEach(function(e){var s=e[0];Ua(e[1],a,s,t)}),a}(e),s=e.conflictingClassGroups,a=e.conflictingClassGroupModifiers,r=void 0===a?{}:a;return{getClassGroupId:function(e){var s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),qa(s,t)||function(e){if(Ma.test(e)){var t=Ma.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}}(e)},getConflictingClassGroupIds:function(e,t){var a=s[e]||[];return t&&r[e]?[].concat(a,r[e]):a}}}function qa(e,t){var s;if(0===e.length)return t.classGroupId;var a=e[0],r=t.nextPart.get(a),i=r?qa(e.slice(1),r):void 0;if(i)return i;if(0!==t.validators.length){var n=e.join("-");return null==(s=t.validators.find(function(e){return(0,e.validator)(n)}))?void 0:s.classGroupId}}var Ma=/^\[(.+)\]$/;function Ua(e,t,s,a){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void Ua(e(a),t,s,a):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(function(e){var r=e[0];Ua(e[1],Ba(t,r),s,a)})}else{(""===e?t:Ba(t,e)).classGroupId=s}})}function Ba(e,t){var s=e;return t.split("-").forEach(function(e){s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s}function Va(e){if(e<1)return{get:function(){},set:function(){}};var t=0,s=new Map,a=new Map;function r(r,i){s.set(r,i),++t>e&&(t=0,a=s,s=new Map)}return{get:function(e){var t=s.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(r(e,t),t):void 0},set:function(e,t){s.has(e)?s.set(e,t):r(e,t)}}}function Ga(e){var t=e.separator||":",s=1===t.length,a=t[0],r=t.length;return function(e){for(var i,n=[],l=0,o=0,c=0;c<e.length;c++){var d=e[c];if(0===l){if(d===a&&(s||e.slice(c,c+r)===t)){n.push(e.slice(o,c)),o=c+r;continue}if("/"===d){i=c;continue}}"["===d?l++:"]"===d&&l--}var m=0===n.length?e:e.substring(o),x=m.startsWith("!");return{modifiers:n,hasImportantModifier:x,baseClassName:x?m.substring(1):m,maybePostfixModifierPosition:i&&i>o?i-o:void 0}}}var Ya=/\s+/;function Qa(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var a,r,i,n=function(e){var s=t[0],o=t.slice(1).reduce(function(e,t){return t(e)},s());return a=function(e){return{cache:Va(e.cacheSize),splitModifiers:Ga(e),...Oa(e)}}(o),r=a.cache.get,i=a.cache.set,n=l,l(e)};function l(e){var t=r(e);if(t)return t;var s=function(e,t){var s=t.splitModifiers,a=t.getClassGroupId,r=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(Ya).map(function(e){var t=s(e),r=t.modifiers,i=t.hasImportantModifier,n=t.baseClassName,l=t.maybePostfixModifierPosition,o=a(l?n.substring(0,l):n),c=Boolean(l);if(!o){if(!l)return{isTailwindClass:!1,originalClassName:e};if(!(o=a(n)))return{isTailwindClass:!1,originalClassName:e};c=!1}var d=function(e){if(e.length<=1)return e;var t=[],s=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,s.sort().concat([e])),s=[]):s.push(e)}),t.push.apply(t,s.sort()),t}(r).join(":");return{isTailwindClass:!0,modifierId:i?d+"!":d,classGroupId:o,originalClassName:e,hasPostfixModifier:c}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,s=e.classGroupId,a=e.hasPostfixModifier,n=t+s;return!i.has(n)&&(i.add(n),r(s,a).forEach(function(e){return i.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}(e,a);return i(e,s),s}return function(){return n(Ia.apply(null,arguments))}}function Wa(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var Ha=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ja=/^\d+\/\d+$/,Xa=new Set(["px","full","screen"]),Za=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ka=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,er=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function tr(e){return lr(e)||Xa.has(e)||Ja.test(e)||sr(e)}function sr(e){return hr(e,"length",pr)}function ar(e){return hr(e,"size",gr)}function rr(e){return hr(e,"position",gr)}function ir(e){return hr(e,"url",fr)}function nr(e){return hr(e,"number",lr)}function lr(e){return!Number.isNaN(Number(e))}function or(e){return e.endsWith("%")&&lr(e.slice(0,-1))}function cr(e){return br(e)||hr(e,"number",br)}function dr(e){return Ha.test(e)}function mr(){return!0}function xr(e){return Za.test(e)}function ur(e){return hr(e,"",yr)}function hr(e,t,s){var a=Ha.exec(e);return!!a&&(a[1]?a[1]===t:s(a[2]))}function pr(e){return Ka.test(e)}function gr(){return!1}function fr(e){return e.startsWith("url(")}function br(e){return Number.isInteger(Number(e))}function yr(e){return er.test(e)}function vr(){var e=Wa("colors"),t=Wa("spacing"),s=Wa("blur"),a=Wa("brightness"),r=Wa("borderColor"),i=Wa("borderRadius"),n=Wa("borderSpacing"),l=Wa("borderWidth"),o=Wa("contrast"),c=Wa("grayscale"),d=Wa("hueRotate"),m=Wa("invert"),x=Wa("gap"),u=Wa("gradientColorStops"),h=Wa("gradientColorStopPositions"),p=Wa("inset"),g=Wa("margin"),f=Wa("opacity"),b=Wa("padding"),y=Wa("saturate"),v=Wa("scale"),j=Wa("sepia"),N=Wa("skew"),w=Wa("space"),k=Wa("translate"),S=function(){return["auto",dr,t]},C=function(){return[dr,t]},E=function(){return["",tr]},_=function(){return["auto",lr,dr]},A=function(){return["","0",dr]},P=function(){return[lr,nr]},z=function(){return[lr,dr]};return{cacheSize:500,theme:{colors:[mr],spacing:[tr],blur:["none","",xr,dr],brightness:P(),borderColor:[e],borderRadius:["none","","full",xr,dr],borderSpacing:C(),borderWidth:E(),contrast:P(),grayscale:A(),hueRotate:z(),invert:A(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[or,sr],inset:S(),margin:S(),opacity:P(),padding:C(),saturate:P(),scale:P(),sepia:A(),skew:z(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",dr]}],container:["container"],columns:[{columns:[xr]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[dr])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",cr]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",dr]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",cr]}],"grid-cols":[{"grid-cols":[mr]}],"col-start-end":[{col:["auto",{span:["full",cr]},dr]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[mr]}],"row-start-end":[{row:["auto",{span:[cr]},dr]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",dr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",dr]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",dr,t]}],"min-w":[{"min-w":["min","max","fit",dr,tr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[xr]},xr,dr]}],h:[{h:[dr,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",dr,tr]}],"max-h":[{"max-h":[dr,t,"min","max","fit"]}],"font-size":[{text:["base",xr,sr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nr]}],"font-family":[{font:[mr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",dr]}],"line-clamp":[{"line-clamp":["none",lr,nr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",dr,tr]}],"list-image":[{"list-image":["none",dr]}],"list-style-type":[{list:["none","disc","decimal",dr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",tr]}],"underline-offset":[{"underline-offset":["auto",dr,tr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",dr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",dr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[rr])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ar]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ir]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[u]}],"gradient-via":[{via:[u]}],"gradient-to":[{to:[u]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[dr,tr]}],"outline-w":[{outline:[tr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[tr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",xr,ur]}],"shadow-color":[{shadow:[mr]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[a]}],contrast:[{contrast:[o]}],"drop-shadow":[{"drop-shadow":["","none",xr,dr]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[y]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[o]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[n]}],"border-spacing-x":[{"border-spacing-x":[n]}],"border-spacing-y":[{"border-spacing-y":[n]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",dr]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",dr]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",dr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[cr,dr]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",dr]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",dr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",dr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[tr,nr]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var jr=Qa(vr);function Nr(...e){return jr(function(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=$a(e))&&(a&&(a+=" "),a+=t);return a}(e))}const wr=({className:e,variant:t="default",size:s="default",children:a,...r})=>Je.jsx("button",{className:Nr("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-blue-600 text-white hover:bg-blue-700":"default"===t,"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground":"outline"===t,"bg-red-600 text-white hover:bg-red-700":"destructive"===t,"hover:bg-accent hover:text-accent-foreground":"ghost"===t},{"h-10 py-2 px-4":"default"===s,"h-9 px-3":"sm"===s,"h-11 px-8":"lg"===s},e),...r,children:a}),kr=()=>{const{id:e}=d(),t=n(),[a,r]=s.useState([]),[i,l]=s.useState([]),[o,c]=s.useState([]),[m,x]=s.useState([]),[u,h]=s.useState("generated"),[p,g]=s.useState(""),[f,b]=s.useState([]),[y,v]=s.useState(!1),[j,N]=s.useState(!0),[w,k]=s.useState(null),[S,C]=s.useState(!1),[E,A]=s.useState(null),[P,z]=s.useState(null),[D,R]=s.useState(""),[F,T]=s.useState("powerpoint"),[I,L]=s.useState(!1);s.useEffect(()=>{q()},[e]);const O=(e,t)=>{k({type:e,text:t}),setTimeout(()=>k(null),5e3)},q=async()=>{var t,s,a,i;try{N(!0);const[n,o,d,m]=await Promise.all([Ts.get(`/certificates/templates?eventId=${e}`),Ts.get("/certificates/data-fields"),Ts.get(`/certificates/events/${e}/participants`),Ts.get(`/certificates/events/${e}/certificates`)]),u=(null==(t=n.data)?void 0:t.data)||n.data||[];r(u);const h=(null==(s=o.data)?void 0:s.data)||o.data||[];l(h);const p=(null==(a=d.data)?void 0:a.data)||d.data||[];c(p);const g=(null==(i=m.data)?void 0:i.data)||m.data||[];x(g)}catch(n){O("error","Failed to load certificate data")}finally{N(!1)}};return j?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading certificate data..."})}):Je.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Je.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Certificate Management"}),Je.jsx(wr,{onClick:()=>t(-1),variant:"outline",children:"Back to Event"})]}),w&&Je.jsx("div",{className:"p-4 rounded-lg "+("success"===w.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:Je.jsxs("div",{className:"flex items-center gap-2",children:["success"===w.type?Je.jsx(_,{className:"h-5 w-5"}):Je.jsx(pe,{className:"h-5 w-5"}),w.text]})}),Je.jsxs("div",{className:"flex space-x-2 border-b mb-6",children:[Je.jsx("button",{className:"px-4 py-2 font-medium border-b-2 "+("generate"===u?"border-blue-600 text-blue-700":"border-transparent text-gray-500"),onClick:()=>h("generate"),children:"Generate Certificates"}),Je.jsx("button",{className:"px-4 py-2 font-medium border-b-2 "+("generated"===u?"border-blue-600 text-blue-700":"border-transparent text-gray-500"),onClick:()=>h("generated"),children:"Generated Certificates"})]}),"generated"===u&&Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Je.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Participants with Certificates"}),0===m.length?Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx(pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Je.jsx("p",{className:"text-gray-600",children:"No certificates have been generated yet."})]}):Je.jsx("div",{className:"overflow-x-auto",children:Je.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Je.jsx("thead",{className:"bg-gray-50",children:Je.jsxs("tr",{children:[Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Participant"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Verification Code"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Generated Date"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email Status"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),Je.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(t=>{var s,a;return Je.jsxs("tr",{children:[Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:(null==(s=t.registrations)?void 0:s.name)||"Unknown"}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null==(a=t.registrations)?void 0:a.email)||"Unknown"}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Je.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono",children:t.verification_code})}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.email_sent?Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Sent"}),t.email_sent_at&&Je.jsx("span",{className:"ml-2 text-xs text-gray-400",children:new Date(t.email_sent_at).toLocaleDateString()})]}):Je.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Sent"})}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Je.jsxs("div",{className:"flex gap-2",children:[Je.jsx(wr,{size:"sm",variant:"outline",onClick:()=>{t.file_url?window.open(t.file_url,"_blank"):O("error","Certificate file not available")},children:"View"}),Je.jsx(wr,{size:"sm",variant:"outline",onClick:async()=>{try{await Ts.post(`/certificates/events/${e}/email`,{certificateIds:[t.id]}),O("success","Certificate emailed successfully")}catch(s){O("error","Failed to email certificate")}},children:"Email"})]})})]},t.id)})})]})})]}),"generate"===u&&Je.jsxs(Je.Fragment,{children:[Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[Je.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[Je.jsx(ge,{className:"h-5 w-5"}),"Upload New Template"]}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name"}),Je.jsx("input",{type:"text",value:D,onChange:e=>R(e.target.value),placeholder:"Enter template name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Type"}),Je.jsxs("select",{value:F,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Je.jsx("option",{value:"powerpoint",children:"PowerPoint (.pptx)"}),Je.jsx("option",{value:"canvas",children:"Canvas (Programmatic)"})]})]}),Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template File"}),Je.jsx("input",{type:"file",accept:".pptx,.png,.jpg,.jpeg",onChange:e=>{var t;return z((null==(t=e.target.files)?void 0:t[0])||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),Je.jsx(wr,{onClick:async()=>{var t,s,a,r;if(P&&D)try{L(!0);const a=new FormData;a.append("template",P),a.append("name",D),a.append("type",F),e&&a.append("eventId",e);const r=(await Ts.post("/certificates/templates",a)).data;O("success",(null==(t=null==r?void 0:r.data)?void 0:t.message)||"Template uploaded successfully"),z(null),R(""),T("powerpoint"),await q(),(null==(s=null==r?void 0:r.data)?void 0:s.placeholders)&&r.data.placeholders.length>0&&(A(r.data.template),C(!0))}catch(i){O("error",(null==(r=null==(a=i.response)?void 0:a.data)?void 0:r.message)||"Failed to upload template")}finally{L(!1)}else O("error","Please select a file and provide a template name")},disabled:I||!P||!D,className:"w-full md:w-auto",children:I?"Uploading...":"Upload Template"})]}),Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[Je.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Available Templates"}),0===a.length?Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx(pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Je.jsx("p",{className:"text-gray-600",children:"No templates available. Upload a template to get started."})]}):Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{children:[Je.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Template for Generation"}),Je.jsxs("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Je.jsx("option",{value:"",children:"Choose a template"}),a.map(e=>Je.jsxs("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))]})]}),Je.jsx("div",{className:"overflow-x-auto",children:Je.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Je.jsx("thead",{className:"bg-gray-50",children:Je.jsxs("tr",{children:[Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Placeholders"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),Je.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>{var t,s;const a=(null==(t=e.extracted_placeholders)?void 0:t.length)||0,r=Object.values(e.placeholder_mapping||{}).filter(Boolean).length,i=0===a||a===r;return Je.jsxs("tr",{children:[Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.name}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Je.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("powerpoint"===e.type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.type})}),Je.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:a>0?Je.jsxs("div",{className:"space-y-1",children:[Je.jsxs("div",{className:"font-medium",children:[r,"/",a," mapped"]}),null==(s=e.extracted_placeholders)?void 0:s.map((t,s)=>{var a;const r=null==(a=e.placeholder_mapping)?void 0:a[t];return Je.jsxs("div",{className:"text-xs",children:[Je.jsx("code",{className:"bg-gray-100 px-1 rounded",children:t}),r?Je.jsxs("span",{className:"text-green-600 ml-1",children:["→ ",r]}):Je.jsx("span",{className:"text-red-500 ml-1",children:"→ unmapped"})]},s)})]}):"None"}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Je.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(i?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:i?"Ready":"Needs Configuration"})}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Je.jsxs("div",{className:"flex gap-2",children:[a>0&&Je.jsx("button",{onClick:()=>{A(e),C(!0)},className:"text-blue-600 hover:text-blue-900",title:i?"Edit mapping":"Configure mapping",children:i?Je.jsx(fe,{className:"h-4 w-4"}):Je.jsx(ne,{className:"h-4 w-4"})}),Je.jsx("button",{onClick:()=>(async e=>{var t,s;if(confirm("Are you sure you want to delete this template?"))try{await Ts.delete(`/certificates/templates/${e}`),O("success","Template deleted successfully"),await q()}catch(a){O("error",(null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Failed to delete template")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete template",children:Je.jsx($,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]}),Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Je.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Select Participants (",o.length," eligible)"]}),0===o.length?Je.jsxs("div",{className:"text-center py-8",children:[Je.jsx(pe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Je.jsx("p",{className:"text-gray-600",children:"No eligible participants found. Only participants who attended the event can receive certificates."})]}):Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{className:"flex gap-2 items-center",children:[Je.jsx(wr,{size:"sm",variant:"outline",onClick:()=>b(o.map(e=>e.id)),children:"Select All"}),Je.jsx(wr,{size:"sm",variant:"outline",onClick:()=>b([]),children:"Clear Selection"}),Je.jsx(wr,{size:"sm",disabled:0===f.length||!p||y,onClick:async()=>{var t,s;if(p)try{v(!0);const t=(await Ts.post(`/certificates/events/${e}/generate`,{templateId:p,participantIds:f.length>0?f:void 0})).data,s=null==t?void 0:t.summary;O("success",`Generated ${(null==s?void 0:s.successful)||0} certificates successfully${(null==s?void 0:s.failed)>0?`, ${s.failed} failed`:""}`),b([]),await q()}catch(a){O("error",(null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Failed to generate certificates")}finally{v(!1)}else O("error","Please select a template")},children:y?"Generating...":`Generate Certificates (${f.length})`})]}),Je.jsx("div",{className:"overflow-x-auto",children:Je.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Je.jsx("thead",{className:"bg-gray-50",children:Je.jsxs("tr",{children:[Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Select"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),Je.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Registration Date"})]})}),Je.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>m.some(t=>t.registration_id===e.registration_id)?null:Je.jsxs("tr",{children:[Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Je.jsx("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>{return t=e.id,void b(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"rounded"})}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.name}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),Je.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.registration_date).toLocaleDateString()})]},e.id))})]})})]})]})]}),S&&E?Je.jsx(Sr,{template:E,dataFields:i,onSave:async e=>{var t,s;if(E)try{await Ts.put(`/certificates/templates/${E.id}/mapping`,{placeholderMapping:e}),O("success","Placeholder mapping updated successfully"),C(!1),A(null),await q()}catch(a){O("error",(null==(s=null==(t=a.response)?void 0:t.data)?void 0:s.message)||"Failed to update mapping")}},onClose:()=>{C(!1),A(null)}}):null]})})},Sr=({template:e,dataFields:t,onSave:a,onClose:r})=>{var i;const[n,l]=s.useState(e.placeholder_mapping||{}),o=t.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return Je.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Je.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto m-4",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("h2",{className:"text-2xl font-bold",children:"Configure Placeholder Mapping"}),Je.jsx(wr,{variant:"outline",onClick:r,children:"Close"})]}),Je.jsx("p",{className:"text-gray-600 mb-6",children:"Map the placeholders found in your template to data fields from the database."}),Je.jsx("div",{className:"space-y-4",children:null==(i=e.extracted_placeholders)?void 0:i.map(e=>Je.jsxs("div",{className:"border rounded-lg p-4",children:[Je.jsxs("label",{className:"block text-lg font-medium mb-2",children:["Placeholder:"," ",Je.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"{{"+e+"}}"})]}),Je.jsxs("select",{value:n[e]||"",onChange:t=>l(s=>({...s,[e]:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Je.jsx("option",{value:"",children:"Select a data field"}),Object.entries(o).map(([e,t])=>Je.jsx("optgroup",{label:e.toUpperCase(),children:t.map(e=>Je.jsxs("option",{value:e.key,children:[e.label," - ",e.description,e.example&&` (e.g., ${e.example})`]},e.key))},e))]})]},e))}),Je.jsxs("div",{className:"flex gap-2 mt-6",children:[Je.jsx(wr,{onClick:()=>{a(n)},className:"flex-1",children:"Save Mapping"}),Je.jsx(wr,{variant:"outline",onClick:r,children:"Cancel"})]})]})})},Cr=()=>{const[e,t]=s.useState([]),[a,r]=s.useState(!0),[i,n]=s.useState(null);s.useEffect(()=>{l()},[]);const l=async()=>{var e;try{r(!0),n(null);const s=await Ts.get("/certificates/events"),a=(null==(e=s.data)?void 0:e.data)||s.data||[];t(a)}catch(s){n("Failed to load events")}finally{r(!1)}};return a?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading events..."})}):Je.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:Je.jsxs("div",{className:"max-w-7xl mx-auto",children:[Je.jsxs("div",{className:"mb-8",children:[Je.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Je.jsx(N,{className:"h-8 w-8 text-blue-600"}),Je.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Certificate Management"})]}),Je.jsx("p",{className:"text-gray-600",children:"Select an event to generate and manage certificates for participants"})]}),i&&Je.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:Je.jsxs("div",{className:"flex items-center gap-2",children:[Je.jsx(pe,{className:"h-5 w-5 text-red-400"}),Je.jsx("p",{className:"text-red-700",children:i})]})}),0===e.length?Je.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[Je.jsx(N,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Events Available"}),Je.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any events that can generate certificates yet."}),Je.jsx(o,{to:"/events/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create New Event"})]}):Je.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>{const t=new Date>new Date(e.end_date);return Je.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden",children:Je.jsxs("div",{className:"p-6",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),Je.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[Je.jsxs("div",{className:"flex items-center gap-2",children:[Je.jsx(S,{className:"w-4 h-4"}),Je.jsxs("span",{children:[new Date(e.start_date).toLocaleDateString()," -"," ",new Date(e.end_date).toLocaleDateString()]})]}),Je.jsxs("div",{className:"flex items-center gap-2",children:[Je.jsx(y,{className:"w-4 h-4"}),Je.jsxs("span",{children:[e.registrations_count||0," participants"]})]}),e.location&&Je.jsxs("div",{className:"flex items-center gap-2",children:[Je.jsx(P,{className:"w-4 h-4"}),Je.jsx("span",{className:"line-clamp-1",children:e.location})]})]}),e.description&&Je.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description}),Je.jsx("div",{className:"pt-4 border-t border-gray-200",children:t?Je.jsxs(o,{to:`/certificates/${e.id}`,className:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[Je.jsx(N,{className:"w-4 h-4 mr-2"}),"Manage Certificates"]}):Je.jsxs("div",{className:"text-center",children:[Je.jsxs("button",{disabled:!0,className:"w-full inline-flex items-center justify-center px-4 py-2 bg-gray-100 text-gray-400 text-sm font-medium rounded-lg cursor-not-allowed",children:[Je.jsx(Y,{className:"w-4 h-4 mr-2"}),"Event Must End First"]}),Je.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Certificates available after event completion"})]})})]})},e.id)})})]})})};class Er{static async getPastEvents(){return Ts.get("/certificates/events")}static async getEventCertificates(e){return Ts.get(`/certificates/event/${e}`)}static async generateCertificates(e,t){return Ts.post(`/certificates/events/${e}/generate`,{participantIds:null==t?void 0:t.participantIds,templateId:null==t?void 0:t.templateId})}static async getCertificates(e){return Ts.get(`/certificates/events/${e}/certificates`)}static async emailCertificates(e,t){return Ts.post(`/certificates/events/${e}/email`,{certificateIds:null==t?void 0:t.certificateIds,message:null==t?void 0:t.message})}static async verifyCertificate(e){return Ts.get(`/certificates/verify/${e}`)}static downloadCertificate(e){return`https://your-backend-domain.com/api/certificates/download/${e}`}}function _r(){const[e,t]=s.useState(""),[a,r]=s.useState(null),[i,n]=s.useState(!1),[l,o]=s.useState(null);return Je.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:Je.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[Je.jsxs("div",{className:"text-center mb-12",children:[Je.jsx(N,{className:"h-16 w-16 text-blue-600 mx-auto mb-6"}),Je.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Certificate Verification"}),Je.jsx("p",{className:"text-xl text-gray-600",children:"Verify the authenticity of event participation certificates"})]}),Je.jsx("div",{className:"bg-white shadow-lg rounded-lg p-8 mb-8",children:Je.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.trim())try{n(!0),o(null),r(null);const t=await Er.verifyCertificate(e.trim());t.success&&t.data?r(t.data):o(t.error||"Certificate not found")}catch(s){o("Failed to verify certificate")}finally{n(!1)}else o("Please enter a certificate code")},className:"space-y-6",children:[Je.jsxs("div",{children:[Je.jsx("label",{htmlFor:"certificate-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Certificate Code"}),Je.jsxs("div",{className:"flex space-x-4",children:[Je.jsx("input",{type:"text",id:"certificate-code",value:e,onChange:e=>t(e.target.value),placeholder:"Enter certificate code (e.g., CERT-ABC12345)",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:i}),Je.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:i?Je.jsx(Ms,{size:"xs",className:"border-white"}):Je.jsxs(Je.Fragment,{children:[Je.jsx(z,{className:"h-5 w-5 mr-2"}),"Verify"]})})]})]}),Je.jsx("div",{className:"text-sm text-gray-500",children:Je.jsx("p",{children:"Enter the certificate code found on your participation certificate to verify its authenticity. Certificate codes are in the format: CERT-XXXXXXXX"})})]})}),l&&Je.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-8",children:Je.jsxs("div",{className:"flex",children:[Je.jsx(he,{className:"h-5 w-5 text-red-400 mr-2"}),Je.jsx("p",{className:"text-red-700",children:l})]})}),a&&Je.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:a.valid&&a.certificate?Je.jsxs(Je.Fragment,{children:[Je.jsx("div",{className:"bg-green-50 border-b border-green-200 p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(_,{className:"h-8 w-8 text-green-500 mr-3"}),Je.jsxs("div",{children:[Je.jsx("h2",{className:"text-2xl font-bold text-green-900",children:"Certificate Verified ✓"}),Je.jsx("p",{className:"text-green-700",children:"This certificate is authentic and valid"})]})]})}),Je.jsxs("div",{className:"p-6",children:[Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Participant Information"}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(p,{className:"h-5 w-5 text-gray-400 mr-3"}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),Je.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.participantName})]})]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(R,{className:"h-5 w-5 text-gray-400 mr-3"}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),Je.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.participantEmail})]})]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(N,{className:"h-5 w-5 text-gray-400 mr-3"}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm text-gray-500",children:"Certificate Code"}),Je.jsx("p",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded inline-block",children:a.certificate.code})]})]})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Event Information"}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm text-gray-500",children:"Event Title"}),Je.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.event.title})]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(S,{className:"h-5 w-5 text-gray-400 mr-3"}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm text-gray-500",children:"Event Date"}),Je.jsx("p",{className:"font-semibold text-gray-900",children:new Date(a.certificate.event.date).toLocaleDateString()})]})]}),a.certificate.event.location&&Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(P,{className:"h-5 w-5 text-gray-400 mr-3"}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),Je.jsx("p",{className:"font-semibold text-gray-900",children:a.certificate.event.location})]})]}),Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm text-gray-500",children:"Issued Date"}),Je.jsx("p",{className:"font-semibold text-gray-900",children:new Date(a.certificate.issuedAt).toLocaleDateString()})]})]})]}),Je.jsx("div",{className:"mt-8 pt-6 border-t",children:Je.jsxs("button",{onClick:()=>{if(null==a?void 0:a.certificate){const e=Er.downloadCertificate(a.certificate.code);window.open(e,"_blank")}},className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 flex items-center mx-auto",children:[Je.jsx(xe,{className:"h-5 w-5 mr-2"}),"Download Certificate"]})})]})]}):Je.jsx("div",{className:"bg-red-50 p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(he,{className:"h-8 w-8 text-red-500 mr-3"}),Je.jsxs("div",{children:[Je.jsx("h2",{className:"text-2xl font-bold text-red-900",children:"Certificate Not Found"}),Je.jsx("p",{className:"text-red-700",children:"The certificate code you entered is not valid or does not exist in our system."})]})]})})}),!a&&!l&&Je.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-6",children:[Je.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"How to Verify Your Certificate"}),Je.jsxs("ul",{className:"text-blue-800 space-y-2",children:[Je.jsxs("li",{className:"flex items-start",children:[Je.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"1"}),"Locate your certificate code on your participation certificate"]}),Je.jsxs("li",{className:"flex items-start",children:[Je.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"2"}),"Enter the complete code in the field above (format: CERT-XXXXXXXX)"]}),Je.jsxs("li",{className:"flex items-start",children:[Je.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"3"}),'Click "Verify" to check the certificate\'s authenticity']}),Je.jsxs("li",{className:"flex items-start",children:[Je.jsx("span",{className:"bg-blue-200 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"4"}),"Download the verified certificate if needed"]})]})]})]})})}function Ar(){const{id:e}=d(),t=n(),{events:a,selectedEvent:r,loadEvent:i}=ka(),l=a.find(t=>t.id===e)||r,[o,c]=s.useState([]),[m,x]=s.useState(!0),[u,h]=s.useState({totalResponses:0,averageRating:0,npsScore:0,recommendationRate:0}),[p,g]=s.useState([]);s.useEffect(()=>{e&&(i(e),f())},[e]);const f=async()=>{if(e)try{x(!0);const t=await Zs.getEventRegistrations(e);t.success&&t.data&&(c(t.data.registrations),b(t.data.registrations))}catch(t){}finally{x(!1)}},b=e=>{if(0===e.length)return;const t=[],s=[],a=[],r={};e.forEach(e=>{const i=e.responses||{};Object.entries(i).forEach(([e,i])=>{if(e.includes("rating")&&"string"==typeof i&&!isNaN(Number(i))){const e=Number(i);t.push(e);const s=`${e} Star${1!==e?"s":""}`;r[s]=(r[s]||0)+1}e.includes("nps")&&!isNaN(Number(i))&&s.push(Number(i)),e.includes("recommend")&&a.push(String(i).toLowerCase())})});const i=t.length>0?t.reduce((e,t)=>e+t,0)/t.length:0,n=s.filter(e=>e>=9).length,l=s.filter(e=>e<=6).length,o=s.length>0?(n-l)/s.length*100:0,c=a.filter(e=>e.includes("yes")).length,d=a.length>0?c/a.length*100:0,m=Object.entries(r).map(([e,s])=>({rating:e,count:s,percentage:s/t.length*100})).sort((e,t)=>t.rating.localeCompare(e.rating));h({totalResponses:e.length,averageRating:i,npsScore:o,recommendationRate:d}),g(m)};return m?Je.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading feedback responses..."})}):Je.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Je.jsx("div",{className:"bg-white border-b",children:Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex items-center space-x-4",children:[Je.jsx(wa,{onClick:()=>t(`/events/${e}`),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",label:""}),Je.jsxs("div",{children:[Je.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Feedback Responses"}),Je.jsx("p",{className:"text-sm text-gray-600",children:null==l?void 0:l.title})]})]}),Je.jsxs("button",{onClick:()=>{if(0===o.length)return;const e=new Set;o.forEach(t=>{Object.keys(t.responses||{}).forEach(t=>e.add(t))});const t=["Submitted At","User Email",...Array.from(e)],s=o.map(t=>{const s=t.responses||{};return[new Date(t.created_at).toLocaleString(),t.email||"N/A",...Array.from(e).map(e=>s[e]||"")]}),a=[t.join(","),...s.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),r=new Blob([a],{type:"text/csv"}),i=URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download=`${(null==l?void 0:l.title)||"event"}-feedback-${Date.now()}.csv`,n.click(),URL.revokeObjectURL(i)},className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[Je.jsx(xe,{className:"w-4 h-4"}),"Export CSV"]})]})})}),Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[Je.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Responses"}),Je.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:u.totalResponses})]}),Je.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:Je.jsx(y,{className:"w-6 h-6 text-blue-600"})})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Rating"}),Je.jsxs("div",{className:"flex items-center mt-2",children:[Je.jsx("p",{className:"text-3xl font-bold text-gray-900",children:u.averageRating.toFixed(1)}),Je.jsx(be,{className:"w-5 h-5 text-yellow-400 ml-2 fill-current"})]})]}),Je.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:Je.jsx(be,{className:"w-6 h-6 text-yellow-600"})})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"NPS Score"}),Je.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:u.npsScore.toFixed(0)}),Je.jsx("p",{className:"text-xs text-gray-500 mt-1",children:u.npsScore>=50?"Excellent":u.npsScore>=0?"Good":"Needs Improvement"})]}),Je.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:Je.jsx(E,{className:"w-6 h-6 text-green-600"})})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Would Recommend"}),Je.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[u.recommendationRate.toFixed(0),"%"]})]}),Je.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:Je.jsx(H,{className:"w-6 h-6 text-purple-600"})})]})})]}),p.length>0&&Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[Je.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Je.jsx(ye,{className:"w-5 h-5 mr-2"}),"Rating Distribution"]}),Je.jsx("div",{className:"space-y-3",children:p.map(e=>Je.jsxs("div",{children:[Je.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[Je.jsx("span",{className:"font-medium text-gray-700",children:e.rating}),Je.jsxs("span",{className:"text-gray-600",children:[e.count," (",e.percentage.toFixed(1),"%)"]})]}),Je.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:Je.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${e.percentage}%`}})})]},e.rating))})]}),Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[Je.jsx("div",{className:"p-6 border-b",children:Je.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"All Responses"})}),Je.jsx("div",{className:"divide-y",children:0===o.length?Je.jsxs("div",{className:"p-12 text-center",children:[Je.jsx(H,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),Je.jsx("p",{className:"text-gray-600",children:"No feedback responses yet"})]}):o.map(e=>Je.jsxs("div",{className:"p-6",children:[Je.jsx("div",{className:"flex items-start justify-between mb-4",children:Je.jsxs("div",{children:[Je.jsx("p",{className:"font-medium text-gray-900",children:e.email||e.name||"Anonymous"}),Je.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()})]})}),Je.jsx("div",{className:"space-y-3",children:Object.entries(e.responses||{}).map(([e,t])=>Je.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),Je.jsx("p",{className:"text-gray-900",children:"string"==typeof t&&!isNaN(Number(t))&&Number(t)<=5?"⭐".repeat(Number(t)):String(t)})]},e))})]},e.id))})]})]})]})}function Pr({onScan:e,isScanning:t,setIsScanning:a}){const[r,i]=s.useState(null),[n,l]=s.useState(!1),[o,c]=s.useState(""),[d,m]=s.useState(null),x=s.useRef(0),u=e=>{const t="success"===e.type?1800:2e3;setTimeout(()=>{i(null)},t)},h=async t=>{var s,a,r,n,o,c,d,m,x;l(!0),i(null);try{const a=await e(t),r={type:"success",message:"✅ Check-in successful!",participantName:(null==(s=null==a?void 0:a.participant)?void 0:s.name)||(null==a?void 0:a.name)};return i(r),void u(r)}catch(h){h.status;let e="❌ Check-in failed - Please try again",t="error";(null==(a=h.message)?void 0:a.includes("already checked in"))?(e="⚠️ Participant already checked in",t="duplicate"):(null==(r=h.message)?void 0:r.includes("Registration not found"))?e="❌ Invalid QR code - This registration was not found for this event":(null==(n=h.message)?void 0:n.includes("not found"))?e="❌ Registration not found - Please check the QR code":(null==(o=h.message)?void 0:o.includes("Authentication"))?e="🔐 Authentication error - Please refresh and login again":(null==(c=h.message)?void 0:c.includes("401"))?e="🔐 Session expired - Please refresh and login again":(null==(d=h.message)?void 0:d.includes("403"))||(null==(m=h.message)?void 0:m.includes("Access denied"))?e="🚫 Access denied - You don't have check-in permissions":(null==(x=h.message)?void 0:x.includes("different event"))?e="🎫 Wrong event - This QR code is for a different event":h.message&&(e=h.message);const s={type:t,message:e};i(s),u(s)}finally{l(!1)}};return Je.jsxs("div",{className:"qr-scanner-container",children:[Je.jsx("div",{className:"scanner-header mb-4",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"QR Code Scanner"}),Je.jsx("div",{className:"flex items-center gap-2",children:t?Je.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[Je.jsx(ve,{className:"w-4 h-4"}),Je.jsx("span",{className:"text-sm font-medium",children:"Active"})]}):Je.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[Je.jsx(je,{className:"w-4 h-4"}),Je.jsx("span",{className:"text-sm font-medium",children:"Inactive"})]})})]})}),Je.jsx("div",{className:"scanner-controls mb-4",children:Je.jsx("div",{className:"flex gap-2",children:t?Je.jsxs("button",{onClick:()=>{a(!1)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[Je.jsx(je,{className:"w-4 h-4"}),"Stop Scanner"]}):Je.jsxs("button",{onClick:()=>{a(!0),m(null),i(null)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[Je.jsx(ve,{className:"w-4 h-4"}),"Start Scanner"]})})}),Je.jsx("div",{className:"scanner-display",children:t?Je.jsxs("div",{className:"scanner-viewport relative",children:[Je.jsx(Fe,{onScan:e=>{var t,s;let r="";if(Array.isArray(e)&&e.length>0?r=(null==(t=e[0])?void 0:t.rawValue)||(null==(s=e[0])?void 0:s.text)||e[0]:"string"==typeof e?r=e:(null==e?void 0:e.rawValue)?r=e.rawValue:(null==e?void 0:e.text)&&(r=e.text),!r)return;Date.now()-x.current<100||r===o&&n||(c(r),setTimeout(()=>{a(!1),setTimeout(()=>{a(!0),m(null)},100)},500),h(r))},onError:e=>{const t="string"==typeof e?e:(null==e?void 0:e.toString())||"Camera access failed";t.includes("media-src")||t.includes("audio")||m(t)},scanDelay:2e3,allowMultiple:!1,constraints:{facingMode:"environment",width:{ideal:640},height:{ideal:480}},styles:{container:{width:"100%",maxWidth:"400px",height:"300px",margin:"0 auto",border:"2px solid #e5e7eb",borderRadius:"0.5rem",overflow:"hidden"},video:{width:"100%",height:"100%",objectFit:"cover"}}}),Je.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:Je.jsx("div",{className:"w-48 h-48 border-2 border-blue-500 border-dashed rounded-lg flex items-center justify-center",children:Je.jsxs("div",{className:"text-blue-500 text-center",children:[Je.jsx(ve,{className:"w-8 h-8 mx-auto mb-2"}),Je.jsx("p",{className:"text-sm font-medium",children:"Scan QR Code"})]})})}),n&&Je.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-white dark:bg-gray-900",children:Je.jsxs("div",{className:"relative",children:[Je.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl bg-blue-500",children:Je.jsx(Ms,{size:"xl",className:"border-white"})}),Je.jsx("div",{className:"mt-4 text-center",children:Je.jsx("div",{className:"px-4 py-2 rounded-lg text-sm font-medium shadow-lg bg-blue-600 text-white",children:"Processing QR code..."})})]})}),r&&!n&&Je.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-white dark:bg-gray-900",children:Je.jsxs("div",{className:"relative",children:[Je.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center shadow-2xl "+("success"===r.type?"bg-green-500":"duplicate"===r.type?"bg-yellow-500":"bg-red-500"),children:"success"===r.type?Je.jsx(_,{className:"w-16 h-16 text-white"}):"duplicate"===r.type?Je.jsx(pe,{className:"w-16 h-16 text-white"}):Je.jsx(he,{className:"w-16 h-16 text-white"})}),Je.jsx("div",{className:"mt-4 text-center",children:Je.jsx("div",{className:"px-4 py-2 rounded-lg text-sm font-medium shadow-lg "+("success"===r.type?"bg-green-600 text-white":"duplicate"===r.type?"bg-yellow-600 text-white":"bg-red-600 text-white"),children:r.message})})]})})]}):Je.jsx("div",{className:"scanner-placeholder flex items-center justify-center h-64 bg-gray-100 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:Je.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[Je.jsx(je,{className:"w-12 h-12 mx-auto mb-4"}),Je.jsx("p",{className:"text-lg font-medium",children:"Scanner Inactive"}),Je.jsx("p",{className:"text-sm",children:'Click "Start Scanner" to begin scanning QR codes'})]})})}),d&&Je.jsxs("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[Je.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400",children:[Je.jsx(he,{className:"w-5 h-5"}),Je.jsx("span",{className:"font-medium",children:"Camera Error"})]}),Je.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-300",children:d})]})]})}function zr({eventId:e}){const{accessToken:t,user:a,validateToken:r,clearAuth:i}=Ds(),[n,l]=s.useState({total_registrations:0,total_check_ins:0,check_in_rate:"0"}),[o,c]=s.useState([]),[d,m]=s.useState(!0),[x,u]=s.useState(!1),[h,p]=s.useState(""),[g,f]=s.useState(null);s.useEffect(()=>{if(!r())return void f({name:"Authentication Error",time:"Please refresh and login again"});b();const e=setInterval(b,3e4);return()=>clearInterval(e)},[e]);const b=async()=>{try{if(!t)return void m(!1);const s="https://your-backend-domain.com/api",a=await fetch(`${s}/checkin/events/${e}/stats`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Failed to fetch stats");const r=await a.json();l(r.stats),c(r.recent_check_ins),m(!1)}catch(s){m(!1)}},j=o.filter(e=>e.registration.name.toLowerCase().includes(h.toLowerCase())||e.registration.email.toLowerCase().includes(h.toLowerCase()));return t&&a?d?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading check-in dashboard..."})}):Je.jsx("div",{className:"min-h-screen bg-gray-50",children:Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"mb-8",children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Check-In"}),Je.jsx("p",{className:"mt-2 text-gray-600",children:"Scan QR codes to check in participants"})]}),g&&Je.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:Je.jsxs("div",{className:"flex items-center space-x-3",children:[Je.jsx(v,{className:"h-6 w-6 text-green-600"}),Je.jsxs("div",{children:[Je.jsxs("p",{className:"text-green-800 font-medium",children:["✅ ",g.name," checked in successfully"]}),Je.jsxs("p",{className:"text-green-600 text-sm",children:["at ",g.time]})]})]})}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-blue-100 rounded-md",children:Je.jsx(y,{className:"h-6 w-6 text-blue-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Registrations"}),Je.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total_registrations})]})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-green-100 rounded-md",children:Je.jsx(v,{className:"h-6 w-6 text-green-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Checked In"}),Je.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total_check_ins})]})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-purple-100 rounded-md",children:Je.jsx(E,{className:"h-6 w-6 text-purple-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Check-in Rate"}),Je.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[n.check_in_rate,"%"]})]})]})})]}),Je.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[Je.jsx("div",{children:Je.jsx(Pr,{onScan:async s=>{if(!t)throw new Error("Authentication required. Please refresh the page and login again.");const a=`https://your-backend-domain.com/api/checkin/events/${e}`,r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({qr_code:s,location:"Main Entrance",device_info:{userAgent:navigator.userAgent,timestamp:(new Date).toISOString()}})});if(!r.ok){if(401===r.status)throw new Error("Authentication failed. Please refresh the page and login again.");const e=await r.json();throw new Error(e.error||e.message||"Failed to check in participant")}const i=await r.json();return f({name:i.participant.name,time:(new Date).toLocaleTimeString()}),b(),i},isScanning:x,setIsScanning:u,eventId:e})}),Je.jsxs("div",{className:"bg-white rounded-lg shadow",children:[Je.jsxs("div",{className:"p-6 border-b border-gray-200",children:[Je.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Je.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Check-ins"}),Je.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Refresh"})]}),Je.jsxs("div",{className:"relative",children:[Je.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Je.jsx("input",{type:"text",placeholder:"Search participants...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),Je.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===j.length?Je.jsx("div",{className:"p-6 text-center text-gray-500",children:h?"No participants found":"No check-ins yet"}):Je.jsx("div",{className:"divide-y divide-gray-200",children:j.map(e=>Je.jsx("div",{className:"p-4 hover:bg-gray-50",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{children:[Je.jsx("p",{className:"font-medium text-gray-900",children:e.registration.name}),Je.jsx("p",{className:"text-sm text-gray-600",children:e.registration.email}),e.location&&Je.jsxs("p",{className:"text-xs text-gray-500",children:["📍 ",e.location]})]}),Je.jsxs("div",{className:"text-right",children:[Je.jsxs("div",{className:"flex items-center space-x-2",children:[Je.jsx(Y,{className:"h-4 w-4 text-gray-400"}),Je.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.checked_in_at).toLocaleTimeString()})]}),Je.jsxs("p",{className:"text-xs text-gray-500",children:["by ",e.checked_in_by_user.name]})]})]})},e.id))})})]})]}),Je.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[Je.jsx("h4",{className:"text-lg font-medium text-blue-900 mb-3",children:"📱 How to Use Check-In System"}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[Je.jsxs("div",{children:[Je.jsx("h5",{className:"font-medium mb-2",children:"For Staff:"}),Je.jsxs("ul",{className:"space-y-1",children:[Je.jsx("li",{children:'• Click "Start Scanning" to activate camera'}),Je.jsx("li",{children:"• Point camera at participant's QR code"}),Je.jsx("li",{children:"• Wait for automatic scan and confirmation"}),Je.jsx("li",{children:"• Monitor real-time check-in statistics"})]})]}),Je.jsxs("div",{children:[Je.jsx("h5",{className:"font-medium mb-2",children:"For Participants:"}),Je.jsxs("ul",{className:"space-y-1",children:[Je.jsx("li",{children:"• Show QR code from registration email"}),Je.jsx("li",{children:"• Ensure QR code is clearly visible"}),Je.jsx("li",{children:"• One-time check-in per registration"}),Je.jsx("li",{children:"• Get instant confirmation when checked in"})]})]})]})]})]})}):Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Je.jsx("div",{className:"text-6xl mb-4",children:"🔐"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),Je.jsx("p",{className:"text-gray-600 mb-4",children:"You need to be logged in to access the check-in system."}),Je.jsx("button",{onClick:()=>{i(),window.location.href="/login"},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Login Again"})]})})}function Dr(){const{eventId:e}=d(),{user:t,isLoading:s}=Is();return s?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading..."})}):t?["staff","organizer","admin"].includes(t.role)?e?Je.jsx(zr,{eventId:e}):Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center",children:[Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Event Not Found"}),Je.jsx("p",{className:"text-gray-600",children:"Invalid event ID provided."})]})}):Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Je.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Je.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the check-in system. Only event staff and organizers can check in participants."})]})}):Je.jsx(c,{to:"/login",replace:!0})}const Rr=({value:e,size:t=180,label:s,footer:a,className:r=""})=>{const i=null==e?void 0:e.toString().trim();return Je.jsxs("div",{className:`flex flex-col items-center ${r}`,children:[s&&Je.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-2 text-center",children:s}),Je.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-100",children:i?Je.jsx(Re,{value:i,size:t,style:{height:"auto",maxWidth:"100%",width:"100%"}}):Je.jsx("div",{className:"h-[${size}px] w-[${size}px] flex items-center justify-center text-xs text-red-500",children:"Invalid QR"})}),a&&Je.jsx("p",{className:"mt-2 text-[11px] text-gray-500 text-center",children:a})]})};function Fr(){const{registrationId:e}=d(),t=n(),{user:a,isLoading:r}=Is(),{accessToken:i}=Ds(),[l,o]=s.useState(null),[m,x]=s.useState(!0),[u,h]=s.useState(null),[g,f]=s.useState(!1);s.useEffect(()=>{e&&i&&b()},[e,i]);const b=async()=>{try{if(!i)return h("Authentication required"),void x(!1);if(!e)return h("Missing registration ID"),void x(!1);const t=await fetch(`/api/registrations/${e}`,{headers:{Authorization:`Bearer ${i}`}});if(!t.ok)throw new Error("Registration not found");const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to fetch registration");o(s.data)}catch(t){h(t.message)}finally{x(!1)}};if(r||m)return Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading your ticket..."})});if(!a)return Je.jsx(c,{to:"/login",replace:!0});if(u||!l)return Je.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-purple-50 flex items-center justify-center px-4",children:Je.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-primary-100 rounded-2xl shadow-xl max-w-lg w-full p-8 text-center",children:[Je.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-700",children:"🎫"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ticket Not Found"}),Je.jsx("p",{className:"text-gray-600 mb-6",children:u||"The ticket you're looking for doesn't exist or you don't have permission to view it."}),Je.jsxs("button",{onClick:()=>t(-1),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[Je.jsx(G,{className:"w-4 h-4"}),Je.jsx("span",{children:"Go Back"})]})]})});if(!(a.email===l.email||"admin"===a.role||"organizer"===a.role))return Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Je.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Je.jsx("p",{className:"text-gray-600",children:"You don't have permission to view this ticket."})]})});const y=new Date(l.event.start_date);return Je.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-purple-50",children:[Je.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200",children:Je.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between",children:Je.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-700 hover:text-primary-600",children:[Je.jsx(G,{className:"h-5 w-5 mr-2"}),Je.jsx("span",{className:"font-medium",children:"Back"})]})})}),Je.jsx("div",{className:"bg-gradient-to-br from-primary-600 to-primary-800 text-white mb-3",children:Je.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[Je.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",children:"Your Event Ticket"}),Je.jsx("p",{className:"text-white/90 mt-1",children:"Show this at the entrance for quick check-in"})]})}),Je.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 -mt-10 pb-16",children:Je.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden relative",children:[Je.jsxs("div",{className:"absolute top-4 right-4",children:["confirmed"===l.status&&Je.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-green-100 text-green-800 shadow-sm",children:[Je.jsx(Q,{className:"h-4 w-4 mr-1"})," Confirmed"]}),"attended"===l.status&&Je.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-blue-100 text-blue-800 shadow-sm",children:"🎉 Attended"}),"pending"===l.status&&Je.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-yellow-100 text-yellow-800 shadow-sm",children:"⏳ Pending"}),"cancelled"===l.status&&Je.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-red-100 text-red-800 shadow-sm",children:"❌ Cancelled"})]}),Je.jsxs("div",{className:"grid md:grid-cols-2",children:[Je.jsxs("div",{className:"p-8",children:[Je.jsx("div",{className:"",children:Je.jsx(Rr,{value:l.qr_code,size:220,label:void 0,footer:"Show this QR at check-in"})}),Je.jsx("div",{className:"mt-6",children:Je.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4",children:[Je.jsx("div",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Registration"}),Je.jsxs("div",{className:"mt-1 font-semibold text-gray-900",children:["#",l.id.slice(0,8).toUpperCase()]}),l.event.is_paid&&Je.jsxs("div",{className:"text-sm mt-1",children:[Je.jsx("span",{className:"text-gray-600 mr-1",children:"Payment:"}),Je.jsx("span",{className:"completed"===l.payment_status?"text-green-600":"text-yellow-700",children:"completed"===l.payment_status?"Completed":l.payment_status||"Pending"})]})]})})]}),Je.jsxs("div",{className:"p-8 bg-gradient-to-b from-white to-primary-50/40 border-l border-gray-200",children:[Je.jsxs("div",{className:"mb-6",children:[Je.jsx("div",{className:"text-sm text-gray-500",children:"Event"}),Je.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.event.title}),Je.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-center gap-2 text-gray-700",children:[Je.jsxs("span",{className:"inline-flex items-center",children:[Je.jsx(p,{className:"h-4 w-4 mr-2"})," ",l.name]}),Je.jsx("span",{className:"hidden sm:inline text-gray-300",children:"•"}),Je.jsxs("span",{className:"inline-flex items-center",children:[Je.jsx(R,{className:"h-4 w-4 mr-2"})," ",l.email]})]})]}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{className:"flex items-start",children:[Je.jsx(S,{className:"h-5 w-5 text-primary-600 mr-3 mt-0.5"}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm text-gray-600",children:"Date"}),Je.jsx("div",{className:"font-semibold text-gray-900",children:y.toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]})]}),Je.jsxs("div",{className:"flex items-start",children:[Je.jsx(Y,{className:"h-5 w-5 text-primary-600 mr-3 mt-0.5"}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm text-gray-600",children:"Time"}),Je.jsx("div",{className:"font-semibold text-gray-900",children:y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),Je.jsxs("div",{className:"flex items-start",children:[Je.jsx(P,{className:"h-5 w-5 text-primary-600 mr-3 mt-0.5"}),Je.jsxs("div",{children:[Je.jsx("div",{className:"text-sm text-gray-600",children:"Location"}),Je.jsx("div",{className:"font-semibold text-gray-900",children:l.event.location})]})]})]}),Je.jsxs("div",{className:"mt-8 grid grid-cols-2 sm:grid-cols-4 gap-3",children:[Je.jsxs("button",{onClick:()=>{f(!0)},className:"flex items-center justify-center gap-2 px-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:[Je.jsx(L,{className:"h-4 w-4"})," Share"]}),Je.jsxs("button",{onClick:()=>{window.print()},className:"flex items-center justify-center gap-2 px-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:[Je.jsx(Ne,{className:"h-4 w-4"})," Print"]}),Je.jsxs("button",{onClick:()=>{const e=new Date(l.event.start_date),t=new Date(e.getTime()+72e5),s=e=>String(e).padStart(2,"0"),a=e=>`${e.getUTCFullYear()}${s(e.getUTCMonth()+1)}${s(e.getUTCDate())}T${s(e.getUTCHours())}${s(e.getUTCMinutes())}00Z`,r=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Evange//Ticket//EN","CALSCALE:GREGORIAN","BEGIN:VEVENT",`DTSTART:${a(e)}`,`DTEND:${a(t)}`,`SUMMARY:${l.event.title}`,`LOCATION:${l.event.location}`,`DESCRIPTION:Your ticket for ${l.event.title}`,"END:VEVENT","END:VCALENDAR"].join("\r\n"),i=new Blob([r],{type:"text/calendar;charset=utf-8"}),n=URL.createObjectURL(i),o=document.createElement("a");o.href=n,o.download=`${l.event.title.replace(/\s+/g,"_")}.ics`,o.click(),URL.revokeObjectURL(n)},className:"flex items-center justify-center gap-2 px-3 py-2 bg-white text-gray-900 border border-gray-200 rounded-lg hover:bg-gray-50 shadow-sm",children:[Je.jsx(S,{className:"h-4 w-4"})," Calendar"]}),Je.jsx("a",{href:`/events/${l.event.id}`,className:"flex items-center justify-center gap-2 px-3 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 shadow",children:"View Event"})]}),Je.jsxs("div",{className:"mt-8 bg-primary-50 border border-primary-100 text-primary-800 rounded-xl p-4",children:[Je.jsx("div",{className:"font-semibold mb-2",children:"Important"}),Je.jsxs("ul",{className:"text-sm space-y-1",children:[Je.jsx("li",{children:"• Keep this QR safe and don’t share it."}),Je.jsx("li",{children:"• Arrive 15 minutes early for check-in."}),Je.jsx("li",{children:"• Download or screenshot your ticket for offline access."})]})]})]})]})]})}),g&&l&&Je.jsx(ha,{eventId:l.event.id,eventTitle:l.event.title,onClose:()=>f(!1)})]})}function Tr(){const{user:e}=Is(),{accessToken:t}=Ds(),[a,r]=s.useState([]),[i,n]=s.useState(!0);s.useEffect(()=>{l()},[]);const l=async()=>{var e;try{const s=await fetch("/api/events",{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await s.json();r((null==(e=t.data)?void 0:e.events)||[])}}catch(s){}finally{n(!1)}};return e&&"admin"===e.role?Je.jsx("div",{className:"min-h-screen bg-gray-50",children:Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[Je.jsxs("div",{className:"mb-8",children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),Je.jsx("p",{className:"mt-2 text-gray-600",children:"Manage events, staff, and system settings"})]}),Je.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-blue-100 rounded-md",children:Je.jsx(S,{className:"h-6 w-6 text-blue-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Events"}),Je.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-green-100 rounded-md",children:Je.jsx(y,{className:"h-6 w-6 text-green-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Events"}),Je.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(e=>new Date(e.start_date)>new Date).length})]})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-purple-100 rounded-md",children:Je.jsx(ye,{className:"h-6 w-6 text-purple-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Month"}),Je.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(e=>{const t=new Date(e.start_date),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length})]})]})}),Je.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Je.jsxs("div",{className:"flex items-center",children:[Je.jsx("div",{className:"p-2 bg-orange-100 rounded-md",children:Je.jsx(ne,{className:"h-6 w-6 text-orange-600"})}),Je.jsxs("div",{className:"ml-4",children:[Je.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Status"}),Je.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Online"})]})]})})]}),Je.jsxs("div",{className:"bg-white rounded-lg shadow",children:[Je.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[Je.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Event Management"}),Je.jsx("p",{className:"text-sm text-gray-600",children:"Manage events and their staff assignments"})]}),i?Je.jsx("div",{className:"p-6",children:Je.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map((e,t)=>Je.jsx("div",{className:"h-16 bg-gray-200 rounded"},t))})}):0===a.length?Je.jsxs("div",{className:"p-6 text-center text-gray-500",children:[Je.jsx(S,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),Je.jsx("p",{children:"No events found."})]}):Je.jsx("div",{className:"divide-y divide-gray-200",children:a.map(e=>Je.jsx("div",{className:"p-6",children:Je.jsxs("div",{className:"flex items-center justify-between",children:[Je.jsxs("div",{className:"flex-1 min-w-0",children:[Je.jsx("h4",{className:"text-lg font-medium text-gray-900 truncate",title:ea(e.title,60)?e.title:void 0,children:Ks(e.title,60)}),Je.jsxs("div",{className:"mt-1 text-sm text-gray-600 space-y-1",children:[Je.jsxs("p",{children:["📅 ",new Date(e.start_date).toLocaleDateString()]}),Je.jsxs("p",{className:"truncate group relative cursor-help",title:ea(e.location,50)?e.location:void 0,children:["📍 ",Ks(e.location,50)]}),Je.jsxs("p",{className:"truncate",children:["👤 Organizer: ",e.organizer.name]})]})]}),Je.jsxs("div",{className:"flex space-x-3 flex-shrink-0",children:[Je.jsx(o,{to:`/events/${e.id}`,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"View Event"}),Je.jsx(o,{to:`/events/${e.id}/check-in`,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Check-in Dashboard"})]})]})},e.id))})]}),Je.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Je.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Je.jsx(y,{className:"h-8 w-8 text-blue-600"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Staff Management"})]}),Je.jsx("p",{className:"text-gray-600 mb-4",children:"Staff management is available on individual event pages. Navigate to any event to add or manage staff members."}),Je.jsx("p",{className:"text-sm text-gray-500",children:"💡 Tip: Each event can have its own staff with custom permissions."})]}),Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Je.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Je.jsx(ye,{className:"h-8 w-8 text-green-600"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Analytics"})]}),Je.jsx("p",{className:"text-gray-600 mb-4",children:"View check-in analytics and event performance metrics from individual event dashboards."}),Je.jsx("p",{className:"text-sm text-gray-500",children:"📊 Real-time check-in statistics available for each event."})]}),Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[Je.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[Je.jsx(ne,{className:"h-8 w-8 text-purple-600"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Settings"})]}),Je.jsx("p",{className:"text-gray-600 mb-4",children:"Configure system-wide settings, email templates, and QR code generation parameters."}),Je.jsx("p",{className:"text-sm text-gray-500",children:"⚙️ Advanced settings coming soon."})]})]})]})}):Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center",children:[Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Je.jsx("p",{className:"text-gray-600",children:"Only administrators can access this page."})]})})}const $r=()=>{const{user:e}=Is(),t=n(),[a,r]=s.useState([]),[i,l]=s.useState([]),[c,d]=s.useState(!0),[m,x]=s.useState(null),[u,h]=s.useState(""),[p,g]=s.useState(1),[f,b]=s.useState(1),[v,j]=s.useState(!0),[N,w]=s.useState("all"),k=async()=>{try{d(!0),x(null);const e=await Js.getEvents({page:p,limit:12,search:u||void 0,upcoming:v,free:"free"===N||void 0,week:"week"===N||void 0});e.success&&e.data&&(r(e.data.events),b(e.data.pagination.pages))}catch(e){x(e.message||"Failed to fetch events")}finally{d(!1)}};s.useEffect(()=>{k(),(async()=>{if(e)try{const e=await Zs.getUserRegistrations();e.success&&e.data&&l(e.data.registrations)}catch(t){}})()},[p,v,N,e]);const C=e=>{var t;const s=i.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});return!!s&&((null==(t=s.event)?void 0:t.is_paid)?"completed"===s.payment_status:"confirmed"===s.status||null===s.payment_status)},E=e=>{var t;const s=i.find(t=>{var s;return(null==(s=t.event)?void 0:s.id)===e&&"cancelled"!==t.status});if(!s)return;if(null==(t=s.event)?void 0:t.is_paid)return"completed"===s.payment_status?s:void 0;return"confirmed"===s.status||null===s.payment_status?s:void 0};return c&&0===a.length?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center",children:[Je.jsx("div",{className:"flex items-center justify-center min-h-64",children:Je.jsx(Ms,{size:"lg",text:"Loading events..."})}),Je.jsx("p",{className:"mt-4 text-gray-600",children:"Loading events..."})]})}):Je.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Je.jsx("div",{className:"bg-white border-b border-gray-200",children:Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[Je.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-6",children:Je.jsxs("div",{className:"flex-1",children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Discover Events"}),Je.jsx("p",{className:"text-gray-600",children:"Find amazing events happening around you"})]})}),Je.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Je.jsx("div",{className:"flex-1 max-w-2xl",children:Je.jsxs("form",{onSubmit:e=>{e.preventDefault(),g(1),k()},className:"flex gap-0",children:[Je.jsx("input",{type:"text",placeholder:"Search events...",value:u,onChange:e=>h(e.target.value),className:"flex-1 px-4 py-2 border border-r-0 border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-500 focus:outline-none"}),Je.jsx("button",{type:"submit",className:"px-6 py-2 bg-gray-100 border border-gray-300 rounded-r-lg hover:bg-gray-200 transition-colors flex items-center justify-center","aria-label":"Search",children:Je.jsx(z,{className:"w-5 h-5 text-gray-600"})})]})}),Je.jsxs("div",{className:"flex flex-wrap gap-2",children:[Je.jsx("button",{onClick:()=>{w("all"),h(""),j(!0),g(1),k()},className:"text-sm px-4 py-2 rounded-lg transition-colors "+("all"===N?"bg-primary-600 text-white":"bg-primary-100 text-gray-700 hover:bg-gray-200"),children:"All Events"}),Je.jsx("button",{onClick:()=>{w("free"),h(""),j(!0),g(1),k()},className:"text-sm px-4 py-2 rounded-lg transition-colors "+("free"===N?"bg-green-600 text-white":"bg-green-100 text-gray-700 hover:bg-gray-200"),children:"Free Events"}),Je.jsx("button",{onClick:()=>{w("week"),h(""),j(!0),g(1),k()},className:"text-sm px-4 py-2 rounded-lg transition-colors "+("week"===N?"bg-purple-600 text-white":"bg-purple-100 text-gray-700 hover:bg-gray-200"),children:"This Week"})]})]})]})}),Je.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m&&Je.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:Je.jsx("p",{className:"text-red-800",children:m})}),c||0!==a.length?Je.jsxs(Je.Fragment,{children:[Je.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(s=>{var a;const r=(e=>{const t=new Date,s=new Date(e.start_date),a=new Date(e.end_date);return a<t?{status:"ended",color:"gray"}:s<=t&&a>=t?{status:"ongoing",color:"blue"}:s>t?{status:"upcoming",color:"green"}:{status:"unknown",color:"gray"}})(s),i=(e=>e.registrations&&Array.isArray(e.registrations)?e.registrations.length>0&&"object"==typeof e.registrations[0]&&"count"in e.registrations[0]?e.registrations[0].count||0:e.registrations.length:0)(s);return Je.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 overflow-hidden group cursor-pointer",children:[Je.jsxs("div",{className:"relative h-40 bg-gray-100 overflow-hidden",children:[s.banner_url?Je.jsx("img",{src:s.banner_url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):Je.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:Je.jsx(S,{className:"w-12 h-12 text-white"})}),Je.jsx("div",{className:"absolute top-3 left-3",children:Je.jsx("span",{className:"bg-white text-gray-900 px-2 py-1 rounded-md text-sm font-semibold shadow-sm",children:s.is_paid?`$${s.price}`:"FREE"})})]}),Je.jsxs("div",{className:"p-4",children:[Je.jsx("div",{className:"text-sm font-medium text-orange-600 mb-2",children:new Date(s.start_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),Je.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",title:ea(s.title,80)?s.title:void 0,children:Ks(s.title,80)}),Je.jsxs("div",{className:"flex items-center text-gray-600 text-sm mb-3 group relative",children:[Je.jsx(P,{className:"w-4 h-4 mr-1 flex-shrink-0"}),Je.jsx("span",{className:"truncate",children:Ks(s.location,50)}),ea(s.location,50)&&Je.jsx("div",{className:"absolute left-0 top-full mt-1 hidden group-hover:block z-10 w-max max-w-xs bg-gray-900 text-white text-xs rounded py-1 px-2 shadow-lg",children:s.location})]}),Je.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-4",children:[Je.jsx(y,{className:"w-4 h-4 mr-1"}),Je.jsxs("span",{children:[i||0," going"]})]}),Je.jsxs("div",{className:"space-y-2",children:[Je.jsx(o,{to:`/events/${s.id}`,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"View Details"}),e&&C(s.id)?Je.jsxs(o,{to:`/ticket/${null==(a=E(s.id))?void 0:a.id}`,className:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition-colors",children:[Je.jsx(me,{className:"w-4 h-4 mr-2"}),"View Ticket"]}):"ended"===r.status?Je.jsx("button",{disabled:!0,className:"w-full px-4 py-2 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed",children:"Event Ended"}):i&&s.capacity&&i>=s.capacity?Je.jsx("button",{disabled:!0,className:"w-full px-4 py-2 text-sm font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed",children:"Event Full"}):e?Je.jsx("button",{onClick:()=>{return a=s.id,void(e&&t(`/events/${a}/register`));var a},className:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Register Now"}):Je.jsx(o,{to:"/login",className:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Login to Register"})]})]})]},s.id)})}),f>1&&Je.jsx("div",{className:"mt-8 flex justify-center",children:Je.jsxs("nav",{className:"flex items-center bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[Je.jsx("button",{onClick:()=>g(Math.max(1,p-1)),disabled:1===p,className:"px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border-r border-gray-200",children:"Previous"}),Je.jsx("div",{className:"flex",children:Array.from({length:f},(e,t)=>t+1).map(e=>Je.jsx("button",{onClick:()=>g(e),className:`px-4 py-3 text-sm font-medium transition-colors ${p===e?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"} ${e<f?"border-r border-gray-200":""}`,children:e},e))}),Je.jsx("button",{onClick:()=>g(Math.min(f,p+1)),disabled:p===f,className:"px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border-l border-gray-200",children:"Next"})]})})]}):Je.jsxs("div",{className:"text-center py-12",children:[Je.jsx(S,{className:"mx-auto h-12 w-12 text-gray-400"}),Je.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No events found"}),Je.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u?"Try adjusting your search terms.":"Be the first to create an event!"}),e&&("organizer"===e.role||"admin"===e.role)&&Je.jsx("div",{className:"mt-6",children:Je.jsxs(o,{to:"/events/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[Je.jsx(W,{className:"w-4 h-4 mr-2"}),"Create Event"]})})]})]})]})};function Ir(){const{user:e,isLoading:t}=Is(),[a,r]=s.useState([]),[i,n]=s.useState(null),[l,o]=s.useState(!0);if(t)return Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading..."})});if(!e)return Je.jsx(c,{to:"/login",replace:!0});if(!["organizer","admin"].includes(e.role))return Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center max-w-md mx-auto",children:[Je.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),Je.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the QR scanner. Only organizers and administrators can use this feature."})]})});s.useEffect(()=>{(async()=>{try{o(!0);const e=await Js.getMyEvents();if(e.success&&e.data){const t=e.data.events.filter(e=>new Date<=new Date(e.end_date)&&(!e.status||"published"===e.status));r(t)}}catch(e){}finally{o(!1)}})()},[]);const d=a.find(e=>e.id===i),m=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return l?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Loading events..."})}):Je.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i?Je.jsxs("div",{children:[Je.jsxs("div",{className:"flex items-center mb-6",children:[Je.jsxs("button",{onClick:()=>n(null),className:"flex items-center text-gray-600 hover:text-gray-900 mr-4",children:[Je.jsx(K,{className:"h-5 w-5 mr-1"}),"Back to Events"]}),Je.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[null==d?void 0:d.title," - Check-In"]})]}),Je.jsx(zr,{eventId:i})]}):Je.jsxs("div",{children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"QR Code Scanner"}),Je.jsx("p",{className:"text-gray-600 mb-6",children:"Select an event to start scanning participant QR codes for check-in."}),0===a.length?Je.jsxs("div",{className:"text-center py-12",children:[Je.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Je.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Available Events"}),Je.jsx("p",{className:"text-gray-600",children:"You don't have any active or upcoming events to scan for."})]}):Je.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(e=>{return Je.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n(e.id),children:Je.jsxs("div",{className:"p-6",children:[Je.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),Je.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(S,{className:"h-4 w-4 mr-2"}),(t=e.start_date,new Date(t).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}))," at"," ",m(e.start_date)]}),e.location&&Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(P,{className:"h-4 w-4 mr-2"}),e.location]}),Je.jsxs("div",{className:"flex items-center",children:[Je.jsx(y,{className:"h-4 w-4 mr-2"}),"Capacity: ",e.capacity]})]}),Je.jsx("button",{className:"mt-4 w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Start Scanning"})]})},e.id);var t})})]})})}const Lr=({size:e="md",className:t})=>Je.jsx("div",{className:Nr("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[e],t)}),Or={createPaymentIntent:async(e,t,s,a="USD")=>Ts.post("/payments/create-intent",{registrationId:e,eventId:t,amount:s,currency:a}),verifyPayment:async e=>Ts.post("/payments/verify",e),handlePaymentFailure:async(e,t)=>Ts.post("/payments/failure",{paymentId:e,reason:t}),getPaymentDetails:async e=>Ts.get(`/payments/${e}`)},qr=Te("pk_test_51RvKItHv57VEdPanLmGAWKKeSbKqfZgPJ34vNE3mBZGrbJZDmSBx3tQqks6GkPrOr2oO7AOX8dnh8AWpONeXXHo500LvfirrLT"),Mr=({paymentIntent:e,onSuccess:t,onError:a,onCancel:r})=>{const i=Ie(),n=Le(),[l,o]=s.useState(!1);return Je.jsxs("form",{onSubmit:async s=>{var r,l;if(s.preventDefault(),!i||!n)return;o(!0);const c=n.getElement(Oe);if(!c)return a("Card element not found"),void o(!1);try{const{error:s,paymentIntent:n}=await i.confirmCardPayment(e.clientSecret,{payment_method:{card:c,billing_details:{name:e.participantName,email:e.participantEmail}}});if(s)return a(s.message||"Payment failed"),void o(!1);if("succeeded"===n.status)try{const s=await Or.verifyPayment({paymentId:e.paymentId,paymentIntentId:n.id,paymentMethodId:n.payment_method});s.success&&(null==(r=s.data)?void 0:r.success)?t(e.paymentId):a((null==(l=s.data)?void 0:l.message)||"Payment verification failed")}catch(d){a(ya(d))}}catch(m){a(ya(m))}finally{o(!1)}},className:"space-y-6",children:[Je.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[Je.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.eventTitle}),Je.jsxs("p",{className:"text-gray-600",children:["Participant: ",e.participantName]}),Je.jsxs("p",{className:"text-gray-600",children:["Email: ",e.participantEmail]}),Je.jsxs("p",{className:"text-xl font-bold mt-2",children:["Amount: ",e.currency.toUpperCase()," ",(e.amount/100).toFixed(2)]})]}),Je.jsx("div",{className:"p-4 border border-gray-300 rounded-lg",children:Je.jsx(Oe,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),Je.jsxs("div",{className:"flex gap-3",children:[Je.jsx(wr,{type:"submit",disabled:!i||l,className:"flex-1",children:l?Je.jsxs(Je.Fragment,{children:[Je.jsx(Lr,{size:"sm"}),"Processing..."]}):`Pay ${e.currency.toUpperCase()} ${(e.amount/100).toFixed(2)}`}),Je.jsx(wr,{type:"button",variant:"outline",onClick:r,disabled:l,children:"Cancel"})]})]})},Ur=({registrationId:e,eventId:t,amount:a,currency:r="USD",onSuccess:i,onError:n,onCancel:l})=>{const[o,c]=s.useState(null),[d,m]=s.useState(!0);if(s.useEffect(()=>{(async()=>{try{const s=await Or.createPaymentIntent(e,t,a,r);s.success&&s.data?c(s.data):n(s.message||"Failed to initialize payment")}catch(s){n(ya(s))}finally{m(!1)}})()},[e,t,a,r,n]),d)return Je.jsxs("div",{className:"flex items-center justify-center p-8",children:[Je.jsx(Lr,{}),Je.jsx("span",{className:"ml-2",children:"Initializing payment..."})]});if(!o)return Je.jsxs("div",{className:"text-center p-8",children:[Je.jsx("p",{className:"text-red-600 mb-4",children:"Failed to initialize payment"}),Je.jsx(wr,{onClick:l,variant:"outline",children:"Go Back"})]});const x={clientSecret:o.clientSecret,appearance:{theme:"stripe"}};return Je.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[Je.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Complete Payment"}),Je.jsx($e,{stripe:qr,options:x,children:Je.jsx(Mr,{paymentIntent:o,onSuccess:i,onError:n,onCancel:l})})]})};function Br(){const{id:e}=d(),t=l(),a=n(),[r,i]=s.useState(!0),[o,c]=s.useState(null),[m,x]=s.useState(!1),u=t.state;s.useEffect(()=>{if(!u||!u.registration||!e)return c("Invalid payment session. Please try registering again."),void i(!1);i(!1)},[u,e]);return r?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsx(Ms,{size:"lg",text:"Preparing payment..."})}):o||!u?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[Je.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Error"}),Je.jsx("p",{className:"text-gray-600 mb-4",children:o||"Invalid payment session. Please try registering again."}),Je.jsx("button",{onClick:()=>a(`/events/${e}`),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Back to Event"})]})}):m?Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:Je.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[Je.jsx("div",{className:"text-6xl mb-4",children:"✅"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),Je.jsx("p",{className:"text-gray-600 mb-4",children:"Your registration is confirmed. Redirecting to your ticket..."}),Je.jsx(Ms,{size:"sm"})]})}):Je.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Je.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[Je.jsxs("div",{className:"text-center mb-8",children:[Je.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Complete Your Registration"}),Je.jsx("p",{className:"text-gray-600 mt-2",children:u.message})]}),Je.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[Je.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),Je.jsxs("div",{className:"space-y-2",children:[Je.jsxs("div",{className:"flex justify-between",children:[Je.jsx("span",{className:"text-gray-600",children:"Event:"}),Je.jsx("span",{className:"font-medium",children:u.registration.event.title})]}),Je.jsxs("div",{className:"flex justify-between",children:[Je.jsx("span",{className:"text-gray-600",children:"Date:"}),Je.jsx("span",{className:"font-medium",children:new Date(u.registration.event.start_date).toLocaleDateString()})]}),Je.jsxs("div",{className:"flex justify-between",children:[Je.jsx("span",{className:"text-gray-600",children:"Location:"}),Je.jsx("span",{className:"font-medium",children:u.registration.event.location})]}),Je.jsxs("div",{className:"flex justify-between",children:[Je.jsx("span",{className:"text-gray-600",children:"Participant:"}),Je.jsx("span",{className:"font-medium",children:u.registration.name})]})]})]}),Je.jsx(Ur,{registrationId:u.registration.id,eventId:e,amount:u.amount,currency:"USD",onSuccess:e=>{x(!0),kt.success("Payment completed successfully!"),a(`/ticket/${u.registration.id}`,{state:{message:"Payment completed! Your registration is confirmed."}})},onError:e=>{c(e),kt.error("Payment failed: "+e)},onCancel:()=>{kt("Payment cancelled. You can complete it later from your registrations."),a(`/events/${e}`)}}),Je.jsx("div",{className:"mt-8 text-center",children:Je.jsx("p",{className:"text-sm text-gray-500",children:"Having trouble with payment? Contact support for assistance."})})]})})}const Vr=()=>{const[e]=m(),[t,a]=s.useState("loading"),[r,i]=s.useState(""),[n,l]=s.useState(!1),[c,d]=s.useState(!1),{user:x,isAuthenticated:u,logout:h}=Is(),p=e.get("token");s.useEffect(()=>{p&&!c?(d(!0),g(p)):p||(a("error"),i("Invalid verification link. No token provided."))},[p,c]);const g=async e=>{var t,s;try{const r=await fetch(`https://your-backend-domain.com/api/auth/verify-email?token=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await r.json();n.success?(a("success"),i(n.message||"Email verified successfully!")):(null==(t=n.error)?void 0:t.includes("already been used"))?(a("already-verified"),i("Your email has been verified! You can now log in to your account.")):(null==(s=n.error)?void 0:s.includes("expired"))?(a("error"),i("This verification link has expired. Please request a new verification email.")):(a("error"),i(n.error||"Failed to verify email."))}catch(r){a("error"),i("An error occurred while verifying your email. Please try again.")}},f=e=>{const t=u&&x;return Je.jsxs("div",{className:"text-center",children:[Je.jsx(_,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),Je.jsx("p",{className:"text-gray-600 mb-6",children:r}),t?Je.jsxs("div",{className:"space-y-4",children:[Je.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Je.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"You're currently logged in with an unverified account. Please log out and log back in to access all features."})}),Je.jsx("button",{onClick:()=>{h(),window.location.href="/login"},className:"btn btn-primary",children:"Log Out & Continue to Login"})]}):Je.jsx(o,{to:"/login",className:"btn btn-primary",children:"Continue to Login"})]})};return Je.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:Je.jsx("div",{className:"max-w-md w-full",children:Je.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8",children:[Je.jsx("div",{className:"flex justify-center mb-6",children:Je.jsx(R,{className:"h-12 w-12 text-primary-600"})}),(()=>{switch(t){case"loading":return Je.jsxs("div",{className:"text-center",children:[Je.jsx(Ms,{size:"xl",className:"mb-4"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying Your Email"}),Je.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your email address..."})]});case"success":return f("Email Verified!");case"already-verified":return f("Already Verified!");case"error":const e=r.includes("expired");return Je.jsxs("div",{className:"text-center",children:[Je.jsx(he,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),Je.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Failed"}),Je.jsx("p",{className:"text-gray-600 mb-6",children:r}),Je.jsxs("div",{className:"space-y-4",children:[Je.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[Je.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Need a new verification link?"}),Je.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:e?"Your verification link has expired. Enter your email address to get a new one.":"If your verification link has expired or you need a new one, enter your email address below."}),Je.jsx("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget).get("email");t&&(async e=>{try{l(!0);const t=await fetch("https://your-backend-domain.com/api/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();s.success?i("Verification email sent! Please check your inbox."):i(s.error||"Failed to resend verification email.")}catch(t){i("An error occurred while resending verification email.")}finally{l(!1)}})(t)},children:Je.jsxs("div",{className:"flex gap-2",children:[Je.jsx("input",{type:"email",name:"email",placeholder:"Enter your email address",className:"flex-1 px-3 py-2 border border-yellow-300 rounded-md text-sm",required:!0}),Je.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-yellow-600 text-white rounded-md text-sm hover:bg-yellow-700 disabled:opacity-50 flex items-center gap-2",children:[n&&Je.jsx(Ms,{size:"xs",className:"border-white"}),"Resend"]})]})})]}),Je.jsx(o,{to:"/register",className:"inline-block text-primary-600 hover:text-primary-500 text-sm",children:"Create a new account"})]})]});default:return null}})()]})})})};function Gr(){const e=Ds(e=>e.validateToken);return s.useEffect(()=>{e()},[e]),Je.jsx(Os,{children:Je.jsxs(x,{children:[Je.jsx(u,{path:"/",element:Je.jsx(Bs,{})}),Je.jsx(u,{path:"/login",element:Je.jsx(Qs,{})}),Je.jsx(u,{path:"/register",element:Je.jsx(Hs,{})}),Je.jsx(u,{path:"/verify-email",element:Je.jsx(Vr,{})}),Je.jsx(u,{path:"/events",element:Je.jsx($r,{})}),Je.jsx(u,{path:"/dashboard",element:Je.jsx(Us,{children:Je.jsx(ta,{})})}),Je.jsx(u,{path:"/my-events/:role",element:Je.jsx(Us,{children:Je.jsx(Ra,{})})}),Je.jsx(u,{path:"/events/create",element:Je.jsx(Us,{children:Je.jsx(xa,{})})}),Je.jsx(u,{path:"/events/:id",element:Je.jsx(Us,{children:Je.jsx(pa,{})})}),Je.jsx(u,{path:"/events/:id/form-builder",element:Je.jsx(Us,{requireOrganizer:!0,children:Je.jsx(Pa,{})})}),Je.jsx(u,{path:"/events/:id/feedback-responses",element:Je.jsx(Us,{requireOrganizer:!0,children:Je.jsx(Ar,{})})}),Je.jsx(u,{path:"/events/:id/registrations",element:Je.jsx(Us,{children:Je.jsx(Fa,{})})}),Je.jsx(u,{path:"/events/:id/attendance",element:Je.jsx(Us,{children:Je.jsx(Ta,{})})}),Je.jsx(u,{path:"/certificates",element:Je.jsx(Us,{children:Je.jsx(Cr,{})})}),Je.jsx(u,{path:"/certificates/:id",element:Je.jsx(Us,{children:Je.jsx(kr,{})})}),Je.jsx(u,{path:"/events/:id/certificates",element:Je.jsx(Us,{children:Je.jsx(kr,{})})}),Je.jsx(u,{path:"/certificate/verify",element:Je.jsx(_r,{})}),Je.jsx(u,{path:"/admin",element:Je.jsx(Us,{requireAdmin:!0,children:Je.jsx(Tr,{})})}),Je.jsx(u,{path:"/events/:eventId/check-in",element:Je.jsx(Us,{children:Je.jsx(Dr,{})})}),Je.jsx(u,{path:"/scanner",element:Je.jsx(Us,{requireOrganizer:!0,allowStaff:!0,children:Je.jsx(Ir,{})})}),Je.jsx(u,{path:"/ticket/:registrationId",element:Je.jsx(Us,{children:Je.jsx(Fr,{})})}),Je.jsx(u,{path:"/my-registrations",element:Je.jsx(Us,{children:Je.jsx(Da,{})})}),Je.jsx(u,{path:"/events/:id/register",element:Je.jsx(ja,{})}),Je.jsx(u,{path:"/events/:id/payment",element:Je.jsx(Us,{children:Je.jsx(Br,{})})})]})})}const Yr=[/bearer\s+[a-zA-Z0-9\-_\.]+/gi,/token["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/password["\']?\s*[:=]\s*["\']?[^"',\s]+/gi,/secret["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/key["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/authorization["\']?\s*[:=]\s*["\']?[^"',\s]+/gi,/refresh_token["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi,/access_token["\']?\s*[:=]\s*["\']?[a-zA-Z0-9\-_\.]+/gi],Qr=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/gi;function Wr(e){let t=e;return Yr.forEach(e=>{t=t.replace(e,e=>`${e.split(/[:=]/)[0]}: [REDACTED]`)}),t=t.replace(Qr,"[EMAIL_REDACTED]"),t}function Hr(e,t=0){if(t>10)return"[MAX_DEPTH_REACHED]";if(null==e)return e;if("string"==typeof e)return Wr(e);if("number"==typeof e||"boolean"==typeof e)return e;if(Array.isArray(e))return e.map(e=>Hr(e,t+1));if("object"==typeof e){const s={};for(const[a,r]of Object.entries(e)){const e=a.toLowerCase();e.includes("token")||e.includes("password")||e.includes("secret")||e.includes("key")||e.includes("authorization")||e.includes("auth")?s[a]="[REDACTED]":s[a]=Hr(r,t+1)}return s}return e}!function(){{console.log=()=>{},console.info=()=>{},console.warn=()=>{};const e=console.error;console.error=(...t)=>{const s=t.map(e=>"string"==typeof e?Wr(e):Hr(e));e(...s)}}}(),He(document.getElementById("root")).render(Je.jsx(s.StrictMode,{children:Je.jsxs(h,{children:[Je.jsx(Gr,{}),Je.jsx(Xt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})}));
